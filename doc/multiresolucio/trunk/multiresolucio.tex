
\chapter{Esquemes de multiresolució}

\todo{}


Definim una funció de multiresolució com una consulta sobre una sèrie
temporal que ens retorna una nova sèrie temporal resultant
d'aplicar-li un esquema de multiresolució. 

Aquesta funció de multiresolució ens permetrà:

\begin{itemize}
\item Plantejar problemes on veiem la multiresolució com una consulta
  sobre una sèrie temporal; és a dir com una operació per calcular
  parelles d'agregació d'atributs i resolucions temporals per a una
  sèrie temporal.
\item Oferir sistemes duals de \glspl{SGSTM} i \glspl{SGST} amb operacions
  de consulta multiresolució.
\item Estudiar implementacions per a la consulta de multiresolució, p.ex. para\l.lelisme. (vegeu secció implementació \todo{})
\item Estudiar la teoria de la informació per a l'esquema de multiresolució
\end{itemize}


\section{Funció de multiresolució}

En el model de \gls{SGSTM} hem definit un model de dades de \gls{SGBD}
per a gestionar sèries temporals multiresolució. Com a \gls{SGBD},
aquest model té una estructura i per tant emmagatzema informació d'una
sèrie temporal en una forma determinada: la de multiresolució.  La
definició com a \gls{SGBD} té com a objectius l'emmagatzematge
compacte de les dades i la selecció de la informació ja preparada per
a consultes posteriors. 

Així, aquest model té capacitats de computació
sincronitzada o en línia (\emph{online}) amb el temps i té
característiques dels sistemes que tracten fluxos de dades (\emph{data
  stream}); és a dir dades que s'estan adquirint contínuament i cal
anar computant al mateix temps que es van adquirint. Això no treu,
però, que de manera més simplificada també es pugui treballar amb un
\gls{SGSTM} en temps diferit (\emph{offline}), és a dir que
s'emmagatzemin les dades adquirides i en el moment que es vulgui
aplicar-hi la consolidació.




Això no obstant, podem simplificar el problema de càlcul de
multiresolució en temps diferit com una consulta en un \gls{SGST} de
transformació d'una sèrie temporal a una nova sèrie temporal.

És a dir, sigui $S$ una sèrie temporal, $M$ una sèrie temporal
multiresolució i $e = \{ (\delta_0,f_0,\tau_0,k_0), \ldots,
(\delta_d,f_d,\tau_d,k_d)\}$ els paràmetres de l'esquema de
multiresolució de $M$. Afegim totes les mesures de la sèrie temporal a
la multiresolució, $\forall m \in S:
M=\glssymbol{addM}(M,m)$\todo{matemàticament és correcte recursivitat
  M=f(M)?}, i la consolidem, $M=\glssymbol{consolidaM}(M')$ fins que
$M$ no sigui consolidable. Consultem la sèrie temporal multiresolució
amb les dues consultes bàsiques, les quals retornen sèries temporals,
$S'=\glssymbol{not:sgstm:serietotal}(M')$ i $S_{\delta
  f}'\glssymbol{not:sgstm:seriedisc}(M',\delta,f)$ on $\delta$ i $f$
són dos paràmetres de l'esquema de multiresolució de $M$ que van
associats amb els altres dos corresponents $\tau$ i $k$.



Plantegem les funcions de transformació de la sèrie temporal original
a les consultades. És a dir, les funcions que anomenem
$\glssymbol{not:sgstm:dmap}$ i $\glssymbol{not:sgstm:multiresolucio}$
i que ens permeten calcular:

\[
\glssymbol{not:sgstm:dmap}: S \times \delta \times f \times \tau \times k \longrightarrow
S'_{\delta f}
\]


\[
 \glssymbol{not:sgstm:multiresolucio}: S \times e  \longrightarrow S'
\]



Definim la consulta de selecció de disc dels \gls{SGSTM} a partir del
mapatge dels \gls{SGST} de manera que, en computació per temps
diferit, són equivalents
\[
\glssymbol{not:sgstm:seriedisc}(M',\delta,f) \equiv
\glssymboldef{not:sgstm:dmap}(S,\delta,f,\tau,k)
\]


\begin{definition}[mapa de \glssymbol{not:sgstm:seriedisc}]
  Sigui $S$ una sèrie temporal, $M$ una sèrie temporal multiresolució
  amb esquema $e$ i $(\delta,f,\tau,k)\in e$ els paràmetres de
  multiresolució d'una subsèrie resolució. L'expressió de
  $\glssymbol{not:sgstm:seriedisc}(M,\delta,f)$ com a mapa d'una sèrie
  temporal és $\glssymboldef{not:sgstm:dmap}(S,\delta,f,\tau,k)=
  \glssymbol{not:sgst:map}(S_I,\glssymbol{not:sgst:fmap})$ on
  \[
  \glssymbol{not:sgst:fmap}: m_i\mapsto f(S, [T(m_i)-\delta,T(m_i)]),
  \]
  \[
  S_I = \{ (t,\infty) | t\in T_I  \},\;  t_M = T(\max(S)),
  \]
  \[
  T_I = \{ t_I = \tau+n\delta | n\in\glssymbol{not:Z}, t_M - k\delta <
  t_I \leq t_M \}.
  \]
\end{definition}



\begin{example}
  \label{ex:multiresolucio:dmap}
  Sigui la sèrie temporal $S=\{(1,0),(3,1),(6,0),(10,1)\}$ i els
  paràmetres de multiresolució
  $((\delta,5),(f,\glssymbol{not:sgstm:maxdd}),(\tau,0),(k,2))$.  El
  mapa de \glssymbol{not:sgstm:seriedisc} és una sèrie temporal $S'=
  \glssymboldef{not:sgstm:dmap}(S,5,0,\glssymbol{not:sgstm:maxdd},2)$
  on $S'=\{(5,1),(10,1)\}$. Expressem el càlcul pas a pas, a la
  \autoref{fig:multiresolucio:dmap} es visualitzen en taula les sèries
  temporals corresponents:
  \begin{enumerate}
  \item El primer pas és obtenir els instants de temps que
    s'emmagatzemarien al disc d'una sèrie temporal
    multiresolució. Així, els instants de consolidació possibles són
    $T_I'=\{\tau+n\delta|n\in\glssymbol{not:Z}\}=
    \{\ldots,-5,0,5,10,15,\ldots\}$. Però un cop consolidat el disc
    només hi haurà els $k=2$ més recents abans de $t_M=T(\max(S))=10$,
    és a dir $T_I=\{t_I'\in T_I'|t_M - k\delta < t_I \leq
    t_M\}=\{5,10\}$.

  \item El segon pas és obtenir a partir de $T_I$ la sèrie temporal
    $S_I$ que es correspon amb la sèrie temporal que s'inicialitzaria
    al disc encara amb valors desconeguts,
    $S_I=\{(5,\infty),(10,\infty)\}$.



  \item El tercer pas és calcular la funció d'agregació a $S$ per a
    cada intervals de consolidació del disc de la forma
    $[T(m_i)-\delta,T(m_i)]$ on $m_i\in S_i$, és a dir $f(S,[0,5])$ i
    $f(S,[5,10])$. A tal efecte utilitzem el mapa sobre $S_I$ per a
    calcular la sèrie temporal resultant $S'=\{ (5,f(S,[0,5])),
    (10,f(S,[5,10])) \}$.

    Podríem calcular un pas entremig que es correspon amb les sèries
    temporals que hi hauria en el buffer abans de cada instant de
    consolidació. Així, per a cada $T(m_i)$ hi hauria la sèrie
    temporal $S[T(m_i)-\delta,T(m_i)]$, és a dir $S_B=\{
    (5,S[0,5],(10,S[5,10]) \}$.
  \end{enumerate}


  


\begin{figure}[tp]
  \centering
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S$} \\ \hline
    $t$  & $v$ \\ \hline
    1  & 0 \\
    3  & 1 \\
    6  & 0 \\
    10  & 1 \\ \hline
  \end{tabular} \qquad
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S_I$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & $\infty$ \\
    10  & $\infty$ \\ \hline
  \end{tabular} \qquad
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S_B$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & \begin{tabular}[c]{|c|c|}\hline $t$  & $v$ \\ \hline 1&0\\ 3&0 \\\hline  \end{tabular} \\\hline
    10  & \begin{tabular}[c]{|c|c|}\hline $t$  & $v$ \\ \hline 6&0\\ 10&1 \\\hline  \end{tabular} \\ \hline
  \end{tabular} \qquad
 \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S'$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & 1 \\
    10  & 1\\ \hline
  \end{tabular}
  \caption{Taules de les sèries temporals per l'operació de mapa de  \glssymbol{not:sgstm:seriedisc}}
  \label{fig:multiresolucio:dmap}
\end{figure}
 
\end{example}





Definim la consulta de sèrie temporal total dels \gls{SGSTM} a partir
del plegament dels \gls{SGST} de manera que, en computació per temps
diferit, són equivalents
\[
\glssymbol{not:sgstm:serietotal}(M') \equiv \glssymbol{not:sgstm:multiresolucio}(S,e)
\]

\begin{definition}[plec de \glssymbol{not:sgstm:serietotal}]
  Sigui $S$ una sèrie temporal i $M$ una sèrie temporal multiresolució
  amb esquema $e = \{ (\delta_0,f_0,\tau_0,k_0), \ldots,
  (\delta_d,f_d,\tau_d,k_d)\}$, el qual es pot observar com una sèrie
  temporal multivaluada.  L'expressió de
  $\glssymbol{not:sgstm:serietotal}(M)$ com a plec d'una sèrie
  temporal és $\glssymboldef{not:sgstm:multiresolucio}(S,e)=
  \glssymbol{not:sgst:ofold}(e,\{\},\glssymbol{not:sgst:ffold},\min)$
  on $\glssymbol{not:sgst:ffold}: S_i \times (\delta_c,f_c,\tau_c,k_c)
  \mapsto S_i ||
  \glssymbol{not:sgstm:dmap}(S,\delta_c,f_c,\tau_c,k_c)$.

  Així, el plec de \glssymbol{not:sgstm:serietotal} és la concatenació de
  tots els \glssymbol{not:sgstm:dmap} possibles per l'esquema $e$
  ordenats per $\delta$, assumint que $e$ no conté $\delta$ repetits.
\end{definition}



En resum: en temps diferit, s'insereixen les mateixes mesures a un
\gls{SGST} i a un \gls{SGSTM}. Per una banda es consolida el
\gls{SGSTM} i s'obté la sèrie total i per altra banda es consulta la
multiresolució en el \gls{SGST}. Aleshores s'obté la mateixa sèrie
temporal.


\begin{example}
  Sigui la sèrie temporal $S=\{(1,0),(3,1),(6,0),(10,1)\}$ i l'esquema
  de multiresolució
  $e=\{\{(\delta,5),(f,\glssymbol{not:sgstm:maxdd}),(\tau,0),(k,2)\},
  \{(\delta,2),(f,\glssymbol{not:sgstm:maxdd}),(\tau,0),(k,3)\}\}$.
  El plec de $\glssymbol{not:sgstm:serietotal}$ és una sèrie temporal
  $S'= \glssymboldef{not:sgstm:multiresolucio}(S,e)$ on
  $S'=\{(5,1),(6,0),(8,0),(10,1)\}$. Expressem el càlcul pas a pas, a la
  \autoref{fig:multiresolucio:multiresolucio} es visualitzen en taula les sèries
  temporals corresponents:

  \begin{enumerate}
  \item En primer lloc es calcula la sèrie temporal pels paràmetres de
    multiresolució $\delta_1$:
    $S_{D1}=\glssymbol{not:sgstm:dmap}(5,\glssymbol{not:sgstm:maxdd}),0,2)=\{(5,1),(10,1)\}$,
    com ja s'ha vist a l'\autoref{ex:multiresolucio:dmap}.

  \item En segon lloc, es calcula la sèrie temporal pels paràmetres de
    multiresolució $\delta_2$:
    $S_{D2}=\glssymbol{not:sgstm:dmap}(2,\glssymbol{not:sgstm:maxdd}),0,3)=\{(6,0),(8,0),(10,1)\}$,
    de manera similar a $S_{D1}$.

  \item En tercer lloc es concatenen les sèries temporals per ordre de
    $\delta$: $\delta_2<\delta_1$. Així, $S'= S_{D2} || S_{D1}$.

  \end{enumerate}
  


\begin{figure}[tp]
  \centering
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S$} \\ \hline
    $t$  & $v$ \\ \hline
    1  & 0 \\
    3  & 1 \\
    6  & 0 \\
    10  & 1 \\ \hline
  \end{tabular} \qquad
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S_{D1}$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & 1 \\
    10  & 1 \\ \hline
  \end{tabular} \qquad
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S_{D2}$} \\ \hline
    $t$  & $v$ \\ \hline
    6  & 0 \\
    8  & 0 \\
    10  & 1 \\ \hline
  \end{tabular} \qquad
  \begin{tabular}[c]{|c|c|}
    \multicolumn{2}{c}{$S'$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & 1 \\
    6  & 0 \\
    8  & 0 \\
    10  & 1 \\ \hline
  \end{tabular}
  \caption{Taules de les sèries temporals per l'operació de plec de  \glssymbol{not:sgstm:serietotal}}
  \label{fig:multiresolucio:multiresolucio}
\end{figure}
 


\end{example}








\subsection{Demostració}

Cal demostrar l'equivalència formalment\todo{}





\section{Sistemes duals SGST+SGSTM}

Una sèrie temporal es pot emmagatzemar i gestionar en un \gls{SGST} o
en un \gls{SGSTM}. També es pot plantejar un sistema dual de
multiresolució on una sèrie temporal es tracti alhora en un \gls{SGST}
i en un \gls{SGSTM}.

Les equivalències entre els \gls{SGSTM} i les funcions de
multiresolució aplicades a un \gls{SGST} permeten dissenyar sistemes
duals que tinguin propietats complementàries.  Així, aquests sistemes
duals ofereixen altres utilitats a la multiresolució més enllà de
l'orientació de compressió amb pèrdua mostrada a la secció??\todo{ref
  model sgstm}. A continuació:
\begin{itemize}
\item Dissenyem l'estructura d'aquests sistemes duals
\item Avaluem conceptes relacionats en l'àmbit genèric dels \gls{SGBD}
\item Mostrem les aplicacions que permeten
\end{itemize}




\subsection{Estructura}

Un sistema dual de multiresolució està format per un \gls{SGST} i un
\gls{SGSTM} on s'emmagatzemen les mateixes sèries temporals. A
cadascun s'hi pot fer les consultes pertinents de cada model per a les
sèries temporal. A més, s'obté el mateix resultat en els dos sistemes
per a les consultes que segueixin les restriccions de la funció de
multiresolució.


A la \autoref{fig:multiresolucio:dual} es mostra l'estructura d'un
sistema dual de multiresolució. L'usuari percep aquest sistema com un
\gls{SGST} on emmagatzema una sèrie temporal $S$ i hi gestiona les
consultes, on algunes d'aquestes consultes són de multiresolució o
treballen sobre sèries temporals $S'$ que provenen de la
multiresolució.  Internament hi ha un \gls{SGST} i un \gls{SGSTM} que
comparteixen l'entrada de mesures de la sèrie temporal. Així, quan
l'usuari so\l.licita la multiresolució $S'$, el sistema dual tant pot
calcular-la a partir del \gls{SGST} amb l'operació de
$\glssymbol{not:sgstm:multiresolucio}(S)$ com a partir del \gls{SGSTM}
amb l'operació de $\glssymbol{not:sgstm:serietotal}(M)$.  La mateixa
estructura també pot servir per al cas de les operacions de
$\glssymbol{not:sgstm:dmap}$ i les de
$\glssymbol{not:sgstm:seriedisc}$.


\begin{figure}
  \centering
  \input{imatges/sgst-m-dual.tex}
  \caption{Sistema dual de multiresolució: \gls{SGST}+\gls{SGSTM}}
  \label{fig:multiresolucio:dual}
\end{figure}


Cal comentar que el model de \gls{SGSTM} està dissenyat en base al
model de \gls{SGST} i per tant aquests primers sempre depenen dels
segons. No obstant això, cal no confondre aquesta dependència amb el
sistema dual, el qual gestiona una mateixa sèrie temporal independentment
en un \gls{SGSTM} i en un \gls{SGST}.




Tot i que per al sistema dual és equivalent calcular la sèrie temporal
resultant a partir del \gls{SGST} o del \gls{SGSTM}, no pot seguir el
mateix procediment en cada cas. Per una banda, la
$\glssymbol{not:sgstm:multiresolucio}(S)$ és una operació computada en
temps diferit; cada cop que s'afegeix una nova mesura cal tornar a
calcular tot el resultat. Per altra banda, la
$\glssymbol{not:sgstm:serietotal}(M)$ és una operació computada en
línia; és a dir seguint el flux d'adicions de les mesures.


El sistema dual dissenyat funciona a partir de l'adició de mesures, de
la mateixa manera que els \gls{SGSTM}. L'ordre d'arribada d'aquestes
mesures és crític en el sistema dual ja que un cop el \gls{SGSTM} s'ha
consolidat les dades més antigues que arribin no seran tingudes en
compte i per tant l'equivalència entre les consultes de \gls{SGST} i
\gls{SGSTM} ja no serà certa. Així doncs, si es vol mantenir
l'equivalència, el sistema dual dissenyat té aquestes dues
restriccions: només permet operacions d'adició i l'ordre d'adició és
important.  Més endavant a les aplicacions descriurem l'abast
d'aquestes restriccions.







\subsection{Conceptes relacionats}


\textcite{marz13:nosql13, marz14:bigdata} generalitzen un concepte
similar al de \gls{SGST} dual, ho emmarquen en l'àmbit dels \gls{SGBD}
per a \emph{Big Data}.  Proposen \gls{SGBD} dissenyats amb tres
nivells, que anomenen arquitectura \emph{Lambda}:
\begin{itemize}
\item Nivell \emph{batch}: Emmagatzema totes les dades originals i
  permet realitzar qualsevol consulta sobre aquestes dades. Preveu que
  algunes consultes operen sobre dades consultades prèviament, per
  tant en aquest nivell es gestionen també aquestes consultes
  precomputades, les quals a més es poden obtenir amb computació
  para\l.lela com per exemple amb Hadoop. Particularment, es considera
  que les dades originals són immutables, és a dir que les bases de
  dades només permeten afegir però no modificar.

\item Nivell \emph{server}: Emmagatzema les consultes precomputades i
  n'ofereix les dades per a altres consultes. Les consultes
  precomputades s'han de tornar a calcular periòdicament i en el
  nivell \emph{server} sempre hi ha la versió calculada més
  recent. Per tant, es preveu que les consultes precomputades no
  ofereixen la informació actualitzada al moment, sinó que hi ha un
  cert temps des que es modifiquen les dades originals fins que té
  impacte en les consultes.

\item Nivell \emph{speed}: Precomputa les mateixes consultes que el
  nivell \emph{batch} però incrementalment, és a dir cada cop que
  s'afegeix una dada nova les dades de la consulta \emph{speed}
  s'actualitzen adequadament.  Aquest nivell només s'usa per a dades
  recents per tal complementar el problema de les dades
  desactualitzades en els nivells \emph{batch} i \emph{server}.
\end{itemize}


Les consultes precomputades d'aquests sistemes semblen una bona
solució per a la computació de les vistes dels \gls{SGBDR}.  Una vista
és un àlies per a una expressió relacional, és a dir una consulta, que
s'utilitza en altres consultes. Per tant, una vista $v$ és una
operació $\text{op1}$ sobre unes $\text{dades}$,
$v:=\text{op1}(\text{dades})$, i s'utilitza una altra consulta
$\text{op2}(v)$ de manera que és equivalent a executar la consulta
$\text{op2}(\text{op1}(\text{dades}))$. Així doncs, el model de vistes
és similar a les consultes que es basen en altres consultes proposat
per \citeauthor{marz14:bigdata} o a les sèries temporals precomputades
que proposem.


En el model relacional \cite[cap.~10. Views]{date04:introduction8} es
considera, conceptualment, que les vistes no s'avaluen quan es
defineixen sinó cada cop que s'executa una consulta que hi opera.  En
les implementacions les vistes poden ser precomputades, aleshores
s'anomenen \emph{snapshots} o \emph{materialized views}, per tal
d'aconseguir un emmagatzematge temporal dels mateixos càlculs per a
diverses consultes. En el context de sistemes de suport a les
decisions, la precomputació també es preveu en el càlcul de taules
resum per a agregacions de les dades \cite[cap.~22. Decision
support]{date04:introduction8}.  Això no obstant, la precomputació de
vistes no sempre comporta una millor eficiència; el concepte de vista
del model permet la substitució algebraica i per tant permet
l'optimització global de la consulta i l'operació continguda a la
vista.


Les vistes precomputades tenen associada una acció per actualitzar de
nou el seu valor, és a dir per a recalcular la consulta que contenen
quan les dades originals han canviat. En usar vistes precomputades cal
preveure el termini de validesa dels càlculs precomputats, com ocorre
en el nivell \emph{server} de l'arquitectura \emph{Lambda}. Així
doncs, les vistes precomputades es poden actualitzar de vàries
maneres:
\begin{itemize}

\item L'usuari decideix manualment quan s'han de tornar a computar. Per
  exemple, per a treballar durant un cert temps amb còpies immutables
  de les dades (\emph{snapshots}) sense haver de blocar la modificació
  de la base de dades \cite[\S{}10.5]{date04:introduction8}.

\item Es computen associades a un temps de termini a partir del qual
  si es tornen a utilitzar s'hauran de tornar a computar. \todo{}

\item Es computen periòdicament, com també es proposa en el nivell
  \emph{batch} de l'arquitectura \emph{Lambda}.

\item Es computen cada cop que es modifiquen les dades amb les quals
  operen, és a dir quan les dades originals reben una operació
  d'afegir, de modificar o d'actualitzar es torna a computar tota la
  vista.

\item Quan es modifiquen les dades, s'aplica la mateixa operació a la
  vista precomputada. És a dir, quan es modifiquen les dades originals
  amb una operació, $\text{mod}(\text{dades})$, es trasllada aquesta
  operació a la vista, $\text{mod}'(\text{dades})$, on cal determinar
  la relació entre $\text{mod}$ i $\text{mod}'$.  Aquesta translació
  és més senzilla quan només hi ha possibilitat d'operacions d'afegir
  noves dades però no de modificar-les: és el
  que es proposa en el nivell \emph{speed} de l'arquitectura
  \emph{Lambda} i el que admet el model de \gls{SGSTM} que
  proposem. \todo{s'ha d'estudiar la relació d'això amb els data stream}
% When data comes as an ordered sequence of instances it is called
% data stream, then specific \acro{DBMS} are designed to manage data
% stream data \cite{stonebraker05:sigmod}.  \acro{MTSMS} can take
% advantage of data stream orientation in order to simplify the
% consolidation process.  Assuming a time order acquisition of time
% series, the update of a \acro{MTSMS} only consists in the addition of
% new measures and the incremental consolidation of subseries. 
\end{itemize}



En resum, la sèrie temporal resultant dels sistemes duals pot ser
considerada com una vista calculada sobre les sèries temporals
originals. Aquesta vista pot ser precomputada, cosa que es pot fer de
diverses maneres: la funció de multiresolució l'ha de computar
totalment cada cop que s'afegeix una nova mesura i en canvi els
\gls{SGSTM} la computen incrementalment.  Aleshores aquestes vistes es
poden usar per a altres consultes que tinguin com a context
l'aproximació de multiresolució realitzada, o per a visualitzacions
gràfiques com les que ofereix RRDtool \cite{rrdtool}.




\subsection{Aplicacions}


Les sèries temporals són dades que s'adquireixen contínuament i per
tant cada cop és més gran el volum de dades que s'han d'emmagatzemar i
tractar. Aquest gran volum de dades és un problema per a operar amb
les sèries temporals i és un problema en els sistemes que tenen
l'emmagatzematge limitat. En aquest sentit, originalment hem
plantejat el model de \gls{SGSTM} per tal d'oferir una solució
d'emmagatzematge que comprimeix la informació seleccionant-ne una
multiresolució determinada.


Així, un \gls{SGSTM} implica un selecció d'informació i la informació
que no es considera importat és descartada. Aquests sistemes, per
tant, no són adequats quan totes les dades monitorades han de ser
emmagatzemades tal com s'adquireixen. Un cas d'aquests és quan no es
coneixen quines funcions d'agregació són les més escaients per a les
dades futures que s'adquiriran. Un altre cas és quan volem resoldre
consultes detallades sobre les dades, com per exemple: a quina hora
exacta ha ocorregut un esdeveniment.


Els sistemes duals de multiresolució ofereixen una solució per
emmagatzemar totes les dades però mantenint-ne una gestió de
multiresolució.  En el sistema dual, s'ha d'entendre el \gls{SGST} com
un emmagatzematge a llarg termini que no és consultat freqüentment;
així pot estar implementat com a \gls{SGBD} per a dades de gran volum
i basat en tècniques de compressió sense pèrdua, encara que tinguin
temps grans de descompressió. El \gls{SGSTM} s'ha d'entendre com un
emmagatzematge de compressió amb pèrdua que conté multiresolucions
precomputades de la sèries temporal.  El temps de còmput no és tant
crític en els \gls{SGSTM} perquè es reparteix al llarg del temps, és a
dir tal com es van adquirint les dades; més enllà del temps de còmput
de cada funció d'agregació d'atributs, el qual limita la quantitat de
multiresolucions diferents que pot gestionar un mateix \gls{SGSTM}.


En la compressió de dades multimèdia s'utilitza una tècnica de gestió
similar.  Les dades s'emmagatzemen inicialment amb compressió sense
pèrdua, a partir d'aquestes es generen dades amb compressió amb pèrdua
que ocupen menys i són més àgils per a treballar. En el cas que calgui
modificar les dades, es canvien les comprimides sense pèrdua i es
regeneren de nou comprimides amb pèrdua. Amb aquesta gestió s'evita el
problema que les compressions amb pèrdua acumulin pèrdua entre
successives modificacions.  \todo{citació?}



En resum, les aplicacions del sistema dual de multiresolució són les
següents:
\begin{itemize}
\item Sistemes on els \gls{SGSTM} precomputen en flux vistes que són
  consultes de multiresolució. És a dir, funcionen com a precomputació
  de consultes que es preveuen que es faran; per tant al llarg del
  temps es creen i eliminen vistes segons les necessitats que es
  preveuen. Aleshores els \gls{SGST} funcionen com a emmagatzematge a
  llarg termini que es consulta rarament.


\item Les dades emmagatzemades en els \gls{SGST} s'utilitzen per al
  farciment inicial dels \gls{SGSTM} gràcies a la funció de
  multiresolució que permet computar les sèries temporals dels discs a
  partir de l'operació \glssymbol{not:sgstm:dmap}. Pot tenir diversos
  objectius:
  \begin{itemize}
  \item Quan es creen les vistes precomputades anteriors, inicialment
    el \gls{SGSTM} contindrà sèries temporals amb valors desconeguts;
    amb la funció de multiresolució es poden inicialitzar amb els
    valors correctes.

  \item Es pot usar per a canviar l'esquema de multiresolució dels
    \gls{SGSTM}. En alguns canvis d'esquema, per exemple ampliar un
    disc, inicialment hi ha dades desconegudes però que es poden
    computar amb la funció de multiresolució.

  \item Es pot usar per a canviar d'un emmagatzematge de sèries
    temporals en \gls{SGST} a un emmagatzematge en \gls{SGSTM}. Cal
    notar que és un canvi irreversible perquè l'emmagatzematge en els
    \gls{SGSTM} és amb pèrdua.
  \end{itemize}

\item Es poden usar els \gls{SGST} per a experimentar amb diversos
  esquemes de multiresolució per a les dades adquirides i així
  observar-ne la idoneïtat i escollir-ne un de millor.

\item En el cas que no es compleixi la restricció d'ordre d'arribada
  de les mesures per a l'equivalència entre els \gls{SGST} i els
  \gls{SGSTM}, es podria refer la informació emmagatzemada en els
  \gls{SGSTM} a partir dels \gls{SGST}.

\end{itemize}


Com a contrapartida, però, en els sistemes duals apareix un \gls{SGST}
amb una gran quantitat de dades. Per tant, cal tenir en compte que si
la informació computada pels \gls{SGSTM} és suficient per a les
consultes que s'han de realitzar, aleshores la informació
emmagatzemada en els \gls{SGST} és redundant. Això no obstant, no és
senzill identificar i predir quan la informació emmagatzemada en el
\gls{SGSTM} serà totalment suficient.
\todo{a la secció de la
  teoria de la informació descriurem el problema d'identificar la
  informació que seleccionem i la que perdem i per tant podríem predir
  quan la tenim redundant?? }



Així, encara que l'objectiu final sigui l'emmagatzematge de les sèries
temporals comprimides amb pèrdua en un \gls{SGSTM}, és a dir el model
proposat originalment, els sistemes duals de multiresolució es poden
utilitzar mentre hi hagi dubtes sobre quin esquema de multiresolució
escollir i un eliminar-los un cop es consideri que l'esquema és
correcte. Aleshores, l'estructura de sistema dual serveix per a
observar clarament que els \gls{SGSTM} ofereixen una sèrie temporal
$S'$ que és una aproximació a una certa informació que hi ha en
l'original $S$ i que, per tant, permeten resoldre consultes
aproximades.






\section{Teoria de la informació}

\todo{}








% \section{Stream orientation}

% \todo{}
% * Dues variacions possibles interessants pels MTSMS:

 
%   - Buffers com a streams, sempre de mida fitada 
%   - Discos enllaçats





%%% Local Variables:
%%% TeX-master: "main"
%%% End:






%  LocalWords:  multiresolució multiresolucions
