
\chapter{Model de dades}

Dos models estructurals:

* Hi ha un model pels TSMS que inclou mesura i sèries temporals.

* Hi ha un model pels MTSMS que té buffer, discs i mtsdb, els quals inclouen el model de sèrie temporal del TSMS.


\section{Model de dades SGST}

Una sèrie temporal és una relació de temps i valors. A cada parella temps-valor l'anomenem mesura. Així doncs, una sèrie temporal és un conjunt de mesures.

Una mesura és un tuple temps-valor:





\subsection{Temps}

Utilitzem el temps com un valor que ens permet ordenar les mesures.  
A tal efecte, el conjunt de temps es defineix com un conjunt compactificat (tancat) i amb ordre total. No obstant, pot ser tant un conjunt finit com infinit. 

Per facilitar la comprensió, en el document utilitzarem el conjunt de reals com a conjunt pels temps. Concretament, per a complir que sigui un conjunt tancat usarem el conjunt estès de nombres reals $\bar{\mathbb{R}} \in \mathbb{R} \cup \{+\infty,-\infty\}$, \parencite{wiki:extendedreal,cantrell:extendedreal}, també anomenat recta real acabada. 


El conjunt estès de nombres reals té dos punts límits corresponents al valor impropi infinit, aleshores en notació d'interval el conjunt es pot escriure com $\bar{\mathbb{R}} \in [-\infty,+\infty]$.  Més endavant a la definició~\ref{def:model:mesura_indefinida} es detallen algunes propietats induïdes a les mesures com a resultat d'aquesta extensió.

Les relacions d'ordre i algunes operacions aritmètiques s'estenen al
conjunt $\bar{\mathbb{R}}$, \cite{cantrell:extendedreal}.  Algunes
expressions esdevenen indefinides (p.ex.\ $0/0$) i altres depenen del
context, com és el cas de l'expressió indeterminada $0 \times \infty$ que
per exemple en la teoria de la mesura habitualment es defineix com $0 \times
\infty = 0$, \cite{wiki:extendedreal}.


El conjunt dels reals és un espai mètric ja que té definida una funció distància (o mètrica), com per exemple la distància euclidiana. Com a conseqüència, ens permet distingir entre instants de temps (els elements del conjunt) i durades (la mètrica). Observant els instants de temps com a punts en la recta real i les durades com a segments en la recta real, es pot definir el temps com a sistema de coordenades especificant un instant com a marc de referència, \parencite{iep:time-supplement,wiki:coordinate}. 


\begin{definition}[Temps]
  \label{def:model:temps}
  Siguin $t^i_i$ i $t^i_j$ dos instants de temps, observem la quantitat
  de temps o la durada $t^d$ com un valor $t^d \in\bar{\mathbb{R}}$
  que mesura la distància en unitats de temps entre dos temps
  absoluts $t^d = t^i_i - t^i_j$.
  
  Sigui $t^d$ una durada i $t^{R}$ un temps absolut de referència,
  observem un instant de temps $t^i$ com un valor $t^i
  \in\bar{\mathbb{R}}$ que mesura la quantitat de temps respecte al
  temps de referència $t^i= t^{R} + t^d$ . Aquest valor de referència
  $t^{R}\in\mathbb{R}$ és també un instant de temps però que permet
  definir unívocament la posició de qualsevol altre instant de temps.


\end{definition}

En resum, els instants de temps es poden veure com una seqüència de valors reals que indiquen esdeveniments amb ordre clarament definit i entre dos instants de temps sempre hi ha una durada. Tant els instants de temps com les durades s'expressen amb un real que té unitats de temps, les quals són 'segons' en sistema internacional. 



\subsubsection{Calendari}
\textcite{dreyer94} situen els calendaris i les seves operacions com a essencials en els SGST. Tanmateix, no creiem que sigui necessari modelar les dates de calendari en el model de temps. El temps és la línia contínua de temps, el calendari són nom especials a certs punts de la línia de temps. Només cal una eina que sigui capaç de convertir de noms a instants de temps. 

Per una banda, no afecta al model SGST que els calendaris siguin més o menys complicats, en aquest cas només es veuen complicades les funcions de conversió de temps a calendari i viceversa.
Per altra banda, tampoc afecta que els calendaris siguin ambigus (p.ex.\ dos noms per al mateix instant o instants sense nom) o que continguin propietats impredictibles (p.ex.\ cas dels segons addicionals en UTC) ja que la solució a aquests problemes correspon a la bona definició dels sistemes de calendari.


\subsection{Valor}


* El valor és qualsevol objecte, fins i tot una altra relació, el qual té el seu model de dades i les seves operacions. El model de dades ha d'incloure una dada que defineixi el valor indefinit. Per exemple el conjunt dels reals estesos amb l'infinit que defineix el valor indefinit: $\mathbb{R} \cup \{\infty\}$. 


Els valors poden ser atomics (escalars com enter o strings) o bé estructures de dades (com vectors o llistes).


En la definició~\ref{def:model:mesura}, el valor d'una mesura és un
escalar. Això no obstant, és fàcil estendre el concepte a mesures
multivaluades, que representen una co\l.lecció de valors
mesurats en el mateix instant de temps, tal i com es fa per exemple a
A\ss falg, \cite{assfalg08:thesis}.

\begin{definition}[Mesura multivaluada]
  Definim \emph{mesura} com el tuple $(v,t)$, en el que
  $v\in\bar{\mathbb{R}}^n$ és el valor de la mesura i $t \in
  \mathbb{R}$ és l'instant de temps en que s'ha pres aquesta mesura.
\end{definition}



\subsection{Mesura}\label{sec:model:mesura} 


\begin{definition}[Mesura]
  \label{def:model:mesura}
  Definim \emph{mesura} com el tuple $(t,v)$, en el que $v$ és el
  valor de la mesura i $t$ és l'instant de temps en que s'ha pres
  aquesta mesura.
\end{definition}


Donada una mesura $m=(t,v)$ escriurem $V(m)$ per referir-nos a $v$ i
$T(m)$ per referir-nos a $t$.

Donades dues mesures és fàcil establir la relació d'ordre induïda pel
temps.

\begin{definition}
  \label{def:model:mesura-relacio-ordre}
  Sigui $m=(t_m,v_m)$ i $n=(t_n,v_n)$. Direm que $m\geq n$ si i solament
  si $t_m\geq t_n$.
\end{definition}


\todo{repassar coherència amb apartats anteriors}
En la definició~\ref{def:model:mesura} de mesura i la
definició~\ref{def:model:temps} de temps s'ha utilitzat el conjunt estès de
nombres reals $\bar{\mathbb{R}} \in \mathbb{R} \cup
\{+\infty,-\infty\}$, el qual a vegades també es denota en notació
d'interval com $\bar{\mathbb{R}} \in [-\infty,+\infty]$,
\cite{cantrell:extendedreal}. Aquesta extensió amb l'element impropi
infinit ($\infty$) dóna com a resultat unes mesures impròpies que
anomenarem mesura de valor indefinit i mesura indefinida.

\begin{definition}[Mesura de valor indefinit]
  Definim \emph{mesura de valor indefinit} com el tuple $(t,v)$, en el
  que el valor és $v=\infty$ i l'instant de temps és
  $t\in\bar{\mathbb{R}}$.
\end{definition}

\begin{definition}[Mesura indefinida]
  \label{def:model:mesura_indefinida}
  Definim \emph{mesura indefinida} com el tuple $(t,v)$, en el que el
  valor és $v\in\bar{\mathbb{R}}$ i l'instant de temps és
  $t\in\{+\infty,-\infty\}$.
\end{definition}

Així doncs, sigui $m$ una mesura, es podrà notar la mesura de valor indefinit com  $m=(t,\infty)$ i les mesures indefinides com $m=(+\infty,v)$ per la positiva  i $m=(-\infty,v)$ per la negativa, les quals normalment s'anotaran també amb valor indefinit: $m=(+\infty,\infty)$ i $m=(-\infty,\infty,)$ respectivament.


Les mesures de valor indefinit es podran utilitzar en aquells casos en els que el valor de la mesura és desconegut. Els valors desconeguts  són aquells valors que no existeixen (es desconeixen, \emph{missing data} ) o que s'ignoren (es descarten, \emph{censoring} o \emph{truncation}). Els valors que no existeixen prenen el valor desconegut en el moment de la mesura, en canvi els valors descartats són marcats com a desconeguts després d'un processament de les dades. 

Nota: en alguns sistemes es distingeix entre valors infinits ($\infty$) i valors indefinits (NaN,\emph{not a number}), \cite{wiki:ieee754}. Aquest no és el cas de les definicions de mesures indefinides presents.



\subsection{Sèrie temporal}
\label{sec:model:serietemporal}

Les sèries temporals són seqüències de mesures ordenades en el temps. 
Tradicionalment s'anomenen sèries temporals tot i que també s'anomenen seqüències temporals, per exemple al capítol 2 de Last,~\cite{last}.


\begin{definition}[Sèrie temporal]
  \label{def:serie_temporal}
  Una sèrie temporal $S$ és un conjunt de mesures
  $S=\{m_0,\ldots,m_k\}$ sense temps repetits
  $\forall i,j: i\leq k, j\leq k, i\neq j : T(m_i)\neq T(m_j)$.
\end{definition}

Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal, definim el nombre de
mesures que conté la sèrie temporal com el cardinal del conjunt
$|S|$. Una sèrie temporal sense mesures és la sèrie temporal buida $S=
\emptyset$, és a dir que no té cap element $|S|=0$.

La relació definida a~\ref{def:model:mesura-relacio-ordre} indueix
sobre una sèrie temporal una relació d'ordre total. Com que la sèrie
temporal s'ha considerat finita, quan la sèrie temporal no és
buida això comporta l'existència d'un màxim i d'un mínim.  Si $S$ és
una sèrie temporal, $\max(S)$ i $\min(S)$ són respectivament la mesura
màxima i mínima d'$S$.

\begin{definition}
  Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal i $n\in S$ una
  mesura.  Direm que $n=\max(S)$ és el màxim de la sèrie temporal si
  $\forall m \in S: n \geq m $.  Direm que $n=\min(S)$ és el mínim de
  la sèrie temporal si $\forall m \in S: n \leq m$.
\end{definition}

El $\max(S)$ i el $\min(S)$ no estan definits quan la sèrie temporal
és buida $S= \emptyset$. En
canvi, el suprem i l'ínfim estan definits per qualsevol
sèrie temporal tal com passa amb el conjunt estès de nombres reals,
\cite{cantrell:extendedreal}.  

\begin{definition}
  Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal i $n\in S$ una
  mesura.  Direm que $n=\sup(S)$ és el suprem de la sèrie temporal si
  $n=\max(S)$ en cas que el màxim estigui definit o
  $n=(-\infty,\infty)$ en cas contrari.  Direm que $n=\inf(S)$ és
  l'ínfim de la sèrie temporal si $n=\min(S)$ en cas que el mínim
  estigui definit o $n=(+\infty,\infty)$ en cas contrari.
\end{definition}

Quan la sèrie temporal no és buida, per
ser un conjunt finit i d'ordre total, sempre hi ha un i només un màxim
i un mínim i per tant es corresponen amb el suprem i l'ínfim
respectivament.


Atesa la relació d'ordre induïda pel temps en una sèrie temporal és
possible definir el concepte d'interval sobre la seqüència, semblant a
com es fa als capítols 1 i 2 de Last, \cite{last}.

\begin{definition}
  Sigui $S=\{m_0, \ldots, m_k\}$ una sèrie temporal. Definirem la
  subsèrie $S(r,t] \subseteq S$ com la sèrie temporal $S(r,t]=\{m\in S
  | r<T(m)\leq t\}$, a on $r$ i $t$ són dos instants de temps.

  També es defineix la subsèrie $S[-\infty,t)\subseteq S$ com la sèrie
  temporal $S[-\infty,t) = \{m\in S | T(\inf(S))\leq T(m) < t\}$.
%$S(r,\infty) = \{m\in S | r<T(m)\leq T(\sup(S))\}$. 
\end{definition}
S'observa que la subsèrie $S(r,+\infty]\subseteq S$ és
equivalent a la sèrie temporal $S(r,+\infty] \equiv S(r,T(\sup(S))]$ i
anàlogament $S(-\infty,t] \equiv S(T(\inf(S)),t]$.  
 
Atesa la relació d'ordre induïda pel temps en una sèrie temporal es
defineix el concepte de mesura següent i mesura anterior en una
seqüència.

\begin{definition}
  Sigui $S=\{m_0, \ldots, m_k\}$ una sèrie temporal i $l\in S$ i $n$ dues
  mesures. Direm que $l$ és el successor de $n$ en $S$ i ho notarem
  com $l=\seg\limits_S(n)$ si i només si $l=\inf(S(T(n),+\infty])$.
  Direm que $l$ és el predecessor de $n$ en $S$ i ho notarem com
  $l=\ant\limits_S(n)$ si i només si $l=\sup(S[-\infty,T(n)))$.

Quan no hi hagi dubte de la sèrie temporal que marca l'ordre, per
exemple quan $n\in S$, podrem escriure $\seg(n)$ i $\ant(n)$.
\end{definition}
S'observa que s'obtenen mesures indefinides en els casos que la
mesura següent o anterior es calcula respectivament per la mesura
suprema o ínfima de la sèrie temporal: $\seg\limits_S(\sup
S)=(+\infty,\infty)$ i $\ant\limits_S(\inf S)=(-\infty,\infty)$.

De la definició anterior es dedueix que donada una sèrie temporal $S$
que no conté mesures indefinides i donada la mesura indefinida
$o=(+\infty,-\infty)$, el predecessor de $o$ sempre és el suprem de la
sèrie temporal $\ant\limits_S( (+\infty,\infty) ) = \sup(S): \forall
m\in S: T(m)\in\mathbb{R}$.  % S\equiv S(-\infty,+\infty)
\emph{Demostració: Sigui $S$ una sèrie temporal i $o=(+\infty,\infty)$
  una mesura indefinida, el predecessor de $o$ en $S$ és una mesura
  $l=\ant\limits_S(o)$ que compleix
  $l=\sup(S[-\infty,T(o)))$. Substituint, s'obté que
  $l=\sup(S[-\infty,+\infty))=\sup(S-m):m\in S:T(m)=+\infty \notin
  \mathbb{R}$, i per tant com que $S$ no té mesures indefinides es
  demostra que $l=\sup(S)$.  } De manera semblant es pot demostrar que
$\seg\limits_S( (-\infty,\infty) ) = \inf(S): \forall m\in S:
T(m)\in\mathbb{R}$.




\subsection{Base de dades sèrie temporal}

Una sèrie temporal és una relació de temps i valors. A cada parella temps-valor l'anomenem mesura. Així doncs, una sèrie temporal és un conjunt de mesures.

Una sèrie temporal és un conjunt de mesures, així doncs s'observa com una relació de grau 2\todo{consultar a Date} a on la capçalera conté els dominis temps i valor. Inclou algunes restriccions més que les relacions:

* Els temps no poden estar repetits

* Els valors han de contenir el mateix tipus d'objecte.

Els temps no repetits indueixen un ordre temporal a les sèries temporals. Tot i així, les relacions, per ser conjunts, conserven la no definció d'un ordre dels elements. 


\subsection{Exemples}

\paragraph{Exemple 1}
Sèrie temporal $S_1$ on el temps i els valors pertanyen a $\bar{\mathbb{R}}$. Conté la mesura de valor 1 en el temps 5, la mesura de valor 3 en el temps 7 i la mesura de valor 1 en el temps 10. Modelada com a relació, és a dir com a parella capçalera i conjunt de valors certs, s'escriu com 
$S_1 = ( \{temps,valor\}, \{ \{temps:5,valor:1\}, \{temps:7,valor:3\}, \{temps:10,valor:1\} \} )$.

Degut al format esquemàtic, simplifiquem l'escriptura de les sèries temporals com a conjunt de tuples $(t,v)$ a on $t$ és el temps i $v$ és el valor. Així doncs la sèrie temporal $S$ es pot escriure de manera simplificada com a 
$S = \{ (5,1), (7,3), (10,1) \}$.

Tal com s'utilitza en les relacions, les sèries temporals es poden visualitzar com a taules. La sèrie temporal $S_1$ es visualitza com a taula a la \autoref{fig:model:serietemporal:real}.

\begin{figure}[tp]
  \centering
  \begin{tabular}{|c|c|}
    \multicolumn{2}{c}{$S_1$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & 1 \\
    7  & 3 \\
    10 & 1 \\ \hline
  \end{tabular}
  \caption{Taula d'una sèrie temporal amb valors reals}
  \label{fig:model:serietemporal:real}
\end{figure}


\paragraph{Exemple 2}
Sèrie temporal $S_2$ on el temps pertany a $\bar{\mathbb{R}}$ i el valor pertany a  $\bar{\mathbb{R}}^3$; és a dir és un vector. Conté el valor (1,2,3) en el temps 5, el valor (3,4,5) en el temps 7 i el valor (1,2,3) en el temps 10.

De manera simplificada s'escriu com 
$S_2 = \{ (5,(1,2,3)), (7,(3,4,5)), (10,(1,2,3)) \}$ i es visualitza com a taula a la \autoref{fig:model:serietemporal:vector}. No obstant, es pot visualitzar de forma més còmode com a $S_2^b = \{ (5,1,2,3), (7,3,4,5), (10,1,2,3) \}$

\begin{figure}[tp]
  \centering
  \begin{tabular}{|c|c|}
    \multicolumn{2}{c}{$S_2$} \\ \hline
    $t$  & $v$ \\ \hline
    5  & (1,2,3) \\
    7  & (3,4,5) \\
    10 & (1,2,3) \\ \hline
  \end{tabular} \qquad
  \begin{tabular}[tp]{|c|c|c|c|}
   \multicolumn{4}{c}{$S_2^b$} \\ \hline
    $t$  & $v_1$ & $v_2$ & $v_3$ \\ \hline
    5  & 1 & 2 & 3 \\
    7  & 3 & 4 & 5 \\
    10 & 1 & 2 & 3 \\ \hline
  \end{tabular}

  \caption{Taula d'una sèrie temporal amb valors vectors}
  \label{fig:model:serietemporal:vector}
\end{figure}


\paragraph{Exemple 3}
Sèrie temporal $S_3$ on el temps pertany a $\bar{\mathbb{R}}$ i el valor és una sèrie temporal del mateix format que en l'exemple 1. Conté les tuples de $S_1$ com a valors en el temps 1 i 2. 

De manera simplificada s'escriu com
$S_3 =  \{ (1,\{ (5,1), (7,3), (10,1) \}), 
(2,\{ (5,1),$ $(7,3),$ $(10,1) \}) \}$
i es visualitza com a taula a la \autoref{fig:model:serietemporal:serietemporal}.


\begin{figure}[tp]
  \centering
  \begin{tabular}{|c|c|}
    \multicolumn{2}{c}{$S_3$} \\ \hline
    $t$  & $v$ \\ \hline
    1 &   
       \begin{tabular}{|c|c|}
         \hline
         $t$  & $v$ \\ \hline
         5  & 1 \\
         7  & 3 \\
         10 & 1 \\ \hline
       \end{tabular} \\ \hline
    2 & 
       \begin{tabular}{|c|c|}
         \hline
         $t$  & $v$ \\ \hline
         5  & 1 \\
         7  & 3 \\
         10 & 1 \\ \hline
       \end{tabular} \\ \hline
  \end{tabular}
  \caption{Taula d'una sèrie temporal amb valors sèrie temporal}
  \label{fig:model:serietemporal:serietemporal}
\end{figure}




\paragraph{Exemple 4} 
Sèrie temporal $S_4$ on el temps pertany a $\bar{\mathbb{R}}$ i el valor és una referència a una sèrie temporal. Conté $S_1$ com a valors en el temps 1 i 2. 

De manera simplificada s'escriu com
$S_4 =  \{ (1,S_1) , (2,S_1) \}$ 
i es visualitza com a taula a la \autoref{fig:model:serietemporal:relvar}.

S'aplica el concepte de \emph{relvar} dels SGBDR \parencite{date}.
Així doncs, cal notar que $S_4$  no és el mateix que $S_3$.
\begin{figure}[tp]
  \centering
  \begin{tabular}{|c|c|}
    \multicolumn{2}{c}{$S_4$} \\ \hline
    $t$  & $v$ \\ \hline
    1 & $S_1$ \\
    2 & $S_1$ \\ \hline
  \end{tabular}
  \caption{Taula d'una sèrie temporal amb valors \emph{relvar}}
  \label{fig:model:serietemporal:relvar}
\end{figure}





\subsection{Model de dades SGSTM}

Una MTSDB és una relació de buffers amb discs. 


\begin{figure}[tp]
\centering
\input{imatges/model/mtsms-arquitectura_interna.tex}
\caption{Arquitectura del model SGSTM}
\label{fig:model:bdstm}
\end{figure}


\subsection{Buffer}\label{sec:model:buffer}\todo{falta parlar de regularitat de ST}\todo{falta parlar de representació de ST}

Un buffer és un contenidor d'una sèrie temporal, regular o no regular, que mitjançant una funció permet regularitzar aquesta sèrie temporal amb un període de mostreig constant. A l'acció de regularitzar un interval d'una sèrie temporal l'anomenarem consolidació, al període de mostreig contant l'anomenarem pas de consolidació i a la funció de regularització l'anomenarem interpolador.

\begin{definition}[Buffer]
  Definim \emph{buffer} com el tuple $(S,\tau,\delta,f)$, en el que
  $S$ és una sèrie temporal, $\tau$ és el darrer instant de temps de
  consolidació, $\delta$ és la durada del pas de consolidació i $f$ és
  un interpolador.
\end{definition}

La consolidació d'una sèrie temporal s'inicia en un instant de temps concret i té lloc a cada pas de consolidació. Amb la finalitat d'establir els intervals de consolidació de la sèrie temporal, es defineix un buffer inicial.

\begin{definition}\label{def:model:buffer_buit}
  Definim buffer inicial o buffer buit com el buffer $B_{\emptyset} =
  (\emptyset,t_0, \delta_0, f)$, el qual
  conté una sèrie temporal buida, l'instant de temps inicial de
  consolidació, una durada que indica el pas de consolidació i un
  interpolador.
\end{definition}

A partir del buffer buit es poden conèixer tots els instants de temps de consolidació del buffer, els quals seran $t_0+k\delta, k\in\mathbb{N}$. 



\subsection{Disc}\label{sec:model:disc}

Un disc és un contenidor d'una sèrie temporal regular amb un nombre acotat de mesures. En arribar al nombre màxim de mesures permeses, cada cop que s'afegeix una mesura nova s'elimina la mesura mínima de la sèrie temporal.
Així doncs, un disc és semblant a una cua \emph{First In First Out} (FIFO), a on el primer d'arribar és el primer de sortir.  

\begin{definition}[Disc]
  Definim \emph{disc} com el tuple $(S,k)$, en el que $S$
  és una sèrie temporal i $k\in\mathbb{N}$ és el cardinal màxim de $S$.
\end{definition}

A l'inici, un disc no conté mesures però cal que estigui caracteritzat pel cardinal màxim. Amb aquesta finalitat es defineix un disc inicial.

\begin{definition}\label{def:model:disc_buit}
  Definim disc inicial o disc buit com el disc $D_{\emptyset} =
  (\emptyset,k)$, el qual conté una sèrie temporal buida i el cardinal
  màxim que podrà prendre $S$.
\end{definition}




\subsection{Disc resolució}\label{sec:model:disc_multiresolució}

Un disc resolució és un disc amb buffer. En el buffer hi ha la part d'una sèrie temporal a regularitzar i en el disc hi ha l'altra part ja regularitzada, amb un nombre acotat de mesures. 

\begin{definition}[Disc resolució]
  Definim \emph{disc resolució} com el tuple $(B,D)$, en el que $B$
  és un buffer i $D$ és un disc.
\end{definition}
 
La definició de buffer buit (def.~\ref{def:model:buffer_buit}) i de disc buit (def.~\ref{def:model:disc_buit}) indueixen a una definició de disc resolució buit. 

\begin{definition}\label{def:model:disc_resolucio_buit}
  Definim disc resolució buit com el disc resolució $R_{\emptyset}
  = (B_{\emptyset},D_{\emptyset})$, el qual conté un buffer buit i un
  disc buit.
\end{definition}




\subsection{Base de dades multiresolució}\label{sec:model:bdstm}

Una base de dades multiresolució és un conjunt de discs resolució que comparteixen l'entrada de mesures, les quals provenen d'una mateixa sèrie temporal. La sèrie temporal queda regularitzada i distribuïda  en els diferents discs resolució amb resolucions diferents, tal com s'ha vist a la \autoref{fig:model:bdstm}


\begin{definition}[Base de dades multiresolució]
  Definim \emph{base de dades multiresolució} com el conjunt de discs resolució
  $M=\{R_0,\dotsc,R_d\}$.
\end{definition}

A partir de la definició de disc resolució buit (def.~\ref{def:model:disc_resolucio_buit}) és defineix la base de dades multiresolució buida. 
 
\begin{definition}\label{def:model:bd_multiresolucio_buit}
  Definim base de dades multiresolució buida com el conjunt de discs
  resolució buits
  $M_{\emptyset}=\{R_{0_{\emptyset}},\dotsc,R_{d_{\emptyset}\}}$.
\end{definition}

Normalment, en una base de dades multiresolució no hi ha dos discs
resolució amb la mateixa informació. És a dir, donats dos discs
resolució $R_a = (B_a, D_a)$ i $R_b = (B_b, D_b)$, 
els seus respectius buffers 
$B_a=(S_a,\tau_a,\delta_a,f_a)$ i
$B_b=(S_b,\tau_b,\delta_b,f_b)$ no tenen el mateix interval de
consolidació i interpolador: 
$\delta_a \neq \delta_b \wedge f_a \neq f_b$.









\subsubsection{Exemples}

\paragraph{Exemple 1}

\begin{figure}[tp]
  \centering
  \begin{tabular}{|c|c|c|c|c|c|}
    \multicolumn{2}{c}{$M_1$} \\ \hline
    $S_B$  & $S_D$ & $\tau$ & $\delta$ & $k$ & $f$ \\ \hline
    $S_{B1}$ & $S_{D1}$ & 0 & 5  & 2 & mitjana  \\
    $S_{B2}$ & $S_{D2}$ & 0 & 10 & 4 & mitjana  \\ \hline
  \end{tabular}
  \caption{Taula d'una mtsdb independent}
  \label{fig:model:mtsdb:independent}
\end{figure}



\paragraph{Exemple 2}

\begin{figure}[tp]
  \centering
  \begin{tabular}{|c|c|c|c|c|c|}
    \multicolumn{2}{c}{$M_2$} \\ \hline
    $S_B$  & $S_D$ & $\tau$ & $\delta$ & $k$ & $f$ \\ \hline
    $S_{B1}$ & $S_{D1}$ & 0 & 5  & 2 & mitjana  \\
    $S_{D1}$ & $S_{D2}$ & 0 & 10 & 4 & mitjana  \\ \hline
  \end{tabular}
  \caption{Taula d'una mtsdb en cadena}
  \label{fig:model:mtsdb:cadena}
\end{figure}


%%% Local Variables:
%%% TeX-master: "main"
%%% End:





% LocalWords:  multiresolució buffer
