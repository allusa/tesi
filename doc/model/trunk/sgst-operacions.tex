\section{Model d'operacions}

Una sèrie temporal té un atribut de temps que ha de ser tingut en
compte pels operadors que la manipulin.  Així, atenent a aquest
atribut de temps, el comportament d'una sèrie temporal pot tenir
naturaleses diferents:
\begin{itemize}
\item Conjunt, és a dir els operadors només atenen a la forma
  estructural bàsica.
\item Seqüència, en la qual els operadors la tracten com a conjunts
  amb ordre.
\item Funció temporal, en la qual els operadors treballen tenint en
  compte que una sèrie temporal és la representació d'un funció
  contínua.
\end{itemize}


En el disseny del model d'operacions següent es distingeix el
comportament per als tres casos anteriors.  Es dissenyen les
operacions bàsiques que permeten que posteriorment es combinin per
elaborar-ne de més complexes.



\subsection{Bàsiques de conjunts}

En el model estructural de SGST hem definit les sèries temporals
utilitzant conjunts. En aquest apartat definim operadors per a les
sèries temporals recollint els operadors habituals que tenen els
conjunts.

El model relacional de SGBD defineix els seus operadors bàsics a
partir de l'àlgebra de
conjunts \parencite[cap.~6]{date:introduction}. En aquest apartat
apliquem el mateix estudi per al model de SGST. Tot i així de manera
simplificada, a les definicions no es descriuen les sèries temporals
com a relacions amb capçaleres sinó que s'escriuen només els conjunts
de valors. 





\subsubsection{Pertinença}


$ m \in S_1$


\subsubsection{Màxim i suprem}

La relació definida a~\ref{def:model:mesura-relacio-ordre} indueix
sobre una sèrie temporal una relació d'ordre total. Com que la sèrie
temporal s'ha considerat finita i sense elements repetits, quan la
sèrie temporal no és buida això comporta l'existència d'un màxim i
d'un mínim.  Si $S$ és una sèrie temporal, $\max(S)$ i $\min(S)$ són
respectivament la mesura màxima i mínima d'$S$.

\begin{definition}[Màxim i mínim]
  Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal i $n\in S$ una
  mesura.  Direm que $n=\max(S)$ és el màxim de la sèrie temporal si i
  només si $\forall m \in S: n \geq m $.  Direm que $n=\min(S)$ és el
  mínim de la sèrie temporal si i només si $\forall m \in S: n \leq
  m$.
\end{definition}

El $\max(S)$ i el $\min(S)$ no estan definits quan la sèrie temporal
és buida: $S= \emptyset$. En
canvi, el suprem i l'ínfim estan definits per qualsevol
sèrie temporal tal com passa amb el conjunt estès de nombres reals,
\cite{cantrell:extendedreal}.  

\begin{definition}[Suprem i ínfim]
  Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal i $n\in S$ una
  mesura.  Direm que $n=\sup(S)$ és el suprem de la sèrie temporal si
  $n=\max(S)$ en cas que el màxim estigui definit o
  $n=(-\infty,\infty)$ en cas contrari.  Direm que $n=\inf(S)$ és
  l'ínfim de la sèrie temporal si $n=\min(S)$ en cas que el mínim
  estigui definit o $n=(+\infty,\infty)$ en cas contrari.
\end{definition}

Quan la sèrie temporal no és buida, per
ser un conjunt finit i d'ordre total, sempre hi ha un i només un màxim
i un mínim i per tant es corresponen amb el suprem i l'ínfim
respectivament.




\subsubsection{Unió}

Per a poder unir dos conjunts relació, $A \cup B$, cal que tots dos
tinguin la mateixa estructura; és a dir, en termes de SGBDR cal que
$A$ i $B$ tinguin la mateixa capçalera.


Per tal que l'operació d'unió de conjunts sigui vàlida per les sèries
temporals cal tenir en compte quan dues sèries temporals tenen mesures
en el mateix instant de temps. En cas d'utilitzar l'operació d'unió de
conjunts la sèrie temporal resultant no compliria amb la definició
\ref{def:serie_temporal} ja que contindria mesures amb temps
repetits. Com a conseqüència, es defineix l'operació d'unió per les
sèries temporals.


En primer lloc, es defineix la unió exclusiva de dues sèries temporals.  La
unió exclusiva és la unió de dues sèries temporals sense tenir en
compte les mesures que tenen el mateix instant de temps.

\begin{definition}[unió exclusiva]
  Sigui $S_1=\{m_0^1, \dotsc, m_{k_1}^1\}$ i $S_2=\{m_0^2, \dotsc,
  m_{k_2}^2\}$ dues sèries temporals, la unió exclusiva de les dues
  sèries temporals $S_1 \text{unió}^x S_2$ és una sèrie temporal
  $S=\{m_0, \dotsc, m_k\}$ que conté les mesures no repetides de $S_1$
  i de $S_2$: $S_1 \text{unió}^x S_2 = \{ (t^1,v^1) \in S_1 | \forall
  (t^2,v^2)\in S_1 : t^2 \neq t^1 \} \cup \{ (t^2,v^2) \in S_2 |
  \forall (t^1,v^1)\in S_1 : t^1 \neq t^2 \}$.
\end{definition}

Propietats de la unió exclusiva de sèries temporals:
\begin{itemize}
\item Commutativa
\end{itemize}


En segon lloc, es defineix la unió de dues sèries temporals que escull
les mesures del primer operand en cas de mesures repetides.

\begin{definition}[unió]
  Sigui $S_1=\{m_0^1, \dotsc, m_{k_1}^1\}$ i $S_2=\{m_0^2, \dotsc,
  m_{k_2}^2\}$ dues sèries temporals, la unió de les dues sèries
  temporals $S_1 \text{unió} S_2$ és una sèrie temporal $S=\{m_0, \dotsc,
  m_k\}$ que conté totes les mesures de $S_1$ i les mesures de $S_2$
  no repetides: $S_1 \text{unió} S_2 = S_1 \cup (S_1 \text{unió}^x S_2)$. 

\end{definition}

Propietats de la unió:

\begin{itemize}
\item La dimensió $k$ de la sèrie temporal resultant està fitada a
  $k_1 \leq k \leq k_1 + k_2$. Nota: a la definició, la dimensió $k$ és
  proporcional al cardinal $|S_1\cup S_2| = k+1$.
\item La unió de sèries temporals no és commutativa. En general
  $S_1\cup S_2 \neq S_2\cup S_1$ tot i que sí que es compleix
  l'equivalència respecte al cardinal $|S_1\cup S_2| = |S_2\cup S_1|$.
\end{itemize}



\subsubsection{Intersecció}

Per tal que l'operació d'intersecció de conjunts sigui vàlida per les sèries
temporals cal tenir en compte quan dues sèries temporals tenen mesures
en el mateix instant de temps.

\begin{definition}[intersecció]
  Sigui $S_1=\{m_0^1, \dotsc, m_{k_1}^1\}$ i $S_2=\{m_0^2, \dotsc,
  m_{k_2}^2\}$ dues sèries temporals, la intersecció de les dues
  sèries temporals $S_1 \cap S_2$ és una sèrie temporal $S=\{m_0,
  \dotsc, m_k\}$ que conté les mesures de $S_1$ repetides a $S_2$:
  $S_1 \cap S_2 = \{ m^1 = (t^1,v^1) \in S_1 | \exists (t^2,v^2)\in
  S_2 : t^1 = t^2\}$.
\end{definition}


\subsubsection{Diferència}

A partir de la unió i la intersecció es pot definir la diferència.



\subsubsection{Projecció}


Es pot aplicar la projecció relacional.


\subsubsection{Selecció}


Es pot aplicar la selecció relacional.






\subsubsection{Producte i fusió}


Per a fer el producte de dos conjunts relació, $A \times B$, cal que
tots dos tinguin diferent capçalera. A diferència del producte de
conjunts, la relació resultant no és un conjunt de parells de tuples
sinó un conjunt de tuples. 


Definim el producte de dues sèries temporals, les qual en forma
canònica tinguin els mateixos atributs $t$ i $v$, com una sèrie
temporal amb atributs $t_1$, $v_1$, $t_2$ i $v_2$.
\begin{definition}[producte]
  Sigui $S_1=\{m_0^1, \dotsc, m_{k_1}^1\}$ i $S_2=\{m_0^2, \dotsc,
  m_{k_2}^2\}$ dues sèries temporals, el producte de les dues sèries
  temporals $S_1 \text{ producte } S_2$ és una sèrie temporal $S=\{m_0, \dotsc,
  m_k\}$ que conté la unió de totes les parelles de mesures de $S_1$ i
  $S_2$: $S_1 \text{ producte } S_2 = \{ (t_1,v_1,t_2,v_2) | (t_1,v_1) \in S_1
  \wedge (t_2,v_2) \in S_2 \}$
\end{definition}

Propietats del producte:
\begin{itemize}
\item No commutatiu
\item El cardinal resultant és $|S|=k_1k_2$
\item El grau resultant és $4$
\end{itemize}


Per a sèries temporals, el producte resulta en una sèrie temporals amb
dos atributs de temps. Per aquest fet l'anomenem sèrie temporal doble.



La fusió de dos conjunts relació, $A \text{ join } B$, es defineix com
una selecció sobre el producte $A \times B$. Per a les sèries
temporals, definim la fusió com la selecció dels temps iguals sobre la
sèrie temporal doble resultant del producte. El resultat de la fusió
és una sèrie temporal multivaluada.
\begin{definition}[fusió]
  Sigui $S_1=\{m_0^1, \dotsc, m_{k_1}^1\}$ i $S_2=\{m_0^2, \dotsc,
  m_{k_2}^2\}$ dues sèries temporals, la fusió de les dues sèries
  temporals $S_1 \text{ fusió } S_2$ és una sèrie temporal $S=\{m_0,
  \dotsc, m_k\}$ que selecciona del producte de $S_1$ amb $S_2$ les
  mesures dobles amb temps iguals: $S_1 \text{ fusió } S_2 = \{
  (t,v_1,v_2) | (t_1,v_1,t_2,v_2) \in \text{producte}(S_1,S_2),
  t=t_1=t_2 \}$.
\end{definition}


Propietats de la fusió:
\begin{itemize}
\item No commutativa si els atributs originals no tenen nom?
\item El cardinal resultant és $|S|\leq\min(k_1,k_2)$
\item El grau resultant és $2$ (en forma canònica).
\end{itemize}



\subsubsection{Reanomena}

Es pot aplicar el reanomena relacional. 






\subsubsection{Map i fold}


* map equivalent a extend

* fold equivalent a aggregate operator \todo{potser dir-li agregador}

* mapfold equivalent a un aggregate operator general, que retorna conjunts \todo{potser dir-li fold}

* En sèries temporals no té sentit el summarize perquè l'atribut temps no pot tenir valors repetits i per tant no se'n poden fer grups. Tot i així es pot aplicat summarizes per agrupar per valors: summarize S per S {v} add ...
però això ja no mapa a una sèrie temporal.


summarize, to (resumir; sintetitzar; sumaritzar)

Reduir un conjunt de dades per mitjà d'estadístics.



\begin{align*}
  \text{map}:& S \times f \longrightarrow S' = \{\forall m\in S : f(m) \}, \\
             & \text{a on } f: m \mapsto m' 
\end{align*}



Sigui $f$ una funció de dues mesures 
\[
f: m_i \times m \longrightarrow m' 
\]

\begin{align*}
  \text{fold}: & S=\{m_0,\dotsc,m_k\} \times m_i \times f \longrightarrow m'= \\
               =& f(\dots(f(f(f(m_i,m_0),m_1),m_2)\dots),m_k), \\
               & \text{a on } f: m_a \times m_b \mapsto m'
\end{align*}

Noteu que $\text{fold}(\{\},m_i,f) \mapsto m_i$ 

Més compactament descrit amb
\begin{align*}
  \text{fold}: & S=\{m_0,\dotsc,m_k\} \times m_i \times f \longrightarrow m'= \\
  & \begin{cases}
    m_i & \text{si} |S|=0, \\
    \text{fold}(S_1,f(m_i,m_1),f) & \text{altrament}
  \end{cases}:\\
  & m_1 \in S, S_1 = S - \{m_1\}
\end{align*}



Faltaria un OrderFold equivalent a l'OrderBy, sigui $o$ una funció que treu una mesura d'una sèrie temporal
\[
o: S \longrightarrow m'
\]


\begin{align*}
  \text{OrderFold}: & S=\{m_0,\dotsc,m_k\} \times m_i \times f \times o \longrightarrow m'= \\
  & \begin{cases}
    m_i & \text{si} |S|=0, \\
    \text{OrderFold}(S_1,f(m_i,m_1),f,o) & \text{altrament}
  \end{cases}:\\
  & m_1 = o(S), S_1 = S - \{m_1\}
\end{align*}

L'OrderFold és important quan la funció $f$ no és associativa ni
commutativa ja que llavors l'ordre dels càlculs importa.  De fet un
fold és un OrderFold amb $o=aleatori(S)$.



Podem fer una funció més general?


Sigui $f$ una funció de dues sèries temporals
\[
f: S_i \times S \longrightarrow S' 
\]

\begin{align*}
  \text{mapfoldaleatori}: & S \times S_i \times f \longrightarrow m'= \\
               =& f(\dots(f(f(f(S_i,S_0),S_1),S_2)\dots),S_k), \\
               & \text{a on } S_0 = \{m_0\}, \dotsc , S_k=\{m_k\} 
\end{align*}

i definint una funció $o$ per a l'ordre
\[
o: S \longrightarrow m' 
\]

\begin{align*}
  \text{mapfold}: & S \times S_i \times f \times o \longrightarrow S'= \\
  &= \begin{cases}
    S_i & \text{si} |S|=0, \\
    \text{OrderFold}(S_1,f(S_i,\{m_1\}),f,o) & \text{altrament}
  \end{cases}:\\
  & m_1 = o(S), S_1 = S - \{m_1\}
\end{align*}




Propietats d'operacions mapfold:\todo{comprovar}
\begin{itemize}
\item mapfold:$S \times \{\} \times f \mapsto \{\}$ 

\item mapfold:$\{\} \times S_i \times f \mapsto S_i$ 

\item mapfold:$S \times S_i \times
  \map([S_a\times S_b],(t^1,v^1,t^2,v^2)\mapsto(t^1,v^1)) \mapsto S_i$

\item mapfold:$S \times S_i \times \map([S_a\times
  S_b],(t^1,v^1,t^2,v^2)\mapsto(t^2,v^2)) \mapsto S'$ a on $|S'|=1$

\item Totes les fold es poden implementar com a mapfold$(S,\{m_i\},
  \{m_a \times m_b\} \mapsto \{m'\})$

\item Totes les map es poden implementar com a mapfold$(\{(0,0)\},S,
  \{m_a\} \times  \{\} \mapsto \{m'\})$.


\item La funció unió en la mapfold permet fer la identitat:  $S \equiv
  \text{mapfold}(S,\{\},(S_i,S_1) \mapsto S_i \cup S_1)$.

\item Les map es poden implementar com a fold? $\text{map}(S,f) \equiv
  \text{fold}(S,(0,0),f')$ a on $f': (t^i,v^i,t,v) \mapsto \{f(t,v)\} \cup S_i$. Sí, però les fold haurien de saber treballar amb S en comptes de m.

\end{itemize}



Exemple d'operacions map:
\begin{itemize}
\item $\text{igual}: S \mapsto S'$ a on $S'= \map(S,(t,v)\mapsto(t,v))$
\item $\text{intercanvia}: S \mapsto S'$ a on $S'= \map(S,(t,v)\mapsto(v,t))$
\item $\text{translació}: S \times \delta \mapsto S'$ a on $S'=
  \map(S,(t,v)\mapsto(t+\delta,v))$
\item $\text{pes}: S \mapsto S'$ a on $S'= \map(S,(t,v)\mapsto(t,t*v))$
\item $\text{tpredecessors}_{v1}: S \mapsto S'$ a on $S'= \map(S,(t,v)
  \mapsto (t,T(\ant_S(m)))$ \todo{ant no definit encara}
\item $\text{vpredecessors}: S \mapsto S'$ a on $S'= \map(S,(t,v)
  \mapsto (t,V(\ant_S(m)))$
\end{itemize}

Exemple d'operacions fold:
\begin{itemize}
\item $\text{cardinal}: S \mapsto m'$ a on $m'=
  \fold(S,(0,0),(t^1,v^1)\times(t^2,v^2)\mapsto(t^2,v^2+1)$
\item $\text{sumaV}: S \mapsto m'$ a on $m'=
  \fold(S,(0,0),(t^1,v^1)\times(t^2,v^2)\mapsto(t^1,v^1+v^2))$
\item $\text{sup}: S \times m \mapsto m'$ a on $m'=
  \fold(S,(-\infty,\infty),(t^1,v^1)\times(t^2,v^2)\mapsto [(t^1,v^1)
  \text{ if } t^2 < t^1 \text{ else } (t^2,v^2) ])$
\item $\text{antM}: S \times m \mapsto m'$ a on $m'=
  \fold(S,(-\infty,\infty),(t^1,v^1)\times(t^2,v^2)\mapsto [(t^1,v^1)
  \text{ if } t^2 < t^1 < T(m) \text{ else } (t^2,v^2) ])$
\end{itemize}


Exemple d'operacions mapfold:
\begin{itemize}
\item $\text{tpredecessors}_{v2}: S \mapsto S'$ a on $S'=
  mapfold(S,S^b,[S^1\times S^2]\mapsto f), S^b =
  \map(S,(t,v)\mapsto(t,-\infty)), f=\map([S^1\times
  S^2],(t^1,v^1,t^2,v^2)\mapsto (t^1,v^2) \text{ if } v^1<t^2<t^1
  \text{ else } (t^1,v^1))$
\end{itemize}


\subsection{Operadors de valors per dues sèries temporals}

Tal com es fa en els conjunts, per exemple A + B, com s'opera amb
l'atribut valor de dues sèries temporals.

A partir de map i la fusió es pot operar amb els valors de dues sèries
temporals.  Operadors en els valors entre dues sèries temporals que
tinguin el mateix vector de temps; és a dir regulars entre elles (v.\
def.~\ref{def:st:regular}). Si no tenen el mateix vector de temps,
s'ha d'aplicar operacions temporals. \todo{ref més endavant}

\[
valueop: S_1 \times S_2 \times \text{op} \longrightarrow S'
\]
\[
\text{a on } \{t^1|t^1\in S_1\} = \{t^2|t^2\in S_2\}, 
\]
\[
S' = \map(\text{fusio}(S_1,S_2),(t,v^1,v^2)\mapsto(t^1,v^1 \text{ op } v^2))
\]



Exemples:
\begin{itemize}
\item gradient: $S \mapsto S'$ a on $S'= \text{valueop}(S,vpredecessors(S),-)$
\end{itemize}




\subsection{Bàsiques de seqüències}






\subsubsection{Interval}

Atesa la relació d'ordre induïda pel temps en una sèrie temporal
(def.\ \ref{def:model:mesura-relacio-ordre}) és possible definir el
concepte d'interval sobre la seqüència, semblant a com es fa a
\cite{last:keogh,last:hetland}.

\todo{potser seria millor definir la notació d'interval general (a,b), [a,b), (a,b] i [a,b]? potser fins i tota amb dos punts com fan a last és més clar $S(a:b)$?}

\begin{definition}[Interval]
  \label{def:model:st-interval}
  Sigui $S=\{m_0, \ldots, m_k\}$ una sèrie temporal. Definirem el subconjunt
  $S(r,t] \subseteq S$ com la sèrie temporal $S(r,t]=\{m\in S
  | r<T(m)\leq t\}$, a on $r$ i $t$ són dos instants de temps.

  També es defineix la subsèrie $S[-\infty,t)\subseteq S$ com la sèrie
  temporal $S[-\infty,t) = \{m\in S | T(\inf(S))\leq T(m) < t\}$.
\end{definition}
S'observa que la subsèrie $S(r,+\infty]\subseteq S$ és
equivalent a la sèrie temporal $S(r,+\infty] \equiv S(r,T(\sup(S))]$ i
anàlogament $S(-\infty,t] \equiv S(T(\inf(S)),t]$. També s'observa que les subsèries $S(t,t]\subseteq S$ i $S[t,t)\subseteq S$ són equivalents a la sèrie temporal buida $S(t,t] \equiv S[t,t) \equiv \emptyset$ ja que per ser els temps d'ordre total $\nexists T(m): t < T(m) \leq t$ o $\nexists T(m): t \leq T(m) < t$, respectivament. 
%Finalment, s'observa que la subsèrie $S(-\infty,+\infty]\subseteq S$ només és equivalent a la sèrie temporal original quan aquesta no conté la mesura indefinida negativa $S(-\infty,+\infty]\equiv S: (-\infty,v)\notin S$




\subsubsection{Successor}


També atenent a la relació d'ordre induïda pel temps en una sèrie temporal, es
defineix el concepte de mesura següent i mesura anterior en una
seqüència.

\begin{definition}[Successor i predecessor]
  Sigui $S=\{m_0, \ldots, m_k\}$ una sèrie temporal i $l\in S$ i $n$ dues
  mesures. Direm que $l$ és el successor de $n$ en $S$ i ho notarem
  com $l=\seg\limits_S(n)$ si i només si $l=\inf(S(T(n),+\infty])$.
  Direm que $l$ és el predecessor de $n$ en $S$ i ho notarem com
  $l=\ant\limits_S(n)$ si i només si $l=\sup(S[-\infty,T(n)))$.

Quan no hi hagi dubte de la sèrie temporal que marca l'ordre, per
exemple quan $n\in S$, podrem escriure $\seg(n)$ i $\ant(n)$.
\end{definition}

S'observa que s'obtenen mesures indefinides en els casos que la
mesura següent o anterior es calcula respectivament per la mesura
suprema o ínfima de la sèrie temporal: $\seg\limits_S(\sup
S)=(+\infty,\infty)$ i $\ant\limits_S(\inf S)=(-\infty,\infty)$.

De la definició anterior es dedueix que donada una sèrie temporal $S$
que no conté mesures indefinides i donada la mesura indefinida
$o=(+\infty,\infty)$, el predecessor de $o$ sempre és el suprem de la
sèrie temporal $\ant\limits_S( (+\infty,\infty) ) = \sup(S): \forall
m\in S: T(m)\in\mathbb{R}$.  % S\equiv S(-\infty,+\infty)
\emph{Demostració: Sigui $S$ una sèrie temporal i $o=(+\infty,\infty)$
  una mesura indefinida, el predecessor de $o$ en $S$ és una mesura
  $l=\ant\limits_S(o)$ que compleix
  $l=\sup(S[-\infty,T(o)))$. Substituint, s'obté que
  $l=\sup(S[-\infty,+\infty))=\sup(S-m):m\in S:T(m)=+\infty \notin
  \mathbb{R}$, i per tant com que $S$ no té mesures indefinides es
  demostra que $l=\sup(S)$.  } De manera semblant es pot demostrar que
$\seg\limits_S( (-\infty,\infty) ) = \inf(S): \forall m\in S:
T(m)\in\mathbb{R}$.


\subsubsection{Concatenació}

A banda de les unions més tradicionals de conjunts, per les sèries
temporals també resulta interessant definir l'operació de concatenació
que s'aplica a les seqüències.

\begin{definition}[concatenació]
  Sigui $S_1=\{m_0^1, \dotsc, m_{k_1}^1\}$ i $S_2=\{m_0^2, \dotsc,
  m_{k_2}^2\}$ dues sèries temporals, la concatenació de les dues
  sèries temporals $S_1 || S_2$ és una sèrie temporal $S=\{m_0,
  \dotsc, m_k\}$ que conté totes les mesures de $S_1$ i les mesures de
  $S_2$ que no intersecten temporalment amb les de $S_1$: $S_1 ||
  S_2 =  S_1 \cup ( S_2 - S_2(T(\inf(S_1)),T(\sup(S_1))] )$.
\end{definition}

Propietats
\begin{itemize}
\item La concatenació no és commutativa
\end{itemize}




\subsection{Temporals}

Operacions a on el temps i la representació de la sèrie temporals
juguen un paper important.


\subsubsection{Pertinença temporal}

\begin{definition}[pertinença temporal]
  Sigui $S=\{m_0, \dotsc, m_{k}\}$ una sèrie temporal i $m=(t,v)$ una
  mesura, direm que la mesura pertany temporalment a la sèrie 
  $m\in^t S$ si i només si $\exists m_i=(t_i,v_i)\in S: t_i=t$.
\end{definition}





\subsubsection{Selecció temporal}

Sigui $S$ una sèrie temporal i $i=[t_0,t_f]$ un interval de temps,
per una banda s'ha definit l'interval sobre la seqüència d'una sèrie temporal $S(t_0,t_f]$ (def.~\ref{def:model:st-interval})  i per altra banda s'ha definit la representació contínua $r$ d'una sèrie temporal $S(t)$ \todo{referenciar la definició de repr}.
Per seleccionar un interval temporal cal tenir en compte tant l'interval sobre la seqüència com la representació contínua, Aquesta selecció temporal s'anota com selecció de $S$ en $i$ amb representació $r$ o bé $S[t_o,t_f]^r$. 

\begin{definition}[Selecció temporal de $S$ en $i$ amb representació
  $r$]
  \[
  \text{selecció}: \text{Sèrie temporal} \times \text{interval de
    temps} \times \text{representació} \longrightarrow \text{Sèrie
    temporal}
  \]
  \[
  S = \{m_0 , \ldots , m_k\}  \times i = [t_0,t_f] \times r \longrightarrow S'
  \]
  \[
  \forall  t \in i: S' = S(t)^r 
  \] 
\end{definition}

A continuació s'exemplifica utilitzant la representació \emph{zoh} enrere.


\begin{definition}[Selecció temporal de $S$ en $i$ amb representació
  \emph{zohe}]
  Sigui $S$ una sèrie temporal, $i=[t_0,t_f]$ un interval de temps i
  \emph{zohe} la representació $S(t)$ amb \emph{zero-order-hold} cap
  enrere, es defineix la subsèrie $S[t_0,t_f]^{\text{zohe}}\subseteq
  S$ com la sèrie temporal 
  \[
  S[t_0,t_f]^{\text{zohe}} = S(t_0,t_f] \cup \{m\} : m=(t_f,v):
  \]
  \[
  v=  V(\inf(S-S[-\infty,t_f)))
  \]

  %Atenció S(t_0,t_f] \cup \{m\} no és equivalent a  (S \cup \{m\})(t_0,t_f] ni sabent que m=(t_f,v); comprovar-ho pel cas t_0=t_f
  
  Nota: $S-S[-\infty,t_f)$ seria equivalent a l'interval tancat
  $S[t_f,+\infty]$ si aquest últim estigués definit.
\end{definition}

Propietats de la selecció temporal:

\begin{itemize}
\item Observeu que, sigui $t_a$ un instant de temps, la selecció de $S$ en $[t_a,t_a]$ és equivalent a la representació contínua $S(t_a)$. 
\end{itemize}







\subsubsection{Selecció de la resolució}

La selecció de la resolució d'una sèrie temporal permet canviar, en el
context d'una representació, la resolució a una de marcada per un
conjunt d'instants de temps. A diferència d'un buffer, la selecció de
resolució no permet aplicar interpoladors ni obliga a que la sèrie
temporal resultant sigui regular.

Sigui $S$ una sèrie temporal, $i= \{t_0,t_1,\dotsc,t_n\}$ un conjunt
d'instants de temps i la representació contínua $r$ de la sèrie
temporal $S(t)$, la selecció de resolució s'anota com resolució de $S$
en $i$ amb representació $r$ o bé $S[i]^r$.

\begin{definition}[Selecció de la resolució de $S$ en $i$ amb representació
  $r$]
  \[
  \text{resolució}: \text{Sèrie temporal} \times \text{instants de
    temps} \times \text{representació} \longrightarrow \text{Sèrie
    temporal}
  \]
  \[
  S = \{m_0 , \ldots , m_k\} \times i = \{t_0,t_1,\dotsc,t_n\} \times r
  \longrightarrow S'
  \]
  \[
  t_0 < t_1 < \dotsb < t_n:
  \]
  \[
  S' = S[t_0,t_0]^r \cup  S[t_1,t_1]^r \cup \dotsb \cup S[t_{n},t_n]^r
  \] 
  % Es podria fer recursiu
  % \[
  % t_f = \sup(i): i_n = i - t_f: t_a = \sup(i_n):
  % S' = \left\{\begin{array}{ll}
  %     \{\} & \text{si } |i| = 0 \\
  %     S[i_n]^r \cup S[t_a,t_f]^r 
  %   \end{array}\right.
  % \] 
\end{definition}



Propietats de la selecció de resolució:
\begin{itemize}

\item El cardinal de la sèrie temporal resultant és el mateix que el del conjunt d'instants de temps $|S[i]^r| = |i|$

\item  $S[i]^r: i = \{\tau+n\delta | n\in\mathbb{N}\}$ Selecció de la resolució de $S$ regular $\delta$ iniciada $\tau$  amb representació $r$.
\end{itemize}







\subsubsection{Unió temporal}

Unió temporal de dues sèries temporals $S_1 \cup^r S_2$. Per la unió temporal les sèries temporals han de tenir la mateixa estructura, tal com s'ha notat per a la unió de sèries temporals.

\begin{definition}[Unió temporal de $S_1$ i $S_2$ amb representació
  $r$]
  \[
  \text{unió}: \text{Sèrie temporal} \times \text{Sèrie temporal}
  \times \text{representació} \longrightarrow \text{Sèrie temporal}
  \]
  \[
  S_1 = \{m_0^1 , \ldots , m_{k1}^1\}  \times S_2 = \{m_0^2 , \ldots , m_{k2}^2\} \times r \longrightarrow S'
  \]
  \[
  t_1=T(\inf S_1), t_2=T(\sup S_1):
  \]
  \[
  S' = S_1 \cup  ( S_2 - S_2[t_1,t_2]^r )
  \] 
\end{definition}



Propietats de la unió temporal:
\begin{itemize}
\item No commutativa
\item Però, $(S_1 \cup^r S_2) \cup (S_2 \cup^r S_1) = S_1 \cup S_2$\todo{és cert?}
\end{itemize}




\subsubsection{Fusió temporal}

Fusió (join) de dues sèries temporals $S_1 \text{ fusió } S_2$.


\begin{definition}[Fusió temporal de $S1$ i $S2$ amb representació $r$]
  \[
  \text{fusió}: \text{Sèrie temporal} \times
  \text{Sèrie temporal} \times \text{representació} \longrightarrow
  \text{Sèrie temporal}
  \]
  \[
  S_1 = \{m_0^1 , \ldots , m_{k_1}^1\} \times S_2 = \{m_0^2 , \ldots ,
  m_{k_2}^2\} \times r \longrightarrow S'
  \]
  \[
  t = \{t^1 \, | \, \forall m^1=(t^1,v^1) \in S_1\} \cup \{t^2 | \forall
  m^2=(t^2,v^2) \in S_2\}:
  \]
  \[
  S' = \{m'=(t',v_1',v_2') \, | \, (t',v_1') \in S_1[t]^r \wedge (t',v_2') \in S_2[t]^r \} 
  \]\todo{els valors s'haurien de saber fusionar}
\end{definition}



Propietats de la fusió temporal:
\begin{itemize}
\item $|S'| <= k_1 + k_2$
\item Commutativa?
\end{itemize}



Semifusió de dues sèries temporals $S_1 \text{ semifusió } S_2$, a on la primera sèrie temporal marca el vector de temps de fusió, 
\[
S_1 \text{ semifusió } S_2 = S_1 \text{ fusió } S_2[S_1\{t\}]^r
\]











%%% Local Variables:
%%% TeX-master: "main"
%%% End:







% LocalWords:  SGST
