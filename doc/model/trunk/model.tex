\chapter{Introducció als models}


\todo{}

En els capítols següents es dissenya un model matemàtic per a la
gestió en bases de dades de la multiresolució de sèries temporals.

En els següents capítols es defineixen els objectes que ens permeten
modelar l'estructura de les dades i els operadors que s'hi poden
aplicar.

La definició del model s'estructura en dues parts:

\begin{itemize}
\item Un model pels \gls{SGST}  que defineix mesura i sèrie temporals.
\item Un model pels \gls{SGSTM} que defineix buffer, disc, subsèrie
  resolució, sèrie temporal multiresolució i esquema de
  multiresolució. Aquest model es defineix a partir del model de \gls{SGST}.
\end{itemize}



  
En aquest capítol, es relaciona i s'explica més bé el concepte de
model matemàtic pels \gls{SGBD} del capítol d'estat de l'art
\todo{ref} amb el model que proposem. Sobretot s'aclareixen alguns termes i conceptes que altrament podrien ser confusos. 

També es resumeixen els objectius de la definició dels models.




\section{Introducció als conceptes de model}

%Sobre què és una base de dades i un sistema que la gestiona
\paragraph{Què és una base de dades i un sistema que la gestiona.}
Una definició més particular de base de dades que l'exposada en el
capítol d'estat de l'art \todo{ref} és ``conjunt de dades organitzades
segons una estructura coherent i accessibles des de més d'un programa
o aplicació, de manera que qualsevol d'aquestes dades pot ésser
extreta del conjunt i actualitzada, sense que això afecti ni
l'estructura del conjunt ni les altres dades'' \parencite[s.~v.~base
de dades]{termcat} amb la corresponent definició per als sistemes que
les gestionen de ``sistema informàtic que permet la gestió automàtica
d'una base de dades, generalment la creació, l'emmagatzematge, la
modificació i la protecció de les dades que s'hi
contenen'' \parencite[s.~v.~sistema de gestió de bases de
dades]{termcat}.  En aquest cas, hem de precisar que en els capítols
següents ens centrem en la teoria dels sistemes d'informació,
basant-nos en el model relacional \parencite{date04:introduction8},
per a proposar el model lògic i deixem de banda els aspectes més
d'implementació informàtica, com per exemple accedir o manipular
físicament les dades.

D'aquestes definicions cal destacar la precisió en els termes
d'estructura, organitzada i coherent, és a dir que s'enumeren els
requisits per al correcte emmagatzematge de les dades en concordança
amb l'expressat en el model relacional.  En aquestes definicions, a
més, caldria afegir que els \gls{SGBD} han de ser capaços d'inferir
informació, és a dir a partir de les dades emmagatzemades deduir-ne de
noves mitjançant les consultes.





%Sobre model aproximat i model exacte
\paragraph{Què es modelitza amb exactitud i què amb aproximació.}
Els models de \gls{SGST} i \gls{SGSTM} que proposem són models lògics
matemàtics, és a dir són models formals i abstractes que defineixen
amb exactitud l'estructura i la manipulació d'unes dades
independentment de la realitat.  Així doncs es defineixen models de
\gls{SGBD} i es presenten com un model matemàtic formal, per tant la
realitat que es modelitza són els \gls{SGBD}. Un cop definit el model,
aleshores els \gls{SGBD} s'usen com a eines simbòliques per a
modelitzar la realitat, és a dir en el procés de dissenyar un model
que aproximi i simplifiqui una realitat. Cal no confondre la definició
del model formal matemàtic amb la interpretació del model en una
realitat concreta.

Tot i tenir tot el sentit matemàtic, un model lògic abstracte no té
sentit pràctic si no es té en compte la descripció que fa de la
realitat, és a dir que també s'ha d'interpretar el significat que té
el model en la realitat.  Aquest procés d'interpretació construeix un
model aproximat i simplificat de la realitat; és a dir que consisteix
en definir per a un determinat context quines variables hi ha, de quin
tipus són els valors, quina forma tenen, com s'interpreten, etc.  Els
\gls{SGBD} descriuen la realitat mitjançant predicats que indiquen
quins fets es consideren certs, però els models de \gls{SGBD}
parteixen d'assumir que aquests predicats són la realitat, en tot cas
deixen per altres teories l'avaluació de com els predicats s'aproximen
a la realitat i deixen per als usuaris la interpretació del significat
dels predicats a la realitat llevat d'allò que es pot expressar
mitjançant regles d'integritat.


En l'àmbit dels \gls{SGST}, el model descriu
exactament com a fet cert la mesura d'un valor i deixen que altres
teories, com per exemple podria ser la teoria de la mesura, avaluïn
fins a quin punt el valor mesurat s'aproxima a la
realitat. Particularment, si els fets descriuen allò que s'ha mesurat
aleshores podem plantejar el cas de mesurar valors desconeguts, mentre
si descriuen directament allò que realment val la variable en el model
no hi tenen cabuda les propietats de l'adquisició de la mesura. 
En l'àmbit dels \gls{SGSTM}, el model descriu com a fet cert unes
resolucions de la sèrie temporal i mitjançant altres teories, com per
exemple la teoria de la informació, s'avalua com s'aproximen a la
informació d'una sèrie temporal original.



%  D'alguna manera, els SGBD descriuen exactament els
% fets que es coneixen i mitjançant altres teories es dedueix en quina
% mesura aquests fets coneguts s'aproximen a la realitat (particularment
% un fet descrit com a cert en un SGBD pot ser totalment esbiaixat de la
% realitat però això no se n'ocupen els SGBD; és a dir el predicat exacte és el d'allò que és observat tot i que mitjançant altres teories es pot assegurar un predicat d'allò que és la realitat).
% ; i per tant
% la interpretació del significat dels models matemàtics a la realitat,
% i com a conseqüència la modelització aproximada de la realitat, depèn del
% conjunt del model lògic de SGBD més altres teories. 


% Kopetz en el llibre de temps real (capítol 2 o 3?) diu que un model té l'objectiu d'estudiar una realitat simplificada per a facilitar la comprensió d'una determinada característica. Potser la definició que fa i la intencionalitat que té no és ben bé la mateixa que el tipus de model que parlem aquí? Si és el cas potser estaria bé fer notar que hi ha diferències en el concepte de model segon l'àmbit i que aquí s'utilitza en tal sentit.

% Per exemple, Fabian Pascal parla de representar la realitat de manera simple (i no tant de simplificar la realitat):
% ``For the informational purpose that RM satisfies--inferencing facts that are logical implications of facts represented in databases--the RM is superior, because it is the simplest way to guarantee logically correct results with respect to the real world and it has the highest scope-to-simplicity ratio: it can represent any reality with the least and simplest of constructs''




\paragraph{Quin nivell es modela.}
Al capítol d'estat de l'art\todo{ref} s'han nombrat els tres nivells
de l'arquitectura dels \gls {SGBD}: el físic, el lògic i el d'usuari.
Els models que es proposen pertanyen al nivell lògic, és a dir són
models lògics per les dades i pel comportament dels \gls{SGST} i
\gls{SGSTM}. En el capítol \todo{ref} es proposen implementacions per
a aquests models i per tant pertanyen al nivell físic.  En alguns
exemples i descripcions de propietats dels models, s'avalua el
significat en un context particular del model, és a dir la semàntica
del model, cosa que pertany a descriure com els usuaris poden
interpretar el model lògic per a modelitzar la realitat.
% és a dir descriu la relació entre el nivell lògic i el d'usuari \todo{???}





\paragraph{Àlgebra o càlcul relacional.} Els models que definim són
similars a l'àlgebra relacional. L'àlgebra relacional es basa en la
teoria de conjunts, que és més propera a la definició d'una sèrie
temporal com a conjunt de mesures i a aplicar-hi operacions de manera
prescriptiva. Alternativament, el càlcul relacional, que com s'ha
descrit al capítol d'estat de l'art \todo{ref} és equivalent a
l'àlgebra relacional, es basa en la lògica de predicats i és més
proper a aplicar les operacions de manera descriptiva. Això no
obstant, en les definicions usem tant l'àlgebra com la lògica de
conjunts segons convingui i faciliti la comprensió de les definicions.




% \paragraph{Model com a relació o com a tipus de dades.} 
% Aquesta és una pregunta complicada. Sobretot perquè el model
% relacional no ho aclareix; descriu les relacions com si no fossin un
% tipus de dades tot i que després accepta que hi hagi relacions amb
% atributs de relacions. Nosaltres volem presentar un model de gestió
% de dades per a tipus complexos, les sèries temporals i les
% multiresolució, i aleshores veiem la necessitat d'abordar-ho des del
% model relacional al complet (com si fossin uns SGBD específics per a
% aquelles tasques). Ara bé, en un SGBD genèric aquests models de
% dades s'entendrien com a tipus de dades.







\section{Introducció a les sèries temporals}


Una sèrie temporal és una representació per a unes variables o
magnituds físiques que evolucionen al llarg del temps.  En els models
usarem les sèries temporals des de la visió més genèrica possible, és
a dir una sèrie temporal com a conjunt de dades que s'han adquirit en
uns certs instants de temps.  En aquest sentit, les sèries temporals
poden representar dades molt variades i que pertanyen a àmbits molt
diferents.


Les mateixes dades, la variació en el temps de magnituds, són
estudiades en altres teories com la teoria del senyal; de fet les
sèries temporals són una de les eines en aquesta teoria.  Això no
obstant, en les anàlisis aquests senyals normalment s'assumeixen com a
periòdics, afitats en freqüència, valors adquirits com a seqüències
equiespaiades i amb un fort anàlisis en els components freqüencials.
L'aproximació que presentem en sèries temporals és un raonament
similar més genèric però més propi de l'àlgebra discreta matemàtica
mentre que la teoria del senyal és més pròpia de l'àmbit del càlcul
matemàtic. 


%\todo{potser parlar de wavelets també?}


Així doncs, l'estudi genèric proposat de les sèries temporals no
pretén substituir aquests estudis propis de cada àmbit sinó que pretén
oferir una visió més àmplia i comuna a totes aquestes dades i oferir
un estudi per a aquelles dades que no tenen un comportament clarament
definit. Aquest és el cas, per exemple, de les dades adquirides en un
monitoratge en entorns no controlats d'una variable física: aquestes
variables són aleatòries, el temps d'adquisició pot ser irregular i
per tant cal estudiar-les com a sèries temporals genèriques.
Cal dir, que a vegades les sèries temporals es redueixen a seqüències
temporals, és a dir a estudis de dades on només importa l'ordre en què
s'han adquirit i el període d'adquisició es constant. No fem
aquesta reducció sinó que tractem les sèries temporals des del punt de
vista més genèric on cal saber també la posició de temps absoluta que
ocupen i la distància de temps entre els valors.
Aquests estudis més particulars de les sèries temporals, els quals es
focalitzen i simplifiquen algunes propietats, permeten concentrar-se
més en àmbits específics i oferir solucions molt ben raonades.  Per
tant és interessant poder incorporar aquests estudis en els models, en
aquest sentit per exemple utilitzarem conceptes de la teoria del
senyal per a interpretar propietats de les sèries temporals.




\paragraph{Interpretació de la sèrie temporal.} 
La interpretació genèrica d'una sèrie temporal és un conjunt de
predicats `en el temps $t$ la variable observada té el valor $v$'
pertanyents a una mateixa variable o fenomen físic.  De forma més
particular i en una interpretació més lligada a l'adquisició i
monitoratge continu de fenòmens una sèrie temporal indica la mesura
d'un valor en un temps, és a dir que el fet que es constata com a cert
és que segons un rellotge i un aparell de mesura s'ha adquirit una
parella de temps i valor.  


El models de \gls{SGBD} defineixen la metodologia i asseguren la
correctesa en la inferència d'informació a partir dels fets que es
donen com a certs. Des del punt de vista del model relacional, alhora
també es donen com a certs els fets que no són constats; és a dir que
si en una sèrie temporal no hi apareix un temps $t$ significa que no
s'ha mesurat res i en canvi si s'ha mesurat però s'ha obtingut un
valor erroni aleshores hauria d'aparèixer marcat amb un valor
especial.


\todo{}




  Per una banda, cal destacar, des de l'asusmpció de la interpretació en el monitoratge,
 que deduir informació sobre la variable
  mesurada a partir de la mesura és competència d'altres teories
  (p.ex. si l'aparell de mesura està avariat la informació inferida en
  el SGST serà totalment certa des del punt de vista que aquell és el
  valor mesurat per l'aparell però, evidentment, no serà cert que la
  variable hagi tingut aquell valor). (Aquest seria el principi
  d'inferència d'informació de bases de dades: a partir d'un fet que
  donem com a cert, establim com a totalment certa la informació que
  inferim. I és responsabilitat de qui escriu la consulta establir-ne
  la interpretació, és a dir determinar si aquella operació
  efectivament es correspon amb la informació que vol inferir. Per
  això, els models de SGBD defineixen uns operadors neutres que només
  tenen en compte l'estructura de les dades i la interpretació del
  significat de les operacions és extern al model; de fet com en
  qualsevol altra àlgebra, per exemple pensem en el cas de la suma on
  la definició matemàtica no explica com s'ha d''interpretar la
  validesa del resultat)

  Per altra banda, això no vol dir que totes les sèries temporals hagin de
  ser adquirides directament, poden ser resultat d'operacions amb
  altres sèries temporals o resultat de consultes on el temps sigui
  una variable (p.ex. consultar les mitjanes mensuals de temperatures)
 %(p.ex també l'evolució al llarg del temps de la  quantitat de visites a un portal segons el país d'origen)
 , però sí
  que és important no perdre'n de vista la interpretació genèrica. En
  alguns casos la interpretació, a més, es pot particularitzar, com en
  els casos descrits de senyal i so. O al revés, unes dades que es
  consideraven un senyal de so es tracten genèricament com a sèries
  temporals.

  Particularment, en els casos similars a la consulta de les mitjanes
  mensuals de temperatures i a les particularitzacions amb seqüències,
  el temps és discret i no fa tanta referència a un posicionament
  absolut sobre la línia temporal.


Per aquesta interpretació de valor adquirit en un temps d'una mateixa variable, en una sèrie temporal no hi pot haver temps repetits. No tindria sentit que un aparell hagués mesurat alhora dos valors diferents.
  

És a dir, que les sèries temporals tenen un atribut que és el temps,
que ofereix unes particularitats a l'estructura i cal que els
operadors hi operin coherentment.




\section{Introducció a la multiresolució}


\todo{}
Caldria dir que establir un esquema de multiresolució per a una sèrie temporal és una decisió consensuada. És a dir, emmagatzemar una sèrie temporal multiresolució no és totalment equivalent a emmagatzemar una sèrie temporal, a més cal pensar adequadament els paràmetres de l'esquema multiresolució. Per tant, hom pren la decisió d'emmagatzemar multiresolució i aquestes són les dades que vol gestionar: en el nivell d'usuari haurà de ser conscient d'aquest fet.


Les bases de dades multiresolució per a sèries temporals són bases de dades que contenen sèries temporals. Les sèries temporals són una co\l.lecció de dades mesurades en diferents instants de temps i necessiten un tractament adequat per part de la base de dades. 
El model de dades multiresolució és una solució d'emmagatzematge per a les sèries temporals que, resumint, consisteix a repartir la informació d'una sèrie temporal en intervals de temps diferents.


El model de dades per a sèries temporals es dissenya en el
capítol~\ref{cap:model:sgst}. El disseny d'aquest model és necessari
per a comprendre i construir el model multiresolució.  El model de
dades multiresolució es dissenya en el capítol~\ref{cap:model:sgstm}.
El concepte de multiresolució prové d'estudis anteriors
\parencite{llusa12:ptd}, el qual es va formalitzar com a abstracció
d'una característica essencial de l'SGBD
RRDtool \parencite{rrdtool}. Aquesta abstracció es va realitzar a
partir d'una anàlisi profunda dels conceptes de RRDtool duta a terme
en una tesi de màster \parencite{llusa11:tfm}.




En el model per a sèries temporals es defineixen els objectes principals d'estudi: les \emph{mesures} i les \emph{sèries temporals}. Les mesures són dades mesurades en un instant de temps i les sèries temporals són co\l.leccions de mesures.

El model de dades multiresolució s'estructura a partir de \emph{sèries temporals multiresolució} com a conjunt de \emph{subsèries resolució}, les quals  acumulen temporalment les mesures en un \emph{buffer} per tal de tractar-les abans d'emmagatzemar-les  a un \emph{disc}. El tractament principal consisteix en canviar els intervals de temps entre mesures amb l'objectiu de compactar la informació de la sèrie temporal.
Així doncs, la sèrie temporal queda emmagatzemada com una sèrie temporal multiresolució en intervals de temps diferents, repartits en les subsèries resolució. 

Pel que fa a les operacions, és indispensable que el model multiresolució pugui fer aquests canvis d'intervals de temps, els quals s'aconsegueixen amb les operacions d'\emph{agregació} i \emph{consolidació}. En el model de dades multiresolució es defineixen els operadors específics per a aquestes tasques anomenats \emph{agregadors d'atributs}


A banda de les estructures, en el model també es defineixen els
operadors que permeten tractar les dades; ja sigui per operar amb les
estructures o bé per a fer consultes.









En el model de SGST s'observen algunes patologies que poden presentar les sèries temporals. El model de SGSTM soluciona algunes d'aquestes patologies:

\begin{itemize}
\item Regularitza les sèries temporals
\item Tracta i validar les sèries temporals: gestiona els casos de dades errònies o desconegudes i marca quan hi ha valors erronis.
\item És una solució de compressió per a quantitats enormes de dades
\end{itemize}


Però el model de SGSTM també es pot fer servir per altres aplicacions:

* Regularitzar en línia (temps real) una sèrie temporal en diferents períodes de mostreig

* Tenir unes vistes (consultes) a punt (ja processades) amb diferents resolucions d'una sèrie temporal

* Comprimir per decimació (downsampling) o bé farcir forats (reconstrucció del senyal)


Tres possibles camps d'aplicació de la multiresolució: comptadors (conservar els totals), soroll d'un senyal (conservar la mitjana), temperatura (aplicar a priori la DFT i determinar deltes bons per a després poder interpolar mitjanes).


\todo{atenció que no s'ha parlat enlloc del rellotge en els SGBDM? s'hauria de dir que en principi no es diu res sobre el rellotge i que si segueix l'esquema de consolidació proposat les mateixes mesures van entrant ordenades i van marcant el pas del temps}



\todo{alerta! el model sgstm s'ha fet pensant en els instants de consolidació periòdics. Què passa quan no ho són? }
per exemple event trigerred (només emmatgatzemem informació quan creiem que és interessant). Aleshores potser són casos molt especials i no es pot dibuixar l'esquema? Potser posar tot això com a comentari a la secció d'Altres Estructures: En el model de \gls{SGSTM} s'ha considerat que la consolidació es feia periòdicament però es podria fer quan es cregués oportú, aleshores no es pot preveure quin esquema de multiresolució hi haurà; són casos que requereixen un estudi més profund. Etc.



% This paper focuses on Data Base Management Systems (DBMS) that store
% and treat data as time series. Traditional DBMS, as is ones derived
% from relational model, are not adequate for these cases as they do not
% have enough facilities to manage and retrieve time series
% information.



% * Temporal databases. Basades en esdeveniments. Data mining basat en sèries temporals definides per parelles temps-valor; calen TSMS

% * Alta dimensió sèries temporals, cal reduir-la. Es conserven els segments de temps més interessants; multiresolució

% * Multiresolució, diferents resolucions, es pot treballar amb més o menys dades segons convingui

% *Cal saber canviar de resolució, exemple transformar dades periòdiques d'un mes a un any.

% * Aggregates, una sèrie temporal pot estar mostrant diferent informació. ex: mitjana, màxim, valor al final del període, ...

% * Les sèries temmporals tenen una metainformació que cal guardar en una base de dades relacional (localització, etiquetes de classificació, últim valor mesurat, unitats, etc.)

% * Disseny del model de TSMS, aleshores veurem si una TSMS pot ser implementada com a camp d'una altra DBMS o si els DBMS no són capaços de manipular TS adequadament i cal implementar TSMS específics.

% * Calendari, passa a segon terme. El temps es defineix com universal i constant (semblant a Unix Time Epoch). Aquests temps es pot convertir a calendari. Cal definir la interacció usuari/calendari amb temps universal.

% * El temps és un nom donat al camp, qualsevol objecte que tingui la mateixa interfície que el temps pot funcionar. En el cas del valor pot ser qualsevol objecte, s'exemplifica amb reals per facilitar-ne la comprensió i per ser el més proper al time series analysis: statistical methods focused on sequences of values representing a single numeric variable [llibre-last].


% * Representació: Entre dos punts de mesura, quin valor pren la sèrie temporal?.

% Si el volum de dades és gran no hi ha cap altre manera d'abordar-les directament que amb computació intensiva paral·lela [tenim alguna citació d'això?]. Per altra banda es pot intentar estudiar el problema per tal de veure si es pot trencar en trossos, mirar-lo des d'una altra perspectiva, etc. que en simplifiqui els càlculs. Això és el que fem amb el model SGSTM, dir que les sèries temporals en podem seleccionar prèviament informació.











%%% Local Variables:
%%% TeX-master: "main"
%%% End:
% LocalWords: buffer buffers





