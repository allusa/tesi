\chapter[Model RRD]{Model dels SGBD Round Robin}\label{cap:model-rrd}

En aquest capítol es dissenya un model matemàtic per a les bases de dades Round Robin (RRD). Aquest model està inspirat en el sistema de gestió de bases de dades RRDtool i és el resultat de l'abstracció dels conceptes que s'han exposat als capítols %\ref{cap:rrdtool} i \ref{cap:rrdtool-etapes}. 

A l'inici del capítol, s'introdueix el concepte de model matemàtic per a les bases de dades. 
A continuació, es defineixen els conceptes necessaris per a finalment definir una base de dades Round Robin. 
Al final del capítol, es resumeix breument la informació exposada.

  

\section{Introducció}

Segons Date,~\cite{date:introduction}, ``una base de dades és un contenidor informàtic per a una co\l.lecció de dades''. El sistemes informàtics que tracten amb bases de dades s'anomenen sistemes de gestió de bases de dades (SGBD) i tenen l'objectiu d'emmagatzemar informació i permetre consultar i afegir aquesta informació  per part dels usuaris.
Per complir aquests objectius, els SGBD ofereixen a l'usuari diferents operacions a fer amb la base de dades, com per exemple crear-la, afegir dades o consultar informació a partir de les dades emmagatzemades.

Els SGBD es basen en teories matemàtiques que reben el nom de model de dades, un SGBD és una implementació d'un model de dades.
Segons Date, ``un model de dades és una definició abstracta, auto continguda i lògica dels objectes, de les operacions i  de la resta que conjuntament constitueixen la màquina abstracta amb la que els usuaris interactuen. Els objectes permeten modelar l'estructura de les dades. Les operacions permeten modelar el comportament''.

Les bases de dades Round Robin són bases de dades que contenen sèries temporals. Les sèries temporals són una co\l.lecció de dades mesurades en diferents instants de temps i necessiten un tractament adequat per part de la base de dades. 
El model de dades Round Robin és una solució d'emmagatzematge per a les sèries temporals que, resumint, consisteix a repartir la informació d'una sèrie temporal en intervals de temps diferents.

El model de dades Round Robin es dissenya per primera vegada en aquest capítol. 
Actualment existeix un SGBD, RRDtool, que implementa conceptes susceptibles d'esdevenir un model de dades però enlloc s'ha recollit com a tal. A partir de l'anàlisi i l'abstracció profunda dels conceptes de RRDtool s'ha dissenyat el model de dades Round Robin, batejat segons el nom que té a RRDtool (\emph{Round Robin Database tool}). Els conceptes de RRDtool s'han exposat detalladament als capítols %\ref{cap:rrdtool} i \ref{cap:rrdtool-etapes}. 


Així doncs, a continuació es presenta el model de dades Round Robin. 
Es defineixen els objectes principals d'estudi: les \emph{mesures} i les \emph{sèries temporals}. Les \emph{mesures} són dades mesurades en un instant de temps i les \emph{sèries temporals} són co\l.leccions de mesures, a cada base de dades Round Robin hi ha emmagatzemada una sèrie temporal. 

El model de dades Round Robin s'estructura a partir de \emph{discs Round Robin}, els quals  acumulen temporalment les \emph{mesures} en un \emph{buffer} per tal de tractar-les abans d'emmagatzemar-les  a un \emph{disc}. El tractament principal consisteix en canviar els intervals de temps entre \emph{mesures} amb l'objectiu de compactar la informació de la sèrie temporal.
Així doncs, la sèrie temporal queda emmagatzemada en intervals de temps diferents, repartits en els \emph{discs Round Robin}. 

Pel que fa a les operacions, és indispensable que el model Round Robin pugui fer aquests canvis d'intervals de temps, els quals s'aconsegueixen amb les operacions d'\emph{interpolació} i \emph{consolidació}. En el model de dades Round Robin d'aquest capítol també es defineixen operacions per crear una base de dades Round Robin, per inserir-hi mesures i per representar sèries temporals.



\section{Sèrie temporal}






\section{Resum}

Aquest capítol s'acaba amb un resum dels conceptes exposats en el model de dades Round Robin. Una base de dades Round Robin és un sistema informàtic d'emmagatzematge d'una sèrie temporal entesa com una  una co\l.lecció de dades mesurades en diferents instants de temps.

A la base de dades, la sèrie temporal queda estructurada com s'ha esquematitzat a  la figura~\ref{fig:model:bdstm}. És una forma compacta d'emmagatzemar la sèrie temporal de manera que queda repartida segons diferents funcions d'interpolació i períodes de mostreig. Aquest repartiment té lloc en els diferents discs Round Robin, els quals fan ús del seu buffer per interpolar les mesures i fan ús del seu disc per consolidar-les. 

El conjunt de discs Round Robin constitueixen la part principal d'una base de dades Round Robin tot i que, com a l'esquema, hi pot haver un buffer d'entrada de mesures comú per tal de regularitzar la sèrie temporal des d'un principi, ja que el pas de no regular a regular requereix interpoladors més complicats.


En el capítol%~\ref{cap:roundrobinson},
 utilitzant el llenguatge de programació Python es dissenya, a nivell acadèmic, un sistema de gestió de bases de dades que implementa el model de dades Round Robin tal com s'ha definit en aquest capítol.


En resum, a partir del model de dades Round Robin descrit en aquest capítol per una banda es poden estudiar quin efecte té una configuració determinada de paràmetres i per altra banda es poden dissenyar sistemes de gestió de bases de dades assegurant que implementen el model i per tant que tenen el funcionament desitjat.




% \section{Tractament dels desconeguts}


%operacions amb nan de octave i matlab
%http://biosig-consulting.com/matlab/NaN/
% The NaN-toolbox v2.0: A statistics and machine learning toolbox for Octave and Matlab®
% for data with and w/o MISSING VALUES encoded as NaN's.


% La censura per interval és una verificació possible. En aquesta, un valor $v$ es considera desconegut quan $v<L_{m}$ o $v>L_{M}$.


% Sigui $m=(v,t)$ una mesura, $m$ és desconeguda si $v$ és desconegut.

% Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal i $H$ un termini de temps, una mesura $m_i=(v_i,t_i)\in S$ és desconeguda si, donada la mesura anterior $m_{i-1}=(v_{i-1},t_{i-1})$, $t_i - t_{i-1} > H$.


% Sigui $f$ un interpolador, en el moment de calcular la mesura de consolidació $f$ decideix si és desconeguda
% \[
% desconeguda?: \text{Sèrie temporal} \times \text{interval} \longrightarrow \text{Mesura}
% \]

% Sigui $S=\{m_0,\ldots,m_k\}$ una sèrie temporal, $f$ un interpolador, $i=[T_0,T_f]$ un interval de temps i $\alpha$ un llindar, la mesura de consolidació calculada per l'interpolador $f$ és desconeguda ssi  
% \[
% \frac{t_d }{T_f - T_0} > \alpha :
% \]
% \[
% :t_d = t_{d0} + t_{df} + \sum\limits_{i=1}^{k-1}(t_i-t_{i-1}) : v_k = 'desconegut':
% \]
% \[
% : t_{d0} = \left\{\begin{array}{l} t_0-T_0 \text{ si } v_0 = 'desconegut' \\ 0\end{array}\right. ,
% t_{df} = \left\{\begin{array}{l} T_f-t_{k-1} \text{ si } v_k = 'desconegut' \\ 0\end{array}\right. :
% \]
% \[
% :k=|S|-1,(v_k,t_k)=m_k\in S' :S'= S_{T_0:T_f} \cup \{min(S_{T_f:\infty})\}
% \]


\section{Consultes}






\subsection{Consulta temporal d'una RRD}

Abans de fer una consulta temporal pot fer falta fer una selecció dels discs Round Robin amb el mateix interpolador.


\begin{definition}[Consulta temporal de $RRD$ amb representació $r$]
  \[
  \text{consulta}: \text{Base de dades RR} \times
  \text{interpolador} \times \text{representació} \longrightarrow
  \text{Sèrie Temporal}
  \]
  \[
  M = \{R_0 , \ldots , R_d\} \times r \longrightarrow S'
  \]
  \[
  \forall R_j=(B_j,D_j) \in M : B_j=(S_{Bj},\tau_j,\delta_j,f_j), D_j=(S_{Dj},k_j):
  \]
  \[
  \delta_0 < \delta_1 < \delta_2 < \dots < \delta_d : 
  \footnote{S'assumeix que en una RRD no hi ha discs Round Robin amb la mateixa informació.}
  \]
  \[
  S' = S_{D0} \cup^r  S_{D1} \cup^r  S_{D2} \cup^r \dots \cup^r S_{Dd}
  \]
  % Es podria fer recursiu
  % \[
  % \delta_0 = min (\{\delta_j \in B_j  \}): \forall R_j=(B_j,D_j) : 
  % R_0=(B_0,D_0)  \in M : B_0=(S_{B0},\tau_0,\delta_0,f_0), D_0=(S_{D0},k_0):
  % S' = \left\{\begin{array}{ll}
  %     \{\} & \text{si } |M| = 0 \\
  %     S_{D0} \cup^r (\text{ consulta } (M-\{R_0\})) 
  %   \end{array}\right.
  % \] 
  
\end{definition}






% \dots
% \ldots
% \cdots
% \vdots
% \ddots diagonal dots
% \iddots  inverse diagonal dots (requires the mathdots package)
% \hdotsfor{n} to be used in matrices, it creates a row of dots spanning n columns

% A_1,A_2,\dotsc,   with commas
% A_1+\dotsb+A_N    with binary operators/relations
% A_1 \dotsm A_N    multiplication dots
% \int_a^b \dotsi   with integrals
% A_1\dotso A_N     other dots

%%% Local Variables:
%%% TeX-master: "main"
%%% End:
% LocalWords:  Round  buffer buffers





