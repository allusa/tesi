\section[SGBD]{Sistemes de gestió de bases de dades}
\label{sec:art:sgbd}


Segons \textcite{date}, ``una base de dades és un contenidor informàtic per a una co\l.lecció de dades''. El sistemes informàtics que tracten amb bases de dades s'anomenen sistemes de gestió de bases de dades (SGBD) i tenen l'objectiu d'emmagatzemar informació i permetre consultar i afegir aquesta informació  per part dels usuaris.
Per complir aquests objectius, els SGBD ofereixen a l'usuari diferents operacions a fer amb la base de dades, com per exemple crear-la, afegir dades o consultar informació a partir de les dades emmagatzemades.

Els SGBD es basen en teories matemàtiques que reben el nom de model de dades, un SGBD és una implementació d'un model de dades.
Segons \citeauthor{date}, ``un model de dades és una definició abstracta, auto continguda i lògica dels objectes, de les operacions i  de la resta que conjuntament constitueixen la màquina abstracta amb la que els usuaris interactuen. Els objectes permeten modelar l'estructura de les dades. Les operacions permeten modelar el comportament''. Ara bé, \citeauthor{date} avisa que el concepte model de dades també s'usa per definir una estructura concreta d'una base de dades i per tant cal distingir adequadament la confusió entre els dos conceptes.

Un model de SGBD que ha s'ha consolidat i esdevingut un referent és el model relacional. Principalment l'èxit d'aquest model es basa en teories matemàtiques consolidades: la lògica de predicats i la teoria de conjunts \parencite{date}.



\subsection{Relacional}

El model relacional va ser proposat per \textcite{codd70} per a formalitzar els SGBD, els quals quan es basen en aquestes teories s'anomenen relacionals (SGBDR). A partir de llavors els SGBDR han anat evolucionat fins a tenir una gran solidesa, amb \textcite{date,date06} com a principal divulgador.

Avui dia, no hi cap implementació comercial que segueixi fidelment el model relacional \todo{citar date}, tot i que n'hi ha que caminen cap aquest camí (rel,TransRelational). Això ha contribuït a que per una banda hi hagi hagut una sèrie de malentesos i errors que Date s'ha encarregat de desmentir en nombroses publicacions \todo{citar, sobretot ddbunk} i per altra banda també ha contribuït en gran mesura a voler explorar altres models.              


lguns SQL squirks (the possibility of nulls, the possibility of duplicate rows, the
fact of left-to-right column ordering, and so on), tema modernament discutit són els nulls [datesigmod2008]

Alguns malentesos també es deuen en l'ús de la mateixa terminologia amb significat diferent entre el model relacional i l'orientació a objectes, sobretot pel que fa als termes valor i variable. 

Relacional: tipus | representació |  valor, objecte, instància  | variable  | referència (adreça continguda en una variable) | operadors (de lectura i de modificació)
Objectes: tipus, classe (tipus amb atributs i mètodes), interfície | classe, atributs,propietats  |  valor, estat, objecte/instància immutable/estàtic |  valor, objecte/instància mutable/dinàmic  | variable | funcions,mètodes (funcions dins de classes) (purs o modificadors)

Aquesta confusió pot ser deguda a 'the object model' is closer to being a model of storage than it is to being a model of data. [date06]


Hi han hagut algunes propostes per apartar-se del model relacional, com pot ser recuperant models antics de xarxa (Xquery) o bé utilitzant el paradigma de programació d'objectes \todo{cites}, tot i que Date i altres consideren que no estan ben fundades i cap d'aquestes té la mateixa potència que el model relacional. Actualment s'està treballant en una implementació fidel al model relacional \todo{citar}. 

Date i altres consideren la possibilitat, tot i que remota, que es pugui definir un model més potent que el relacional però que no hi ha cap indici que cap definició ho estigui aconseguint ni de fet explorant. Per tant, aconsellen que cap aplicació de gestió de bases de dades no s'allunyi del model relacional.





\subsection{Implementació i model}

\textcite{date:introduction} diferencia amb detall els conceptes d'implementació i model.
El model d'un SGBD és el model matemàtic tal com s'ha descrit anteriorment, en canvi un SGBD és la implementació d'un model de dades, per exemple \emph{Rel}.
%Segons l'esquema de comunicació, també es poden anomenar com a sistema servidor de bases de dades, per exemple postgresql.
Una base de dades és una instància d'un SGBD, per exemple la base de dades dels estudiants.


Aquesta diferència entre implementació i model aporta independència de dades. En altres paraules, els models no han de tenir detalls d'implementació ni parlar d'objectius de rendiment. Date es refereix a aquesta independència com a \emph{Information Principle} \todo{citar}.
Date i Pascal \todo{citar ddbunk} detallen algunes confusions actuals sobre la independència entre el model i la implementació.


Com s'ha dit anteriorment \todo{s'ha dit?}, Date descriu els SGBD \emph{SQL} com a implementacions no fidels al model relacional, encara que aquests productes comercialment es coneguin com a SGBDR. Com a proposta per a obtenir SGBDR purament relacionals date i darwen \todo{citar} han definit el llenguatge \emph{Tutorial D} i ja està donant resultats amb SGBDR com \emph{Rel} .


Recentment ha aparegut un nou corrent en l'àmbit dels SGBD que s'anomena NoSQL (\emph{Not Only SQL}). En els objectius s'han marcat sobrepassar les limitacions dels SGBDR \todo{alguna cita?, potser stonebraker?}. 
A l'espera que Date valori aquest corrent, cal tenir present l'\emph{Information Principle} i que SQL no és un bon referent pels SGBDR. És a dir, s'ha d'entendre NoSQL com una crítica a les implementacions comercials actuals del model relacional, una crítica que pot estar motivades per l'ús de SQL per part d'aquest productes. 
No es pot entendre, però, el NoSQL com una crítica al model relacional ja que molts dels objectius parlen de millorar el rendiment dels SGBD, cosa només atribuïble a les implementacions però no al model. Precisament, la proposta del llenguatge \emph{Tutorial D} no és SQL.


El corrent de NoSQL també critica l'adequació dels productes actuals.
Els SGBD NoSQL apunten els SGBDR actuals per voler ser \emph{one size fits all} \parencite{stonebraker07,stonebraker09} però que cada aplicació té els seus requisits i per tant una mateixa implementació no pot ser bona per a tots el camps.
En aquesta mateixa línia els models pels SGBD prenen més sentit que mai ja que permeten mantenir una definició comuna per a moltes implementacions.


Segons es desprèn de Date \todo{citar} actualment només hi ha un model consolidat pels SGBD, el model relacional. 
En el corrent NoSQL també es parla de nous models de SGBD \todo{citar-ne alguns?} 
Date \todo{citar} ha considerat que alguns models recuperen intents fallits en el passat (per exemple els SGBD XML o els ODMG), però cal estar atent a si aquests models joves de SGBD arriben a consolidar-se en un futur o no poden esdevenir tant potents com el model relacional.


En resum, l'àmbit informàtic de SGBD se centra en les implementacions. Recerca en temes de garantia de propietats ACID, d'optimització de consultes, d'emmagatzematge de grans volums de dades, de consultes via web, de distribució de bases de dades, de reduir la despesa en energia, etc. \parencite{stonebraker07,stonebraker10}, la qual cosa és excel·lent per a disposar un SGBD adequat a cada aplicació. 

Per altra banda, l'àmbit matemàtic de SGBD, amb el model relacional com a màxim exponent, se centra en els conceptes dels SGBD. Recerca en millorar-ne la comprensió, en obtenir la màxima potència de cara a la gestió de dades per part de l'usuari, en nous models encara que  no s'ha trobat cap altre model que tingui la mateixa potència que el relacional, etc. Cal destacar-ne que tot i tenir conceptes antics consolidats i que han tingut èxit amb els SGBD SQL, s'obre una nova perspectiva amb Tutorial D i les implementacions, a nivell acadèmic, que comencen a prendre cos amb la idea que els SGBDR ho són quan l'usuari hi veu i només hi veu relacions com a bases de dades \todo{citar date} però que els atributs admeten qualsevol tipus. 


%Ara bé, una implementació d'un SGBD que vulgui  obtenir un bon rendiment en una determinada aplicació potser no pot implementar el model relacional complet sinó que només una part




%Com s'ha d'estendre el model relacional?
\subsection{Extensió del model relacional}

Date considera que el model relacional va evolucionat i no considera que hi hagi hagut cap revolució des de la seva aparició. Tot i que hi ha noves maneres per explicar-lo, com és el cas de l'àlgebra relacional \todo{cite ch4 dates and types o thirdmanifesto}. Consideren que el model relacional està bastant completat i que evoluciona en la comprensió de les teories i els conceptes que hi intervenen. 

Només hi ha hagut un àmbit en el que han admès que s'havia d'estendre el model relacional i aquest és el de les dades temporals \todo{citar date temporal}.


  'Support for interval-valued attributes (and hence for temporal databases) involves among other things support for
%generalized versions of the usual relational operators.' [date]            Note: Those “U_” operators are all defined in terms of two new relational operators called pack and unpack,
and those latter operators in turn are defined in terms of relation-valued attributes. As already noted, therefore, support
for interval-valued attributes relies on support for relation-valued attributes, at least conceptually. 




Així doncs no hi ha necessitat d'estendre el model relacional. Sí que hi ha necessitat, però, de tenir disponibles diversos tipus de dades. La creació de nous tipus de dades ha estat un tema de molta confusió ja que les 'suposades' implementacions del model relacional no ho han permès, o les extensions proposades per \textcite{stonebraker86} es consideren que són a nivell d'implementació i no les que es desitjarien a nivell de model (silbershatz96 en parla a l'apartat 6.research a on diu que els ADT han de ser més flexible i conformar tipus de primer nivell. però veure seshadriVLDBJournal1998:enhanced abstract data types in object-relational databases), i sobretot ha fet que les implementacions basades en orientació a objectes tinguessin un gran impacte \todo{citar ODMG (object databases)}. Date ha rebutjat aquesta idea argumentant que el model relacional mai no ha fixat els tipus de dades disponibles sinó que ben al contrari mai n'ha parlat i per tant els tipus de dades han tingut total llibertat de creació; si bé el model relacional defineix que com a mínim hi ha d'haver el tipus booleà i el tipus relació.

El model relacional requereix que hi hagi un 'sistema' de tipus però diu molt poc de la naturalesa d'aquest sistema de tipus; això es coneix com a ortogonalitat entre les relacions i els tipus.



Així doncs, tenint en compte que segons Date el model relacional és complet, que no hi ha cap de tant potent i que l'ampliació de funcionalitat dels SGBDR s'ha de fer mitjançant la creació de nous tipus, el SGST hauria de contemplar aquestes idees. 

Primer s'hauria de veure que el cas de les sèries temporals no sigui com el cas de les dades temporals a on sí que s'ha necessitat estendre el model relacional.

Segon, s'hauria de considerar que el SGST són un nou tipus de dades en el model relacional i per tant el model relacional ja té tota la potència per una banda constituir SGBD i per altra banda definir i incorporar nous tipus.


Com es defineixen nous tipus complexos als SGBD?

En el cas que es descarti que el cas dels SGST presenta els mateixos problemes que les dades temporals i per tant els SGST han d'esdevenir un tipus de dades, cal preguntar-se com són els tipus de dades al model relacional.

Concretament el model relacional només defineix què es un tipus de dades però dóna llibertat a la seva creació. Això és un gran avantatge. En els cas de tipus de dades senzills es defineixen amb una bona estructura i ja està però què passa quan es vol definir un nou tipus de dades complex?

Cal recercar com s'han definit nous tipus de dades complexos. Els principals problemes es donen que el tipus és complex i forma una entitat de per sí. És a dir que definir un tipus sèrie temporal no és trivial. Aleshores, com cal procedir?



Sobre la necessitat de modelar els tipus.

Cal definir un model pel tipus que volem dissenyar.
De fet, volem dissenyar un SGST. És a dir, un tipus que conformi pròpiament un SGBD. Per tant, utilitzarem les mateixes eines que es fan servir per modelar els SGBDR per a poder modelar el nostre SGST. Com que s'hauran utilitzat les mateixes eines, el SGST podrà esdevenir perfectament un tipus de dades pels SGBDR.

En resum, per a definir nous tipus complexes cal modelar-los com a entitat pròpia, fent un símil amb el model relacional. Això no vol dir, però, que un cop modelats constitueixin de per sí un nou model per als SGBD, sinó que queden dins dels SGBDR. \todo{caldria} elaborar més i trobar alguna pista de com definir nous tipus complexos, stonebraker86 només indica com es va estendre postgresql amb operadors de creació de nous tipus però no com s'han de modelar els nous tipus.

Volem crear un nou model de SGBD, Date ens diu que només hi ha el model relacional, per tant hem d'utilitzar el model relacional per a definir el nostre nou model.


A la xerrada [Date02] va dir que els object/relational són relacionals.


Sobre sèries temporals i temporal data\cite{assfalg08:thesis}

Els SGBD relacionals són capaços d'implementar el primer tipus de coherència, les \emph{bitemporal data}; llavors es classifiquen sota el nom de bases de dades temporals, \cite{date,wiki:temporal_database}. Però el model relacional no és suficient pel segon tipus: les sèries temporals. Tot i que en principi no hi hauria cap problema a utilitzar una base de dades relacional per a sèries temporals, enteses com a dades històriques, la pròpia naturalesa dels sistemes relacionals  dificulta les operacions necessàries. 


Relational DBMS can implement \emph{bitemporal data}. Then they are known as temporal databases \parencite[ch.\ 22]{date}. However, relational DBMS are not adequate for time series. The relational model is capable to describe time series when they are thought as historical data but the design of relational DBMS would difficult the operations  needed by time series \parencite{schmidt95}. Theses time series operations are mainly based in time ranges and need time zones conversions, rotations of table registers and file size maintained at bounded levels.


A TSMS could be implemented in a relational system considering the improvement proposed by \textcite{stonebraker86} that allows the inclusion of new types and operations to relational DBMS. However, it is difficult to evaluate this solution as there is no consolidated data model  for time series. 

After comparing temporal DBMS and TSMS \parencite{schmidt95} they ask whether temporal DBMS and TSMS will meet or they need to be manage by different systems despite both working with time aspects.


he fundamental difficulty is that the relational model does not take advantage of the order of rows. Whereas one can perform an ``order by'' query and manipulate the data in some other language, one cannot natively manipulate the ordered data using select, from, and where. 
Arguably, this is good for data independence, but it is bad for time series.
[http://cs.nyu.edu/shasha/papers/jagtalk.html]

        However, there are major differences between sen-
sor networks and traditional distributed database systems.
Most relevant to sensor networks is existing work on dis-
tributed aggregation [38, 42], but these approaches do not
consider the physical limitations of sensor networks. Mad-
den et al. [30] give an extended classification of aggregate
operators with properties relevant to sensor network aggre-
gation. %\cite{demers03}


Seq model [seshadri95] vs relacional: veure capítol 14 Tree-Structured Data [date06] a on Date descriu com modelar estructures d'arbre amb relacions. Potser es podrien aplicar conceptes semblants per les seqüències? En tot cas: el model estructural ha de contemplar explícitament l'ordre o ho han de fer les operacions?

[date06]:
                                                Now, the relational model provides just one way to
represent data—namely, by means of relations themselves—and the sole essential information
carriers in a relational database are thus necessarily relations, a fortiori. By contrast, other data
models typically provide many distinct ways to represent data (lists, bags, links, sets, arrays,
and so on), and all or any of those ways can be used as essential information carriers in a
nonrelational database. One way of representing data is both necessary and sufficient; more
than one introduces complexity, but no additional power.
     As a matter of fact, it’s the concept of essentiality that forms the underpinning for the well-
known, and important, Information Principle:
     The entire information content of a relational database is represented in one and only
     one way: namely, as attribute values within tuples within relations.

[date06,pàg116]:
Note that what they don’t do is introduce any more power. To be more specific, there’s no data that can
be represented with arrays, lists, and so on, that can’t be represented without them. Likewise, there’s no
useful processing that can be done on data represented with arrays, lists, and so on, that can’t be done
on data represented without them.
[pàg 134]
about the continual references in the body of this chapter to the effect that we might have
array-valued attributes, list-valued attributes, and so on. Don’t such possibilities constitute an
obvious violation of The Information Principle?
     Well, no, they don’t. What that principle says is that the only kind of variable permitted in
the database (considered in turn as a variable) is the relation variable. But a relation variable
can have attributes of any type whatsoever ... including array types, list types, and so on.
Thus, the database at any given time might include a relation value that in turn includes array
values, list values, and so on ... But there are still no array or list variables (etc.) anywhere in sight.









\section{Preguntes}

El llenguatge dels SGBD, per exemple D, és declaratiu (what) i no procedural/imperatiu (how). Com lliguen els SGBD amb els llenguatges de programació declaratius, per exemple amb la programació lògica amb Prolog? Concretament, com lliga Prolog amb el concepte de SGBD? Té la mateixa potència un SGBD que Prolog?
 Es pot veure Prolog com un SGBD?

http://stackoverflow.com/questions/2117651/difference-between-sql-and-prolog

diferències entre model semàntic i programació orientada a objectes [hull86]?







%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "main"
%%% End: 

% LocalWords:  monitoratge
