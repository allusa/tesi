\chapter{Estat actual}
\label{cap:estat}




* Mineria sèries temporals
  
  - mineria
  - aplicacions
  - monitoratge de sèries temporals i problemes
     * censura
     * mostreig

  - sgst: 
      ficar aquí els sgbd per sèries temporals i més endavant ja es parlarà dels sgbd en general i com modelar-los i implementar-los.


* SGBD
 - model relacional
 - implementacions

    - SGBD+xarxes
    - Per sèries temporals

  % * Sèries temporals (històrics, predicció, diagnosis, prognosis, etc.)
  % * Mostreig: docs quan període de mostreig no regular
  % * Bases de dades (docs d'emmagatzematge quan la memòria és finita, docs quan període de mostreig no és regular, altres sistemes semblants (comercials,prototips))



This paper focuses on Data Base Management Systems (DBMS) that store
and treat data as time series.  Traditional DBMS, as is ones derived
from relational model, are not adequate for these cases as they do not
have enough facilities to manage and retrieve time series
information \parencite{schmidt95}.

Some DBMS have already taken into account the specificities of time
series, then called Time Series Data Base Management Systems
(TSMS) \parencite{dreyer94}.  Time Series Data
Server \parencite{weigel10} allows to select a data range from a time
series and to apply a filter when the data is retrieved.
RRDtool \parencite{rrdtool} applies filters and stores different data
ranges when data is stored, moreover it considers that the sampling
times can not be equally spaced, the temporal order is essential and
the value and time must be stored together. However, this TSMS lack
the complete definition of the relation between the three main fields
involved: time series, monitoring systems and DBMS.




DBMS are based from formal models that define the objects and
operations of the abstract machine to which users interact, such is
the relational model \parencite{date}. TSMS lack a consolidated formal
model, although special properties and requirements for a TSMS
have been proposed \parencite{dreyer94}.

In this paper
a model is proposed for an storage system that will keep a time series
in a multiresolution and bounded way.  In this first proposal there
are six definitions that are related to the data storage mechanism:
measure, time series, buffer, disc, resolution disc, and multiresolution
database. Some of this concepts are familiar with RRDtool
operating mode.

En aquest capítol se situen els sistemes de gestió de bases de dades (SGBD) per sèries temporals en el context de la mineria de dades de sèries temporals (\emph{time series data mining}), el qual també es considerat com mineria de dades per  detectar automàticament coneixement (\emph{knowledge discovery databases}). Els SGBD de model Round Robin (RRD) pertanyen a aquest context ja que  emmagatzemen sèries temporals  de les quals es vol aconseguir informació rellevant.

El capítol comença resumint l'estat de les sèries temporals en aquest camp de mineria; és a dir d'emmagatzematge i tractament. A continuació es llisten algunes aplicacions informàtiques que han implementat models de la mineria de sèries temporals. Finalment, es descriu l'estat actual de l'aplicació RRDtool, la qual també es classifica en aquest camp.





\section{Sèries temporals}

Important! Diferència entre dades temporals i sèries temporals.

Tal com diu A{\ss}falg,~\cite{assfalg08:thesis}, la coherència temporal pot ser vista des de dues vessants. La primera, a la qual anomena \emph{bitemporal data}, consisteix en expressar el temps vàlid durant el qual un esdeveniment és cert i el temps de transacció durant el qual l'esdeveniment és guardat a la base de dades, és a dir consisteix a descriure dos estats, cert o fals, per cada observació. La segona, a la qual anomena \emph{time series data}, consisteix a descriure co\l.leccions de dades en funció del temps. A més diu que les primeres poden ser expressades amb les segones
As said in \textcite{assfalg08:thesis}, the temporal coherence can be divided in two types. Firstly, there is  \emph{bitemporal data} which consists in storing the valid time during which an event is true and storing the transaction time in which the event is stored in the database. That is, two states -- true or false -- are annotated for each observation.  Secondly, there is \emph{time series data} which consists in describing a collection of data that depends from time. He also says that the first type can be expressed in terms of second type.


Obtaining information from environment is a complex task that has a user, either human or machine, as the final target as stated in figure \ref{fig:sistema_monitoratge}.
 Mainly, the processes between data acquisition and user information can be divided into three focus.


Monitoring systems recollect data from sensors eventually from events and periodically from measures, in the latter case some problems arise when monitoring can not be done at regular intervals. Then the recollected data is used in different application fields. There is intensive research in applying techniques to obtain information from this data.

Time series data mining analyses the storage of chronological data from which relevant information want to be retrieved. Sometimes, this extraction of information is also referred as knowledge discovery or artificial intelligence.
In the monitoring context, the data collected can be considered as a time series.

Database management systems are the computer systems implementing storage and retrieval of information. Time series data mining techniques must be implemented in these systems paying attention to their especial needs. Then, they are known as time series database management systems.








\subsection{Mineria de sèries temporals}

La mineria de sèries temporals (\emph{time series data mining}) és el procés d'anàlisis i descobriment de patrons en sèries temporals. És un camp recent que acompanya els processos de descobriment de coneixement a les bases de dades (\emph{knowledge discovery in databases}) \parencite{last01}.


La recerca en mineria de sèries temporals s'ha incrementat en la darrera dècada tal com esmenta \textcite{fu11} en un article recent. L'objectiu principal és reduir la mida de les sèries temporals per tal de processar amb menor temps les dades.
\citeauthor{fu11} resumeix l'estat actual de la mineria de sèries temporals de forma exhaustiva i conclou que encara queden molts problemes per investigar i resoldre. La recerca en tasques de mineria ha estat intensa però es necessita millorar la representació de sèries temporals, ja que es considera el pas que redueix la mida de les dades. A més a més, les sèries temporals es consideren un dels deu problemes prioritaris  en la mineria de dades \parencite{yangwu06}.

Segons \textcite{keogh02}, les quatre tasques que centren l'atenció de la recerca actual de sèries temporals són l'indexat (\emph{indexing}), l'agrupament (\emph{clustering}), la classificació (\emph{classification}) i la segmentació (\emph{segmentation}). A més, \citeauthor{keogh02} comparen  alguns algoritmes experimentals duts a terme en aquests camps per diversos autors. Recomanen a la comunitat de mineria de sèries temporals que segueixi el seu estudi com a punt de referència per avaluar el rendiment d'algoritmes similars.

Un pas comú previ a les quatre tasques anteriors és el de representació de la sèrie temporal. 
La representació de sèries temporals a trossos lineals (PLR, \emph{Piecewise Linear Representation}) \parencite{keogh97,keogh98} {é}s la més habitual actualment per ser més propera als usuaris ja que la visió de l'ésser humà segmenta les corbes en línies rectes.
Després de definir la PLR, \textcite{keogh00,keogh01} exploren altres representacions de sèries temporals per tal de reduir la dimensió d'una sèrie temporal i poder-la indexar més fàcilment. Proposen dues tècniques eficients en el càlcul: la \emph{Piecewise Aggregate Aproximation} i la \emph{Adaptive Piecewise Constant Approximation}, ambdues basades en la representació a trossos constants de la sèrie temporal. 
D'aquestes dues tècniques, \citeauthor{keogh00,keogh01} conclouen que mantenen una bona aproximació a la sèrie temporal i que a més  tenen molt menys cost de càlcul que altres de més complicades, com ara la \emph{Discrete Fourier Transform},  la  \emph{Singular Value Decomposition} o la \emph{Discrete Wavelet Transform}.




\subsubsection{Aplicacions de les sèries temporals}

L'anàlisi de sèries temporals abasta camps molt diferents com ara la predicció econòmica, la medicina, la meteorologia, la qualitat industrial, etc. En aquest context,  la mineria de sèries temporals tracta de gestionar co\l.leccions cronològiques de dades que tenen una mida gran i que contínuament estan en creixement.


L'ús de sèries temporals per analitzar les dades té com a objectius la comprensió del comportament de les variables observades, poder trobar-ne un model d'ajust i utilitzar-lo per a predicció o per a llaços de control.


El monitoratge de dades de sensors i el processat de les dades per tal d'aconseguir diagnosis, prognosis, predicció, fusió de dades i altres tasques d'anàlisi de sèries temporals són comunes en diferents camps com ara prognosis en models de degradació \parencite{yu11}, qualificació de l'estat dels sensors en vaixells \parencite{palmer07}, validació i reconstrucció de dades en xarxes de distribució d'aigua \parencite{quevedo10}, classificació de valors econòmics \parencite{dreyer95}, optimització de la planificació semafòrica \parencite{last11} o estimació del temps de viatge en autopistes \parencite{soriguera10}.



Un dels camps recents on la mineria de sèries temporals hi té molta aplicació és en les xarxes de sensors. L'abaratiment del maquinari permet monitorar el procés amb grans quantitats de sensors inte\l.ligents \parencite{jainagrawal05,gehrkemadden04}, els quals tenen processador i ràdio incorporats però tenen recursos limitats pel que fa a transmissió, energia i processat. Així doncs, el problema  de les xarxes de sensors rau en estudiar l'ús eficient d'aquests recursos, pel qual actualment trobem dues propostes.
Una solució consisteix en transmetre la informació a un node central comprimint-la tant amb agregacions (estadístics) com amb aproximacions \parencite{deligiannakis07}.
Una altra solució consisteix en tenir les dades distribuïdes en diferents sensors i quan es llança una consulta es decideix a on s'ha de resoldre, el qual s'anomena xarxa de sensors amb sistema distribuït de base de dades \parencite{gehrkemadden04}.


\subsection{Monitoratge de sèries temporals}

Els sistemes de monitoratge són un part important del control i interacció amb els processos. Principalment, aquests sistemes s'encarreguen de recollir dades, conèixer l'estat actual del procés i informar a l'usuari. Els sistemes de monitoratge constitueixen la part principal dels sistemes SCADA (\emph{Supervisory Control And Data Acquisition}). Un SCADA  és el sistema encarregat de recollir i centralitzar les dades de manera periòdica en el temps.



\begin{figure}[tp]
  \begin{center}
    \scriptsize 
    \input{imatges/monitoratge.tex}
  \end{center}
  \caption{Sistema de monitoratge: de l'adquisició de dades fins a informar l'usuari}
  \label{fig:sistema_monitoratge}
\end{figure}


El monitoratge es pot dividir en diferents blocs principals, els quals es mostren a la \autoref{fig:sistema_monitoratge}. Un monitor adquireix dades dels sensors. Les dades poden ser valors de mesures o estats del procés adquirits com a esdeveniments. 

Per una banda, les dades es poden utilitzar com a sortida del procés en els sistemes de control, els quals calculen els valors d'entrada dels accionaments.
Els llaços de control poden no estar tan centralitzats i habitualment resideixen a prop dels processos que controlen.

Per altra banda, els sistemes de monitoratge informen l'usuari de l'estat actual del procés, tot i que poden només avisar-lo amb alarmes senzilles com per exemple que no s'han pogut adquirir les dades o que el sensor ha disparat un esdeveniment crític. Per a usuari ens referim tant a un usuari humà com a un altre sistema supervisor amb inte\l.ligència artificial. 

Per a càlculs més complicats amb les dades, els sistemes de monitoratge utilitzen sistemes de gestió de bases de dades (SGBD). Mitjançant els SGBD, s'emmagatzemen les dades en bases de dades i posteriorment l'usuari les consulta per observar els històrics o per obtenir informació i descobrir coneixement a partir de les dades emmagatzemades.




\subsubsection{Problemes en el monitoratge}

Els sistemes de monitoratge habitualment reben problemes derivats de la reco\l.lecció de dades. Principalment distingim tres problemes.

El primer problema és la gestió d'una quantitat enorme de dades. 

Un sistema de monitoratge recull una gran quantitat de dades. Ara bé, l'usuari només en pot observar una petita part sincronitzat (\emph{online}) amb el procés i les dades emmagatzemades esdevenen massa grans per a ser processades posteriorment \parencite{keogh97}. No obstant, les dades han de ser analitzades ja que contenen informació interessant per a les aplicacions de les sèries temporals descrites a l'apartat anterior. S'observa que en el context de monitoratge les dades recollides es poden considerar com a sèries temporals ja que abstractament són una co\l.lecció de mesures.


El segon problema és el de la necessitat de censurar les dades, és a dir validar que les dades siguin correctes i en cas contrari rebutjar-les o reconstruir-les. 

\textcite{quevedo10} mostren la quantitat d'informació que hi ha en els sistemes complexos de telecontrol. Aquesta informació s'obté de diversos sensors distribuïts pel camp de mesura.
En el moment de reco\l.lecció de dades apareixen dos problemes: valors que en un instant de temps prefixat no s'han pogut recollir i valors que són falsos. En el procés de gestió de dades no es poden emmagatzemar les dades amb aquests dos tipus de problema ja que aleshores els registres històrics serien inconsistents. 
Així doncs, cal comprovar que les dades emmagatzemades són correctes, mitjançant un procés de validació, i modificar-les en el cas que siguin falses, mitjançant un procés de reconstrucció que estimi els valors correctes. Per exemple, \citeauthor{quevedo10} apliquen aquests processos de validació i reconstrucció a xarxes de distribució d'aigua.


El tercer problema és dóna quan el període de mostreig no és regular, és a dir que les dades no es recullen de manera uniforme en el temps, però les aplicacions no ho contemplen o volen treballar amb dades a intervals regulars, també anomenat dades equi-espaiades.

Una causa de la irregularitat es deu a que els sistemes de monitoratge informàtics sovint no són capaços de complir amb exactitud el temps de mesura sinó que presenten una certa variació, ja sigui deguda a retards en els sensors, les comunicacions o la planificació del monitoratge amb altres tasques concurrents del sistema operatiu. Aquesta causa, però, es pot atenuar si els sensors envien el temps de mesura juntament amb el valor mesurat.

Una altra causa es deu a que l'adquisició de dades prové de processos sotmesos a sistemes de control, els quals prenen el control de l'adquisició de dades. És a dir, el sistema de monitoratge ha d'obeir a les restriccions de temps imposades pels llaços de control. Aquestes restriccions són especialment crítiques en els sistemes de control en temps real ja que, aleshores, el sistema de monitoratge no pot imposar restriccions de temps diferents de les que s'han calculat per als llaços de control.  \textcite{lozoya08} mostren que s'ha de vigilar amb les entrades i sortides de les tasques periòdiques als sistemes en temps real. L'actuació dels sistemes de control es degrada quan no es té en compte que les operacions d'entrada i sortida estan subjectes a fluctuacions degudes al mostreig i a latències. Aquest problema afecta als sistemes de monitoratge en dues vessants.
Per una banda, els sistemes de monitoratge tenen una part de l'adquisició controlada per les aplicacions de control en temps real i per tant el període de mostreig resultant que veu el monitor no és regular. 
Per altra banda, les aplicacions que analitzen les dades obtingudes del monitoratge poden veure com la seva actuació es degrada si no consideren que l'adquisició de dades és irregular, el qual és similar a la regressió que s'observa \parencite{lozoya08} quan en el disseny d'un controlador discret es considera que es mostreja i s'actua periòdicament però en la implementació amb un sistema en temps real aquest pot fluctuar la periodicitat.




En conclusió, per tal de gestionar la complexitat derivada de la recollida de dades i també la complexitat de les consultes posteriors per part de l'usuari, els sistemes de monitoratge es recolzen en sistemes de gestió de bases de dades per gestionar l'emmagatzematge de les dades i la recuperació d'informació.




\subsection{Sistemes de gestió per sèries temporals}


Els sistemes de gestió de bases de dades (SGBD) són els sistemes informàtics que s'encarreguen d'emmagatzemar informació i de permetre a l'usuari consultar-la. A la secció \ref{sec:art:sgbd} es descriu com es formalitzen els SGBD, en aquest apartat ens centrarem en les necessitats que tenen les sèries temporals dels SGBD.


Les sèries temporals es diferencien d'altres tipus de dades en que els seus valors són dependents d'una variable: el temps. Com a conseqüència, qualsevol SGBD que hi vulgui tractar no ho pot fer de manera independent pels valors i pel temps; ha de conservar la coherència temporal.

Per poder aplicar les tècniques d'anàlisis de les sèries temporals de manera eficient cal disposar de SGBD específics. 
Durant l'última dècada, el maquinari informàtic ha millorat tant des del punt de vista tecnològic com de l'econòmic \parencite{deligiannakis07}, el qual ha facilitat l'adquisició de dades, per exemple amb xarxes de sensors, i alhora ha ampliat la capacitat per emmagatzemar les dades. 
Per tant, el volum de dades a tractar  en els SGBD cada cop esdevé més crític.

 
En els SGBD, el problema de grans quantitats de dades també es troba en altres camps com demostren \textcite{mylopoulos96} sobre la necessitat de grans bases de dades de coneixement. Els SGBD que tracten amb aquestes dades s'anomenen \emph{very large databases} (VLDB) i han de construir, accedir i gestionar la quantitat de dades de manera eficient.

\textcite{ogras06}  consideren que les solucions de les VLDB estan pensades per a bases de dades estàtiques. No obstant, observen que les sèries temporal normalment són dinàmiques, és a dir de naturalesa contínua i de mida no fitada. Conseqüentment, conclouen que les solucions tradicionals no es poden aplicar a causa de l'arribada seqüencial de les dades i que no es poden processar aleatòriament. 
Com a solució proposen resumir dinàmicament les sèries temporals amb les tècniques de compressió que s'apliquen en altres aplicacions on hi ha bases de dades grans.


\textcite{dreyer94} proposen desenvolupar SGBD que implementin operacions específiques per les sèries temporals, aleshores els anomenen sistemes de gestió de bases de dades per sèries temporals (SGST, \emph{time series database management systems}). Consideren que els altres SGBD no són adequats per tractar sèries temporals, tot i que després de comparar els SGBD per dades temporals i els SGST \parencite{schmidt95} troben que hi ha aspectes comuns entre els dos sistemes.
Els SGST estan optimitzats per gestionar les dades segons les operacions de temps i rotació, les quals són molt comunes en la gestió de les sèries temporals.  A més també cal controlar el creixement de la base de dades i la consulta ha de ser flexible i d'alta velocitat \parencite{keogh10:isax}. 

No obstant, fins a on coneixem, les propietats dels SGST no s'han investigat més enllà del model proposat \parencite{dreyer94}  ja que la recerca s'ha concentrat en tasques de mineria de dades. Per exemple \textcite{last01} estudien una metodologia general per descobrir coneixement en els SGST, tant pel que fa a 
patrons temporals %(groups of events ordered by time)
com a regles temporals%(cause-effect relationships between events)
, i breument noten l'existència d'un model pels SGST.

Ara bé, sí que hi ha hagut implementacions de sistemes específics per a sèries temporals. Alguns són només l'aplicació d'un algoritme d'anàlisi per un problema concret de sèries temporals però  altres  són més elaborats i es defineixen com a SGBD per a sèries temporals. A l'apartat següent se'n mostren exemples. 




\subsubsection{Implementacions actuals}

En aquest apartat resumim algunes aplicacions que considerem que implementem conceptes dels SGST.


\paragraph{Calanda} \textcite{dreyer94} proposen els requeriments de propòsit específic que han de complir els SGST i basen el model en quatre elements estructurals bàsics: esdeveniments, sèries temporals, grups i metadades, a banda de les bases de dades per sèries temporals. Implementen un SGST anomenat Calanda \parencite{dreyer94b,dreyer95,dreyer95b} que té operacions de calendari, pot agrupar sèries temporals i respondre consultes simples i ho exemplifiquen amb dades econòmiques. A \cite{schmidt95} es compara Calanda amb els SGBD temporals que operen amb sèries temporals. 




\paragraph{T-Time}  \textcite{assfalg08:thesis} mostra un SGST que pot cercar similituds calculades com a distàncies entre sèries temporals. Principalment, dues sèries temporals es marquen com a similars si la seva distància és menor que un llindar en cada interval. A partir d'aquest mètode dissenya algoritmes eficients que implementa en un programa anomenat T-Time \parencite{assfalg08:ttime}.


 
\paragraph{iSAX} \textcite{keogh08:isax,keogh10:isax} estudien l'anàlisi i l'indexat de co\l.lecions massives de sèries temporals. Descriuen que el problema principal del tractament rau en l'indexat de les sèries temporals i proposen mètodes per calcular-lo de manera eficient. El mètode principal que proposen està basat en l'aproximació a trossos constants de la sèrie temporal \parencite{keogh00}.  Ho implementen en una estructura de gestió de dades que anomenen \emph{indexable Symbolic Aggregate approXimation} (iSAX) \parencite{isax}. Les representacions de sèries temporals que s'obtenen amb aquesta eina permeten reduir l'espai emmagatzemat i indexar tant bé com altres mètodes de representació més complexos.




\paragraph{TSDS} \textcite{weigel10} noten la necessitat de mostrar les dades en tot el seu rang temporal i no només en un subconjunt com normalment s'ofereixen. Desenvolupen el paquet informàtic \emph{Time Series Data Server} (TSDS) \parencite{tsds} a on es poden introduir les dades de sèries temporals per posteriorment consultar-les per rangs temporals o aplicant-hi filtres i operacions.





\paragraph{RRDtool} RRDtool \parencite{rrdtool} {é}s un SGST molt usat per la comunitat de programari lliure. Projectes en diversos camps l'utilitzen com a SGBD, en els quals hi ha sistemes de monitoratge professionals, també en l'àmbit de programari lliure, com Nagios/Icinga \parencite{nagios,icinga} o el Multi Router Traffic Grapher (MRTG) \parencite{mrtg}. Aquests monitors transfereixen a RRDtool la responsabilitat de gestionar l'emmagatzematge i d'operar amb les dades, i així es poden centrar en l'adquisició de dades i la gestió d'alarmes. 
En l'evolució de RRDtool hi ha dues millores destacables. En primer lloc, \textcite{lisa98:oetiker} va separar el sistema de gestió de RRDtool de MRTG i el va dissenyar amb una estructura característica de Round Robin. En segon lloc,  \textcite{lisa00:brutlag} va estendre RRDtool amb algoritmes de predicció i detecció de comportaments aberrants. 
Actualment, s'està estudiant l'eficiència i rapidesa de RRDtool a processar sèries temporals. \textcite{carder:rrdcached} ha dissenyat una aplicació, \emph{rrdcached}, que millora el rendiment de RRDtool amb la qual s'aconsegueix fer funcionar  simultàniament sistemes amb grans quantitats de bases de dades RRDtool \parencite{lisa07:plonka}. \textcite{jrobin} han dissenyat una adaptació de RRDtool anomenada \emph{JRobin}. 
Finalment, és destacable l'ús emergent de RRDtool en entorns d'experimentació, com és el cas de \textcite{zhang07} i \textcite{chilingaryan10} que hi emmagatzemen dades experimentals per posteriorment predir o validar-les.


\paragraph{Cougar} \todo{cougar}

cougar databases

http://www.cs.cornell.edu/bigreddata/cougar/index.php




                                                                 At
                   Berkeley and Cornell, we’ve built two prototype
                   sensor network query processors (SNQPs)—
                   TinyDB (http://telegraph.cs.berkeley.edu/tinydb)
                   and Cougar (http://cougar.cs.cornell.edu)—that
                   run on a variety of sensor platforms. \parencite{gehrkemadden04}









\subsection{Visió general}

Els SGST actuals bàsicament resolen alguns problemes d'anàlisis de sèries temporals.
Però no solen atendre la relació entre la base de dades i el sistema de monitoratge, és a dir la manera com s'adquireixen les dades. En aquest pas intermig hi ha un sèrie de problemes, com per exemple forats, dades falses o irregularitat en els temps de mostreig, que cal gestionar correctament. Concretament un dels problemes que no s'atén és el de mostreig irregular ja que es considera que les mostres estan a intervals regulars (equi-espaiades) encara que els sistemes de monitoratge informàtics sovint no són capaços de complir-ho amb exactitud sinó que presenten una certa variació en els temps de mesura. 

RRDtool n'és una excepció ja que, per ser un sistema productiu, el processat de dades i emmagatzematge és més proper als sistemes de monitoratge. No obstant, està centrat en un tipus de dades particulars, les magnituds i els comptadors, i no té tantes operacions generals per les sèries temporals com els altres SGST.






\section[SGBD]{Sistemes de gestió de bases de dades}
\label{sec:art:sgbd}



According to \textcite{date}, a database is a computer container for a data collection. The computer systems that manage databases are called database management systems (DBMS). Their objective is to storage information and allow an user to add and retrieve this information. DBMS implement several operations such as create a database, add data, consult information, etc.

DBMS rely on formal theories called DBMS model, so a DBMS is an implementation of a model an a database can be seen as an instance of a DBMS. According to Date, ``a data model is an abstract definition, self contained and logical of the objects, operations and the rest that together constitutes the abstract machine where users interact. The objects allow modelling the data structure. The operations allow modelling the behaviour''.

A common DBMS are the ones based on the relational model, which is a consolidated mathematical model. In the context of DBMS, the relational systems set a goal that has had an important subsequent relevance. Mainly, the success of relational systems comes from having a consolidated mathematical model \parencite{date}.


Els sistemes de gestió de bases de dades (SGBD) 



L'any 1970 (i 1969) Codd va proposar un model relacional pels SGBD (SGBDR) que va revolucionar aquest àmbit. A partir de llavors els SGBDR han anat evolucionat, amb Date com a principal divulgador, fins a tenir una gran solidesa.

Avui dia, no hi cap implementació comercial que segueixi fidelment el model relacional \todo{citar date}, tot i que n'hi ha que caminen cap aquest camí (rel,TransRelational). Això ha contribuït a que per una banda hi hagi hagut una sèrie de malentesos i errors que Date s'ha encarregat de desmentir en nombroses publicacions \todo{citar, sobretot ddbunk} i per altra banda també ha contribuït en gran mesura a voler explorar altres models.              


Alguns SQL squirks (the possibility of nulls, the possibility of duplicate rows, the
fact of left-to-right column ordering, and so on), tema modernament discutit són els nulls [datesigmod2008]

Alguns malentesos també es deuen en l'ús de la mateixa terminologia amb significat diferent entre el model relacional i l'orientació a objectes, sobretot pel que fa als termes valor i variable. 

Relacional: tipus | representació |  valor, objecte, instància  | variable  | referència (adreça continguda en una variable) | operadors (de lectura i de modificació)
Objectes: tipus, classe (tipus amb atributs i mètodes), interfície | classe, atributs,propietats  |  valor, estat, objecte/instància immutable/estàtic |  valor, objecte/instància mutable/dinàmic  | variable | funcions,mètodes (funcions dins de classes) (purs o modificadors)

Aquesta confusió pot ser deguda a 'the object model' is closer to being a model of storage than it is to being a model of data. [date06]


Hi han hagut algunes propostes per apartar-se del model relacional, com pot ser recuperant models antics de xarxa (Xquery) o bé utilitzant el paradigma de programació d'objectes \todo{cites}, tot i que Date i altres consideren que no estan ben fundades i cap d'aquestes té la mateixa potència que el model relacional. Actualment s'està treballant en una implementació fidel al model relacional \todo{citar}. 

Date i altres consideren la possibilitat, tot i que remota, que es pugui definir un model més potent que el relacional però que no hi ha cap indici que cap definició ho estigui aconseguint ni de fet explorant. Per tant, aconsellen que cap aplicació de gestió de bases de dades no s'allunyi del model relacional.


El model relacional es basa en la lògica de predicats i la teoria de conjunts.





Com s'ha d'estendre el model relacional?

Date i altres consideren que el model relacional va evolucionat i no consideren que hi hagi hagut cap revolució des de la seva aparició. (Tot i que han definit una nova àlgebra relacional anomenada 'A' que fa molt bona pinta). Consideren que el model relacional està bastant completat i l'evoluciona en petites modificacions de comprensió. 

Només hi ha hagut un àmbit en el que han admès que s'havia d'estendre el model relacional i aquest és el de les dades temporals \todo{citar}.  'Support for interval-valued attributes (and hence for temporal databases) involves among other things support for
%generalized versions of the usual relational operators.' [date]            Note: Those “U_” operators are all defined in terms of two new relational operators called pack and unpack,
and those latter operators in turn are defined in terms of relation-valued attributes. As already noted, therefore, support
for interval-valued attributes relies on support for relation-valued attributes, at least conceptually. 




Així doncs no hi ha necessitat d'estendre el model relacional. Sí que hi ha necessitat, però, de tenir disponibles diversos tipus de dades. La creació de nous tipus de dades ha estat un tema de molta confusió ja que les 'suposades' implementacions del model relacional no ho han permès, o les extensions proposades per \textcite{stonebraker86} es consideren que són a nivell d'implementació i no les que es desitjarien a nivell de model, i sobretot ha fet que les implementacions basades en orientació a objectes tinguessin un gran impacte \todo{citar ODMG (object databases)}. Date ha rebutjat aquesta idea argumentant que el model relacional mai no ha fixat els tipus de dades disponibles sinó que ben al contrari mai n'ha parlat i per tant els tipus de dades han tingut total llibertat de creació; si bé el model relacional defineix que com a mínim hi ha d'haver el tipus booleà i el tipus relació.

El model relacional requereix que hi hagi un 'sistema' de tipus però diu molt poc de la naturalesa d'aquest sistema de tipus; això es coneix com a ortogonalitat entre les relacions i els tipus.



Així doncs, tenint en compte que segons Date el model relacional és complet, que no hi ha cap de tant potent i que l'ampliació de funcionalitat dels SGBDR s'ha de fer mitjançant la creació de nous tipus, el SGST hauria de contemplar aquestes idees. 

Primer s'hauria de veure que el cas de les sèries temporals no sigui com el cas de les dades temporals a on sí que s'ha necessitat estendre el model relacional.

Segon, s'hauria de considerar que el SGST són un nou tipus de dades en el model relacional i per tant el model relacional ja té tota la potència per una banda constituir SGBD i per altra banda definir i incorporar nous tipus.


Com es defineixen nous tipus complexos als SGBD?

En el cas que es descarti que el cas dels SGST presenta els mateixos problemes que les dades temporals i per tant els SGST han d'esdevenir un tipus de dades, cal preguntar-se com són els tipus de dades al model relacional.

Concretament el model relacional només defineix què es un tipus de dades però dóna llibertat a la seva creació. Això és un gran avantatge. En els cas de tipus de dades senzills es defineixen amb una bona estructura i ja està però què passa quan es vol definir un nou tipus de dades complex?

Cal recercar com s'han definit nous tipus de dades complexos. Els principals problemes es donen que el tipus és complex i forma una entitat de per sí. És a dir que definir un tipus sèrie temporal no és trivial. Aleshores, com cal procedir?



Sobre la necessitat de modelar els tipus.

Cal definir un model pel tipus que volem dissenyar.
De fet, volem dissenyar un SGST. És a dir, un tipus que conformi pròpiament un SGBD. Per tant, utilitzarem les mateixes eines que es fan servir per modelar els SGBDR per a poder modelar el nostre SGST. Com que s'hauran utilitzat les mateixes eines, el SGST podrà esdevenir perfectament un tipus de dades pels SGBDR.

En resum, per a definir nous tipus complexes cal modelar-los com a entitat pròpia, fent un símil amb el model relacional. Això no vol dir, però, que un cop modelats constitueixin de per sí un nou model per als SGBD, sinó que queden dins dels SGBDR. \todo{caldria} elaborar més i trobar alguna pista de com definir nous tipus complexos, stonebraker86 només indica com es va estendre postgresql amb operadors de creació de nous tipus però no com s'han de modelar els nous tipus.

Volem crear un nou model de SGBD, Date ens diu que només hi ha el model relacional, per tant hem d'utilitzar el model relacional per a definir el nostre nou model.


Sobre sèries temporals i temporal data\cite{assfalg08:thesis}

Els SGBD relacionals són capaços d'implementar el primer tipus de coherència, les \emph{bitemporal data}; llavors es classifiquen sota el nom de bases de dades temporals, \cite{date,wiki:temporal_database}. Però el model relacional no és suficient pel segon tipus: les sèries temporals. Tot i que en principi no hi hauria cap problema a utilitzar una base de dades relacional per a sèries temporals, enteses com a dades històriques, la pròpia naturalesa dels sistemes relacionals  dificulta les operacions necessàries. 


Relational DBMS can implement \emph{bitemporal data}. Then they are known as temporal databases \parencite[ch.\ 22]{date}. However, relational DBMS are not adequate for time series. The relational model is capable to describe time series when they are thought as historical data but the design of relational DBMS would difficult the operations  needed by time series \parencite{schmidt95}. Theses time series operations are mainly based in time ranges and need time zones conversions, rotations of table registers and file size maintained at bounded levels.


A TSMS could be implemented in a relational system considering the improvement proposed by \textcite{stonebraker86} that allows the inclusion of new types and operations to relational DBMS. However, it is difficult to evaluate this solution as there is no consolidated data model  for time series. 

After comparing temporal DBMS and TSMS \parencite{schmidt95} they ask whether temporal DBMS and TSMS will meet or they need to be manage by different systems despite both working with time aspects.


\subsection{Sobre implementació i model}

Diferència entre implementació i model segons Date. Això aporta independència de dades; molt important: els models no han de tenir detalls d'implementació ni parlar d'objectius de rendiment.
Actualment hi ha certa confusió sobre la independència entre el model i la implementació, com es veu tot seguit.


Recentment ha aparegut un nou corrent en l'àmbit dels SGBD que s'anomena NoSQL (Not Only SQL). Diuen que volen sobrepassar les limitacions dels SGBD relacionals. Crec que aquí hi ha un malentès, deuen voler dir sobrepassar les limitacions de les implementacions comercials del model relacional, moltes vegades referides com a SQL pel llenguatge de consulta que utilitzen. En alguns casos a NoSQL es confon implementació amb model ja que es parla de que NoSQL millora el rendiment dels SGBD però en el model mai es parla de rendiment. 

És més, en Date es posiciona en contra de SQL per ser una mala implementació del model relacional, i ha desenvolupat el llenguatge TutorialD que precisament no és SQL. 


Tornant a NoSQL, aquest no genera cap conflicte amb el model relacional. Sovint NoSQL critiquen els SGBD relacionals per voler ser 'one size fits all' \parencite{stonebraker07,stonebraker09} però que cada aplicació té els seus requisits i per tant una mateixa implementació no pot ser bona per a tots el camps. El model relacional no hi pot estar més d'acord amb aquesta afirmació: un model, infinites implementacions. Així doncs aquí hi ha el malentès per culpa de les implementacions errònies de SQL. El model relacional continua sent vàlid i admet qualsevol implementació: ha admès durant anys les denominades SQL, a les quals ha criticat per ser males implementacions, i ara pot admetre les NoSQL. En principi, el model relacional, per ser un model de 'tots' els SGBD, també descriu els productes NoSQL.

No obstant, caldria observar si els productes NoSQL pateixen el mateix mal que els SQL: fer una mala implementació del model relacional. TuotialD és, o pretén ser, una implementació completa del model relacional tot i que a nivell acadèmic.
Ara bé, una implementació d'un SGBD que vulgui  obtenir un bon rendiment en una determinada aplicació potser no pot implementar el model relacional complet sinó que només una part; aleshores aquesta implementació no es pot anomenar SGBD relacional? És a dir, a què s'anomena SGBD relacional? -Un que es pot modelar amb el model relacional: tots(en el moment actual)? -Un a on l'usuari hi veu clarament els conceptes del model relacional.

Actualment sembla que la comunitat informàtica s'ha centrat en les implementacions (garantir propietats ACID, no garantir-les, optimització de consultes, emmagatzematge de grans volums de dades, consultes via web, bases de dades distribuïdes, gastar el mínim d'energia, etc.) \parencite{stonebraker07,stonebraker10}, la qual cosa és excel·lent per a disposar un SGBD adequat a cada aplicació i per tant ha de continuar treballant en aquest camí. Ara bé, sembla que ha oblidat que hi ha un model, el relacional, que descriu com ha de ser un SGBD per a obtenir la màxima potència de cara a la gestió de dades per part de l'usuari i que encara no s'ha trobat cap altre model que tingui la mateixa potència. 







\section{Preguntes}

El llenguatge dels SGBD, per exemple D, és declaratiu (what) i no procedural/imperatiu (how). Com lliguen els SGBD amb els llenguatges de programació declaratius, per exemple amb la programació lògica amb Prolog? Concretament, com lliga Prolog amb el concepte de SGBD? Té la mateixa potència un SGBD que Prolog?
 Es pot veure Prolog com un SGBD?

http://stackoverflow.com/questions/2117651/difference-between-sql-and-prolog





%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "main"
%%% End: 

% LocalWords:  monitoratge
