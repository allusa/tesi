\subsection[SGST]{Sistemes de gestió de sèries temporals (SGST)}




\begin{frame}{SGST - Estructura}


\begin{columns}

  \column{5cm}

  Conceptes:
  \begin{itemize}

  \item Instant de temps
  \item Valor
  \item Mesura
  \item Sèrie temporal

  \end{itemize}



  \column{5.1cm}
  Exemple:
  \begin{center}
    $S=\{(3,1), (4,3), (6,2), (9,1)\}$\\[1em]

    \begin{tabular}[h]{|c|c|}\hline
      $t$ & $v$ \\\hline
      3 & 1 \\
      4 & 3 \\
      6 & 2 \\
      9 & 1 \\\hline
    \end{tabular}

  \end{center}

\end{columns}

\begin{block}{Una sèrie temporal és un conjunt de mesures sense temps repetits}
  \begin{itemize}
  \item El temps marca l'ordre de les mesures
  \item Dues igualtats possibles: semitemporal o temporal
  \end{itemize} 
\end{block}

\end{frame}




\begin{frame}{SGST - Operacions}

% \begin{block}{Atribut de temps}
% El comportament d’una sèrie temporal pot tenir naturaleses diferents
% \end{block}



  Es distingeixen tres grups d'operacions segons la interpretació de l'atribut de temps: 
  \begin{itemize}
  \item Conjunt: pertinença, inclusió, màxim, suprem, \textbf{unió},
    diferència, intersecció, diferència simètrica, selecció,
    projecció, reanomena, producte, \textbf{junció} i computacionals.
  \item Seqüència: interval, successió i \textbf{concatenació}.
  \item Funció temporal: interval temporal, selecció temporal,
    concatenació temporal i \textbf{junció temporal}.
  \end{itemize}


\end{frame}


\begin{frame}{SGST: unió}

\begin{center}

Unió, dues possibilitats:

\def\escala{0.9}

\def\nodeA{node [above left=0.5cm and 0.1cm] {$S_1$}}
\def\nodeB{node [above right=0.5cm and 0.1cm] {$S_2$}}
\def\nodeT{}
% Definition of circles
\def\firstcircle{(0,0) circle (1.5cm)}
\def\secondcircle{(0:2cm) circle (1.5cm)}
\def\thirdcircle{(0:1cm) circle (1.11cm)}

\colorlet{circle edge}{blue!50}
\colorlet{circle area}{blue!20}

\tikzset{
  filled/.style={fill=circle area, draw=circle edge, thick},
  outline/.style={draw=circle edge, thick},
  every node/.style={transform shape}
}

%\setlength{\parskip}{5mm}



%Set A or B
\begin{tikzpicture}[scale=\escala]
  \draw[filled] \firstcircle \nodeA;
    \begin{scope}
        \clip \secondcircle;
        \draw[filled, even odd rule] \firstcircle \nodeA
                                 \secondcircle 
                                 \thirdcircle;
   \end{scope}
    \draw[outline] \firstcircle
                   \secondcircle \nodeB
                   \thirdcircle \nodeT;

   \node[anchor=south] at (current bounding box.north) {$S_1 \cup S_2$};
\end{tikzpicture}
%Set temporal A or B
\begin{tikzpicture}[scale=\escala]
    \draw[filled, even odd rule] \firstcircle \nodeA
                                 \secondcircle \nodeB
                                 \thirdcircle \nodeT;
    \node[anchor=south] at (current bounding box.north) {$S_1 \cup^t S_2$};
\end{tikzpicture}



\begin{definition}[Unió]
  $S_1 \cup S_2 = \{m | m \in S_1
  \vee (m \in S_2 \wedge m \not\in^t
  S_1 )\}$
\end{definition}


\begin{definition}[Unió temporal]
  $S_1 \cup^t S_2 = \{ m | (m \in S_1
  \wedge m \in S_2 ) \vee ( m \in S_1 \wedge m
  \not\in^t S_2) \vee (m \in S_2 \wedge m
  \not\in^t S_1 )\}$
\end{definition}




\end{center}


\end{frame}


\begin{frame}{SGST: concatenació}

\begin{center}


Concatenació: unió per seqüències que exclou l'interval de la segona

  \begin{tikzpicture}[baseline=(current bounding box.center)]
    \begin{axis}[
        timeseriesrel,
        width=0.5\textwidth,
        title=,
        xmin=0,
        xmax=11,
        ymin=0,
        xtickmin=0,
        xtickmax=0,
        ytickmin=0,
        ytickmax=0,
        try min ticks=6,
        ]
    \addplot[mark=*,blue] coordinates { 
        (3,2) 
        (4,3)
        (6,2)
        (9,1.5)
    };
    \addlegendentry{$S_1$};

    \addplot[mark=*,orange] coordinates { 
        (-1,1) 
        (2,0.5)
        (3,1)
    };
    \addlegendentry{$S_2$};

    \addplot[mark=*,orange] coordinates { 
        (9,0.75) 
        (11,1)
        (13,0.5)
    };

    \addplot[mark=*,orange] coordinates { 
        (3,1) 
        (6,0.5)
        (9,0.75)
    };


    \end{axis}
   \end{tikzpicture}
  \begin{tikzpicture}[baseline=(current bounding box.center)]
    \begin{axis}[
        timeseriesrel,
        width=0.5\textwidth,
        title=$S_1||S_2$,
        xmin=0,
        xmax=11,
        ymin=0,
        xtickmin=0,
        xtickmax=0,
        ytickmin=0,
        ytickmax=0,
        try min ticks=6,
        ]
    \addplot[mark=*,blue] coordinates { 
        (3,2) 
        (4,3)
        (6,2)
        (9,1.5)
    };
    \addlegendentry{$S_1$};

    \addplot[mark=*,orange] coordinates { 
        (-1,1) 
        (2,0.5)
        (3,1)
    };
    \addlegendentry{$S_2$};

    \addplot[mark=*,orange] coordinates { 
        (9,0.75) 
        (11,1)
        (13,0.5)
    };

    \addplot[mark=*,lightgray] coordinates { 
        (3,1) 
    };
    \addplot[mark=*,lightgray] coordinates { 
        (9,0.75) 
    };

    \end{axis}
   \end{tikzpicture}



\begin{definition}[Concatenació]
   $S_1 ||  S_2 = S_1 \cup ( S_2 - S_2[T(\inf
S_1),T(\sup S_1)] )$
\end{definition}



\end{center}
\end{frame}



\begin{frame}{SGST - Funció temporal de representació}


  Funció temporal de representació $S(t): \text{Temps} \longrightarrow \text{Valors}$

\begin{center}

\begin{tikzpicture}[scale=0.6, every node/.style={transform shape}]

      \tikzset{
        mynode/.style={rectangle,rounded corners,draw=black, 
          very thick, inner sep=1em, minimum size=3em, text centered,
          groc},
        myarrow/.style={->, shorten >=1pt, thick},
        mylabel/.style={text width=7em, text centered},
        groc/.style={top color=white, bottom color=yellow!50},
        verd/.style={top color=white, bottom color=green!50},
        roig/.style={top color=white, bottom color=red!50},
      }  


 \node[mynode, roig] (s) {\parbox{1.5cm}{Sèrie temporal}};

 \node[mynode, left= 1.75cm of s] (d) {\parbox{1.5cm}{Funció discreta}};
 \node[mynode, left= 1.75cm of d] (c) {\parbox{1.5cm}{Funció contínua}};
 \draw[->] (c) -- (d) node[above,midway] {mostreig}; 
 \draw[->] (d) -- (s) node[above,midway] {modelada} node[below,midway] {per}; 

 \node[mynode, right= 2.2cm of s] (r) {\parbox{2.9cm}{Funció temporal de representació S(t)}};
 \draw[->] (s) -- (r) node[above,midway] {mètode de} node[below,midway] {representació}; 


\node[below= of c.west] (a) {};
\node[below= of d.east] (b) {};
\draw[|-|] (a) -- (b) node[below,midway] {Naturalesa de funció temporal};
\end{tikzpicture}
\end{center}







  Diversos mètodes de representació:

  \begin{columns}

  \column{3cm}
  \begin{tikzpicture}[baseline=(current bounding box.center)]
    \begin{axis}[
        timeseriesrel,
        title=$S^\text{dd}$,
        xmin=0,
        xmax=11,
        xtickmin=0,
        xtickmax=10,
        try min ticks=6,
        ]
    \addplot[mark=*,blue,ycomb] coordinates { 
        (3,1) 
        (4,3)
        (6,2)
        (9,1)
    };

    \addplot[mark=o,blue,only marks] coordinates { 
        (3,0)
        (4,0)
        (6,0)
        (9,0)
    };


    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{0.5}{0}}%
      \pgfpathlineto{\pgfplotspointaxisxy{12}{0}}%
      \pgfsetarrowsstart{latex}
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }


    \end{axis}
   \end{tikzpicture}


  \column{3cm}
  \begin{tikzpicture}[baseline=(current bounding box.center)]
    \begin{axis}[
        timeseriesrel,
        title=$S^{\text{zohe}}$,
        xmin=0,
        xmax=11,
        xtickmin=0,
        xtickmax=10,
        try min ticks=6,
        ]
    \addplot[mark=*,blue,const plot mark right] coordinates { 
        (3,1) 
        (4,3)
        (6,2)
        (9,1)
    };

    \addplot[mark=o,blue,only marks] coordinates { 
        (3,3)
        (4,2)
        (6,1)
        (9,0)
    };

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{9}{1}}%
      \pgfpathlineto{\pgfplotspointaxisxy{9}{0}}%
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{9}{0}}%
      \pgfpathlineto{\pgfplotspointaxisxy{12}{0}}%
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{3}{1}}%
      \pgfpathlineto{\pgfplotspointaxisxy{0.5}{1}}%
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \end{axis}
   \end{tikzpicture}


  \column{3cm}
  \begin{tikzpicture}[baseline=(current bounding box.center)]
    \begin{axis}[
        timeseriesrel,
        title=$S^\text{foh}$,
        xmin=0,
        xmax=11,
        ymin=0,
        xtickmin=0,
        xtickmax=10,
        try min ticks=6,
        ]
    \addplot[mark=*,blue] coordinates { 
        (3,1) 
        (4,3)
        (6,2)
        (9,1)
    };

    \addplot[lightgray] coordinates { 
        (3,1) 
        (4,0)
    };
     \addplot[lightgray] coordinates { 
        (3,0)
        (4,3)
        (6,0)
    };
    \addplot[lightgray] coordinates { 
        (4,0)
        (6,2)
        (9,0)
    };
    \addplot[lightgray] coordinates { 
        (6,0)
        (9,1)
    };



    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{9}{1}}%
      \pgfpathlineto{\pgfplotspointaxisxy{12}{1}}%
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{3}{1}}%
      \pgfpathlineto{\pgfplotspointaxisxy{0.5}{1}}%
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \end{axis}
   \end{tikzpicture}

 \end{columns}
 
\end{frame}



\begin{frame}{SGST - Funció temporal de representació ZOHE}

\begin{center}


  \begin{tikzpicture}[baseline=(current bounding box.center)]
    \begin{axis}[
        timeseriesrel,
        title=$S^{\text{zohe}}$,
        xmin=0,
        xmax=11,
        xtickmin=0,
        xtickmax=10,
        try min ticks=6,
        ]
    \addplot[mark=*,blue,const plot mark right] coordinates { 
        (3,1) 
        (4,3)
        (6,2)
        (9,1)
    };

    \addplot[mark=o,blue,only marks] coordinates { 
        (3,3)
        (4,2)
        (6,1)
        (9,0)
    };

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{9}{1}}%
      \pgfpathlineto{\pgfplotspointaxisxy{9}{0}}%
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{9}{0}}%
      \pgfpathlineto{\pgfplotspointaxisxy{12}{0}}%
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \pgfplotsextra{%
      \pgfpathmoveto{\pgfplotspointaxisxy{3}{1}}%
      \pgfpathlineto{\pgfplotspointaxisxy{0.5}{1}}%
      \pgfsetarrowsend{latex}
      \pgfsetcolor{blue}
      \pgfusepath{stroke}%
    }

    \end{axis}
   \end{tikzpicture}


\begin{definition}[Funció de representació ZOHE]
    $S^{\text{zohe}}(t) = $ \\
    % = & \sum_{t\in \mathbf{T}} V(m) \glssymbol{not:Ia}_{\big(T(\glssymbol{not:sgst:prev}(m)),T(m)\big]}(t) \\
    $\mbox{}\quad \begin{cases}
      0 & \text{si }  t > T(\max(S)) \\
      V(m) & \text{si } t\in \big(T(\text{ant}(m)),T(m)\big],\; m \in S
    \end{cases}$
\end{definition}





% \begin{definition}[Interval temporal ZOHE]
%     $S[s,t]^{\text{zohe}} = S(s,t] \cup \{m\}$ on $m=(t,v)$
%     i $v= V(\inf( S[t,+\infty] ))$
% \end{definition}
\end{center}

\end{frame}



\begin{frame}{SGST: Junció i junció temporal }
\begin{center}
\begin{definition}[Junció]
 $S_1 \Join S_2 = \{ (t,v_1,v_2) |
  (t,v_1) \in S_1 \wedge (t,v_2) \in S_2  \}$
\end{definition}
{\small
    \begin{tabular}[h]{|c|c|}
    \multicolumn{2}{c}{$S_1$} \\ \hline
      $t$ & $v_1$ \\\hline
      1 & 5 \\
      2 & 5 \\\hline
    \end{tabular}
    \begin{tabular}[h]{|c|c|}
    \multicolumn{2}{c}{$S_2$} \\ \hline
      $t$ & $v_2$ \\\hline
      1 & 6 \\
      2 & 6 \\\hline
    \end{tabular}$\quad\longrightarrow\quad$
    \begin{tabular}[h]{|c|c|c|}
    \multicolumn{3}{c}{Junció} \\ \hline
      $t$ & $v_1$ & $v_2$ \\\hline
      1 & 5 & 6  \\
      2 & 5 & 6\\\hline
    \end{tabular}
}


  \begin{definition}[Junció temporal]
  $S_1 \Join^r S_2 = \{ (t,v_1,v_2) |$\\
{\hfill
  $t \in
  (\Pi_{\text{t}}(S_1) \cup
  \Pi_{\text{t}}(S_2))\wedge (t,v_1) \in S_1[t,t]^r
  \wedge (t,v_2) \in S_2[t,t]^r \}$}
\end{definition}
{\small
\begin{tabular}[h]{|c|c|}
    \multicolumn{2}{c}{$S_1$} \\ \hline
      $t$ & $v_1$ \\\hline
      1 & 5 \\
      2 & 5 \\\hline
    \end{tabular}
    \begin{tabular}[h]{|c|c|}
    \multicolumn{2}{c}{$S_2$} \\ \hline
      $t$ & $v_2$ \\\hline
      1 & 6 \\
      3 & 6 \\\hline
    \end{tabular}$\;\longrightarrow\;$
    \begin{tabular}[h]{|c|c|c|}
    \multicolumn{3}{c}{Junció temporal} \\ \hline
      $t$ & $v_1$ & $v_2$ \\\hline
      1 & 5 & 6  \\
      2 & 5 & ?  \\
      3 & ? & 6\\\hline
    \end{tabular}$\quad$
    \begin{tabular}[h]{|c|c|c|}
    \multicolumn{3}{c}{Junc.~temp.~ZOHE} \\ \hline
      $t$ & $v_1$ & $v_2$ \\\hline
      1 & 5 & 6  \\
      2 & 5 & 6  \\
      3 & $\infty$ & 6\\\hline
    \end{tabular}
}
 


 \end{center}
%Cal utilitzar mètode de representació per a calcular `?', o bé deixar-los indefinits.


\end{frame}


\begin{frame}{SGST: Patologies}


  \begin{itemize}

    \item Sincronització de rellotges \parencite{kopetz11:realtime}
    \item Dades desconegudes: Validació, rebuig, reconstrucció\dots
    \item Quantitat enorme de dades
    \item Regularitat de les sèries temporals
  \end{itemize}
  

\end{frame}



%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "defensa"
%%% End: 

%  LocalWords:  SGST
