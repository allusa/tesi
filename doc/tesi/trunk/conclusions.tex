\chapter{Conclusions}


\todo{fer}



\subsubsection{Resum del model de multiresolució}
El model de dades multiresolució s'estructura a partir de \emph{sèries temporals multiresolució} com a conjunt de \emph{subsèries resolució}, les quals  acumulen temporalment les mesures en un \emph{buffer} per tal de tractar-les abans d'emmagatzemar-les  a un \emph{disc}. El tractament principal consisteix en canviar els intervals de temps entre mesures amb l'objectiu de compactar la informació de la sèrie temporal.
Així doncs, la sèrie temporal queda emmagatzemada com una sèrie temporal multiresolució en intervals de temps diferents, repartits en les subsèries resolució. 

Pel que fa a les operacions, és indispensable que el model multiresolució pugui fer aquests canvis d'intervals de temps, els quals s'aconsegueixen amb les operacions d'\emph{agregació} i \emph{consolidació}. En el model de dades multiresolució es defineixen els operadors específics per a aquestes tasques anomenats \emph{agregadors d'atributs}



\subsubsection{Resum SGSTM?}

Aquest capítol s'acaba amb un resum dels conceptes exposats en el
model de dades. Una base de dades per sèries temporals multiresolució
és un sistema informàtic d'emmagatzematge d'una sèrie temporal entesa
com una una co\l.lecció de dades mesurades en diferents instants de
temps.

A la base de dades, la sèrie temporal queda estructurada com s'ha esquematitzat a  la figura~\ref{fig:model:bdstm}. És una forma compacta d'emmagatzemar la sèrie temporal de manera que queda repartida segons diferents funcions d'interpolació i períodes de mostreig. Aquest repartiment té lloc en els diferents discs resolució, els quals fan ús del seu buffer per interpolar les mesures i fan ús del seu disc per consolidar-les. 

El conjunt de discs resolució constitueixen la part principal d'una base de dades multiresolució tot i que hi pot haver variacions en aquest esquema, com per exemple un buffer d'entrada de mesures comú que regularitzi la sèrie temporal des d'un principi i simplifiqui els interpoladors que són complicats quan es fa el pas de sèrie temporal no regular a regular.


En el capítol \todo{? més endavant}
 utilitzant el llenguatge de programació Python es dissenya, a nivell acadèmic, un sistema de gestió de bases de dades que implementa el model de dades tal com s'ha definit en aquest capítol.


En resum, a partir del model de dades multiresolució descrit en aquest capítol per una banda es poden estudiar quin efecte té una configuració determinada de paràmetres i per altra banda es poden dissenyar sistemes de gestió de bases de dades assegurant que implementen el model i per tant que tenen el funcionament desitjat.






\subsection{Highlights del nostre treball}
\todo{o potser posar-los a la intro?}

Potser la gran diferència que marca el model de multiresoució respecte altres treballs és:

* Si bé els streams agreguen estadístics de les dades, la multiresolució té en compte l'evolució d'aquests estadístics al llarg del temps, cosa que lliga més amb l'àmbit del monitoratge. És a dir, tenim en compte el temps, altres projectes només avaluen el moment present.  However, as a lossy storage solution, the
  multiresolution schema has to be decided for each application
  planning what approximate queries will be needed to resolve.

* Si bé l'orientació a agregadors amb stream és molt interessant, el model es manté genèric per a poder calcular amb qualsevol funció d'agregació.

* Es tenen en compte les irregularitats de mostreig de les series temporals

* Es modelitza fortament el concepte de funció de representació de les sèries temporals i així es pot tenir en compte la semàntica de cada sèrie temporal, ja que en cada agregació té molta afectació, per exemple quan les dades monitorades tenen naturalesa de comptadors als quals RRDtool s'hi ha especialitzat.
 We formalise the representation function concept of time series
  in order the user can define different operators considering the
  semantics of time series in different contexts; especially they
  behave differently in aggregation operations, i.e. RRDtool specific counter
  time series aggregations. Furthermore, we formalise representation
  as an independent object of the main model.

* Els altres treballs se centren en el problema de recuperar el senyal original, ho demostra el fet que avaluin el resultat amb SSE (per mínims quadrats). Nosaltres enfoquem el problema en un domini més genèric de les consultes aproximades on volem avaluar el resultat per si respon correctament a les consultes, encara que el senyal recuperat no s'assembli gens a l'original.

\begin{itemize}
\item Our model considers the time irregularities sampling of time
  series. Moreover, it operates coherently with the time dimension of
  time series.

\item We describe the model firmly rooted on relational algebra as a formal
  theory for information systems.

\end{itemize}









\subsubsection{Què fer sense coneixements a priori}

Una base de dades multiresolució requereix tenir un coneixement de l'entorn a priori per a poder establir-ne l'esquema de multiresolució. Perquè un cop establit aquest esquema només s'emmagatzemen els atributs seleccionats i es perd informació sobre la sèrie temporal original.

Per això si la informació és crítica una bona estructura de base de dades consistiria en un magatzem total de la informació recollida i un magatzem multiresolució amb un esquema inicial. La base de dades multiresolució s'utilitzaria per a les consultes habituals que s'haguessin de resoldre de forma ràpida, en cas que les respostes no fossin suficients es podria anar a buscar la informació al magatzem total, a on la resolució de la consulta tindria un temps més elevat. 
Aleshores si aquestes consultes esdevinguessin habituals es podria definir un nou esquema de multiresolució i iniciar-lo amb les dades del magatzem total (això tardaria un cert temps) per a després executar-hi les consultes de forma ràpida.


Tot i així cal notar que en moltes aplicacions les dades històriques
són prescindibles i es pot canviar l'esquema de multiresolució sense
gaires preocupacions. Per exemple un sistema de monitoratge de la
bateria que tenim disponible al portàtil.

També en altres aplicacions el que volem es resoldre una consulta del tipus la mitjana puja o baixa. En això el model de multiresolució hi encaixa molt bé ja que es base en calcular agregacions i després treballar sobre aquestes. 



\subsubsection{Arquitectura RRDtool}


RRDtool té una estructura multiresolució amb un buffer únic d'entrada
i buffers orientats a stream; segons havíem avaluat anteriorment \parencite{llusa11:tfm}.


S'ha d'estudiar com es fan les consultes a RRDtool

\url{http://en.wikipedia.org/wiki/RRD_Editor}



Podem considerar que:

1. RRDtool és un SGBD NoSQL?
2. Nosaltres n'hem formalitzat un model lògic?
3. És el primer model lògic per a un producte NoSQL?
4. Aquest model lògic es pot implementar tant en productes relacionals com amb NoSQL? i per tant es demostra que els models lògics són extremadament potents i necessaris?
5. La implementació que fa RRDtool és molt eficient per a un determinat camp d'aplicació?
6. La implementació relacional seria molt genèrica i propera al model però no tan eficient? més aviat subjecte a l'eficiència genèrica dels SGBDR?
7. Els SGST són uns SGBD més simples? no tenen tantes actualitzacions de valors, no hi ha tantes relationships en l'esquema... Els SGST només es preocupen de sèries temporals i per tant només d'un tipus de dades en concret, això no obstant tal com s'ha dissenyat el model aquest tipus de dades es pot implementar en SGBD més complexos. 


\subsubsection{Rapidesa/eficiència dels SGSTM}

Aquí només hem definit el nivell lògic i les implementacions que volem
fer només són per exemplificar el model lògic; és a dir que les farem
tan properes al model lògic com es pugui. La rapidesa/eficiència dels
SGSTM només la podríem avaluar a les implementacions; a on es podrien
aplicar models d'implementacions que se saben eficients. Com que no és
el cas, no té sentit avaluar ni comparar l'eficiència de les nostres
implementacions amb altres de semblants.




\subsubsection{Comparació de SGST i SGSTM amb altres models del mercat}


SGST:

* Respecte dels models de seqüència: 

  - una seqüència es defineix com una funció el domini de la qual és un conjunt comptable i totalment ordenat. La definició genèrica que fem del temps no és un conjunt comptable i per tant creiem que un model genèric de sèries temporals no es pot descriure amb comoditat des de les seqüències. 

  - generalment s'assumeix que la distància entre els elements d'una seqüència és regular

  - els instants de temps en una sèrie temporal no es poden canviar, en canvi en una seqüencia els índexs només marquen l'ordre i no significat de posicionament en un marc de referència.






\subsubsection{Lapses de buffer o no lapses}

Podem tenir esquemes de multiresolució a on les diferents subsèries
resolució coincideixin en els temps recents o a on no coincideixin:
les subsèries més velles acabin on comencen les noves de manera
semblant a l'estructura de buffers enllaçats.

La primera opció pot servir per quan hi ha moltes dades tenir diferents resums preparats per a ser visualitzats, així permet triar ràpidament entre diferents zooms de les dades.

La segona opció serveix per aprofitar al màxim la resolució i l'espai d'emmagatzematge, sense que cap subsèrie desi informació per al mateix interval de temps. Així permet conservar una sèrie temporal al llarg del seu temps amb diferents resolucions. També pot servir per usar la informació d'altres buffers i no haver de repetir emmagatzematge de buffers.







\chapter{Treball futur}






* El temps pot ser vist com un valor amb incertesa. Aleshores què passa amb les operacions?



* Agregacions en el domini freqüencial



\subsubsection{Operacions habituals en les sèries temporals}


\paragraph{Semblança de dues sèries temporals}


Similarity Measures for Time Series

Hi ha varis mètodes, [keogh08:vldb] n'avalua uns quants i els generalitza amb:

Given two
time series T1 and T2 , a similarity function Dist calcu-
lates the distance between the two time series, denoted by
Dist(T1 , T2 ).

Exemplifiquem amb la distància euclídia, [keogh08:vldb] nota que és
competitiva amb les altres.

Distancia euclídia segons [faloutsous94-sigmod]


\[
D(S,Q) = \left( \sum_{i=1}^{l} (S[i]-Q[i])^2  \right)^{1/2}
\]

\begin{gather*}
  D: S \times Q \longrightarrow v: \\
  S' = map(fusio(S,Q),(t,v_1,v_2)\mapsto(t,(v_1-v_2)^2)), \\
  S'' = fold(quad,(0,0),(t^1,v^1,t^2,v^2)\mapsto(t^1,v^1+v^2)), \\
  v = \sqrt{V(m)}:m\in S''
\end{gather*}


S i Q haurien de ser regulars entre elles, sinó cal aplicar una fusió amb representació/interpretació.

Amb la multiresolució la fusió es pot fer de forma eficient. Per altra banda, es podria crear un disc resolució amb agregador de semblança.


\paragraph{Semblança de dues sèries temporals amb offset}

Aquí es descriu la solució general del problema (SequentialScan),
[faloutsous94-sigmod] n'estudia implementacions amb certes
heurístiques que aconsegueixen més eficiència.





\paragraph{Filtratge senzill per mitjana mòbil}

Sigui $p$ la mida de la finestra mòbil
\begin{gather*}
  \text{MitMobil}: S \times \text{p} \longrightarrow S':\\
  \text{map}(S,(t,v)\mapsto \text{mitjanaV}(S[t,t+p]))
\end{gather*}


Mitjana mòbil sobre la multiresolució



\paragraph{Farciment de forats}

Jo tinc una sèrie temporal i vull que entre dues mesures no hi hagi més d'un cert temps. Si no es compleix dic que té forats. 

Sigui $S$ una sèrie temporal, aquesta té forats de més durada que $d$
si alguna mesura compleix $\text{forats}(S,d) = \text{selecciona}(difT(S),v>d \bigwedge v\neq\infty)$ a on $difT(S) = \text{map}(\text{tpredecessors}(S),(t,v)\mapsto(t,t-v))$.

Amb la multiresolució el farciment de forats és natural a l'estructura i és controlat per la funció agregadora d'atributs.


* Com farciria els forats manualment a una sèrie temporal?

1. Passar-ho per un esquema de multiresolució

2. Treballar sobre la sèrie temporal:

a partir del càlcul de forats anterior $\text{forats}(S,d)$ per
exemple apliquem un farciment amb representació
zohe. $\text{farciment}(S,d) = \text{unio}(S,S')$ a on fem la selecció
de resolució $S' = S[T]^{\text{zohe}}$, $\forall (t,v) \in
\text{forats}(S,d): T = \{ \tau = t - dn |
\tau\in(t-v,t),n\in\mathbb{N} \}$.







\subsubsection{Com treure profit de les operacions dels SGSTM}

Temes que després es poden aprofitar a les implementacions

* No hi ha updates --> les sèries temporals no s'han de canviar

* Per exemple, vull calcular la mitjana de  BDSTM(a,b] si tinc un disc resolució amb $\delta=b-a$ i $f=$mitjana aquest seria l'adequat en comptes de calcular mitjana(SerieTotal(M)(a,b])

%??
% No obstant, la base de dades multiresolució conté informació sobre la
% resolució de les subsèries i per tant aquesta operació és susceptible
% d'implementar-se aprofitant aquesta informació.  A tall d'exemple es
% defineix una operació per extreure de la base de dades multiresolució
% una sèrie temporal regular amb període $T$:


% \begin{definition}[Selecció de resolució regular]
%   \begin{gather*}
%     \text{ResolucióRegular}: M^* \times T \times r \longrightarrow S'\\
%     \forall (S_{Bi},S_{Di},\delta_i,\tau_i,k_i,f_i) \in M : \\
%     d_i = T - \delta_i , \\
%     0 \geq d_0 > d_1 \dots > d_a, 0 < d_{a+1} < \dots < d_d: \\
%     S'' = S_{D0} || S_{D1} || \dotsb || S_{Da}  ||  S_{Da+1} || \dotsb || S_{Dd}, \\
%     S' = S''[i]^r: i = {t|0+nT,n\in\mathbb{N}}
%   \end{gather*}
% \end{definition}

% Nota: les operacions no són equivalents, l'operació $\text{SerieTotal}(M)[i]^r$ és molt més potent que la $\text{ResolucióRegular}(M,T)$.




\subsubsection{Semàntica de comportament}

\todo{?}





%%% Local Variables:
%%% TeX-master: "main"
%%% End:
% LocalWords:  SGSTM
