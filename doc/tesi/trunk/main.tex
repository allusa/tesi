%--------------------
% document principal
%--------------------
% cal compilar amb 
% 1. `pdflatex main.tex`
% 2. `biber main`
% 3. `makeglossaries main`
% 4. `pdflatex main.tex`
%--------------------
\documentclass[paper=a4,parskip=half,
twoside,fontsize=11pt,BCOR12mm,
%oneside,fontsize=11pt, %%format web
% twoside,openany,fontsize=10pt,DIV = 10,BCOR12mm, %%format en paper
%,toc=listof, %afegir índexs a l'índex
]{scrbook}
%%%%BCOR12mm  factor de correcció per enquadernació
%%%%BCOR??mm  factor de correcció per enquadernació amb espiral -0.5mm??
%\usepackage[T1]{fontenc}
\usepackage{lmodern}
%------------- capçalera ----------------------
\input{capçalera}
\bibliography{bibliografia}
\ExecuteBibliographyOptions{backref=true}
%backref=true, urldate=long, abbreviate=false,%%format web 
%annotation=true %per veure comentaris
%---------- Mode esborrany --------------------
\includeonly
%{intro}
%{art,seriestemporals,sgbd,sistemessimilars}
%{model}
%{sgst,sgst-operacions,sgst-naturalesa}
%{sgstm,sgstm-operacions,sgstm-interpoladors}
%{variacions,multiresolucio,informacio}
{implementacio,python,mapreduce,relacional,vhdl}
%{exemple}
%{conclusions}
%{futur}
\usepackage[catalan]{todonotes} %%ús: \todo{text} \missingfigure{text}
\usepackage{scrpage2}\pagestyle{scrheadings}\chead[--- esborrany \today\ ---]{\color{gray}{\today}}   
%\usepackage[showframe,a4paper]{geometry}%page margins %\geometry{layoutheight=230mm,layoutwidth=160mm,layoutvoffset=30mm,showcrop}
%\usepackage[cam,a3,center]{crop} %frame
%----------------------------------------------
%\usetikzlibrary{shapes,arrows,positioning}
%\usetikzlibrary{calc}
%------------- format -------------------------
%%ús coma decimal sense espais:  2{,}5
%per tal que trenqui la coma en math inline mode 
%http://tex.stackexchange.com/questions/19094/allowing-line-break-at-in-inline-math-mode-breaks-citations/
\AtBeginDocument{%
  \mathchardef\mathcomma\mathcode`\,
  \mathcode`\,="8000 
}
{\catcode`,=\active
  \gdef,{\mathcomma\discretionary{}{}{}}
}
%teoremes
\theoremstyle{plain}
\newtheorem{definition}{Definició}
%\declaretheorem{definition}
\theoremstyle{definition}
\newtheorem{example}{Exemple}
%\declaretheorem{example}
%modificar autoref per babel catala
\let\orgautoref\autoref
%per: (v. fig. 3)
\providecommand{\seeref}
{%
\def\figureautorefname{fig.}%
\def\definitionautorefname{def.}%
\def\exampleautorefname{ex.}%
\def\chapterautorefname{\gls{capitol}}%
\def\sectionautorefname{\gls{seccio}\ignorespaces}%
\def\subsectionautorefname{\gls{seccio}\ignorespaces}% 
\gls{vegeu}~\orgautoref%
}
%per: a la figura 3 !Problemes en les contraccions amb noms masculins! evitar a i de davant de capítol!
\providecommand{\textref}
{%
\def\figureautorefname{la figura}%
\def\definitionautorefname{la definició}%
\def\exampleautorefname{l'exemple}%
\def\chapterautorefname{el capítol}% al/del capítol???
\def\sectionautorefname{la secció}%
\def\subsectionautorefname{l'apartat}% 
\orgautoref%
}
%per defecte
\renewcommand{\autoref}
{%
\def\figureautorefname{figura}%ús: \autoref{}
\def\tableautorefname{taula}%ús: \autoref{}
\def\definitionautorefname{definició}%ús: \autoref{}
\def\exampleautorefname{exemple}%ús: \autoref{}
\def\chapterautorefname{capítol}%ús: \autoref{}
\def\sectionautorefname{secció}%ús: \autoref{}
\def\subsectionautorefname{apartat}%ús: \autoref{}
\orgautoref%
}
%numeracions d'equacions, definicions, etc.
\numberwithin{equation}{chapter}
\numberwithin{definition}{chapter}
\numberwithin{example}{chapter}

\renewcommand\lstlistingname{Llistat} %%%PENSAR bé el nom
\renewcommand\lstlistlistingname{Índex de llistats}
\def\lstlistingautorefname{llistat} %ús: \autoref{}


%%format del listoftherorems
\makeatletter
\def\ll@example{%
  \protect\numberline{\csname the\thmt@envname\endcsname}%
  \ifx\@empty\thmt@shortoptarg
    \thmt@thmname
  \else
    \thmt@shortoptarg
  \fi}
\def\ll@definition{%
  \protect\numberline{\csname the\thmt@envname\endcsname}%
  \ifx\@empty\thmt@shortoptarg
    \thmt@thmname
  \else
    \thmt@shortoptarg
  \fi}
\makeatother


\DefineBibliographyStrings{catalan}{%
%    andothers = {i altres},
    backrefpage  = {citat a la p\adddot}, % for single page number
    backrefpages = {citat a les pp\adddot} % for multiple page numbers
}




\usepackage{subcaption}
\usepackage{multirow}
\usepackage{pgfplots}
\usetikzlibrary{dateplot}
\usetikzlibrary{shapes,arrows,positioning}
\usetikzlibrary{patterns}
\usepackage{imatges/tikz-uml}

\input{imatges/estils_pgf}

\def\pgfcalendarmonthshortname#1{%
%\translate{
\ifcase#1\or gen.\or febr.\or març\or abr.\or maig\or juny\or jul.\or ag.\or set.\or oct.\or nov.\or des.\fi}
%}

% \def\pgfcalendarmonthname#1{%
% \translate{\ifcase#1\or JJJ\or FFF\or MMM\or AAA\or
% MAY\or JJU\or JJY\or AAU\or SSS\or OOO\or
% NNN\or DDD\fi}}


\usepackage{arydshln} %hdashline a les taules


\usepackage{bookmark}%per netejar l'ordre de \part{}


%glossaris
%\usepackage{supertabular}
\usepackage[
          nomain,% Remember if you don't want to use the main glossary.
          acronym,
          %%nonumberlist,
          toc,
          section,
          numberedsection=false,%numberedsection=autolabel,
          sanitize=none, %pels accents en el vegeu
          ]{glossaries}
%\renewcommand*{\glspostdescription}{}%anul·la el punt final
\renewcommand*{\acronymname}{Sigles}%{Índex de sigles}??si té refs pàgines 
%Índex d'abreviacions?? si conté abreviatures o símbols
% \short<type>name,
\input{vocabulari/glossari.tex}
\loadglsentries{vocabulari/abreviacions.tex}
\loadglsentries[notation]{vocabulari/notacio.tex}
\newcommand{\glssymboldef}{\glssymbol[format=hyperbf,counter=definition]}
\newcommand{\glsdispdef}{\glsdisp[format=hyperbf,counter=definition]}
\newcommand{\hyperbfsec}[1]{\textbf{\S\hypersf{#1}}}
\newcommand{\hyperbfex}[1]{\textbf{ex.\hypersf{#1}}}
\newcommand{\glsaddsec}{\glsadd[format=hyperbfsec,counter=subsection]}
\newcommand{\glsaddchap}{\glsadd[format=hyperbfsec,counter=chapter]}
\newcommand{\glsaddsection}{\glsadd[format=hyperbfsec,counter=section]}
\newcommand{\glsdispsec}{\glsdisp[format=hyperbfsec,counter=subsection]}
\newcommand{\glssymbolsec}{\glssymbol[format=hyperbfsec,counter=subsection]}
\newcommand{\glssymbolex}{\glssymbol[format=hyperbfex,counter=example]}



%-------------- dades --------------------------
\hypersetup{
    pdftitle={Disseny i modelització d'un sistema de gestió multiresolució per a sèries temporals},
    pdfauthor={Aleix Llusà Serra},
    pdfcreator={DiPSE--UPC},
    pdfsubject={Tesi 2011--2014},
    pdfkeywords={sèries temporals; model de dades; sistemes de bases de dades; sistemes de monitoratge},
    pdflang={ca},
}

\title{Disseny i modelització d'un sistema de gestió multiresolució per a sèries temporals}
\author{Aleix Llusà Serra}
%----------------------------------------------


\begin{document}
%\frontmatter
%------------- Pàgina de títol ------------
%\maketitle
%\input{portada}
%----------------------------------------------

%------------- Abstract ------------
%\begin{abstract}
%\include{resum}
%\end{abstract}
%----------------------------------------------

%------------- Índex de continguts ------------
\cleardoublepage\pdfbookmark{\contentsname}{bookmark:index}\tableofcontents{}
%\addtocontents{toc}{\protect\enlargethispage{1cm}}
%----------------------------------------------



%------------- Cos ------------
%\mainmatter

\part{Introducció}

\include{intro}

%-- ART --
\include{art}
\include{seriestemporals}
\include{sgbd}
\include{sistemessimilars}



\part{Models}
%-- MODELS --
\include{model}

\include{sgst}
\include{sgst-operacions}
\include{sgst-naturalesa}

\include{sgstm}
\include{sgstm-operacions}
\include{sgstm-interpoladors}



\part{Consideracions i reflexions sobre els models}
%-- POST-MODELS --

\include{variacions}
\include{multiresolucio}
\include{informacio}


\part{Experimentació}
%-- Implementacions --

\include{implementacio}

\include{python}
\include{mapreduce}
\include{relacional}
%\include{vhdl}
\include{exemple}


\part{Conclusions}

\include{conclusions}
\include{futur}


%------- Annexos ------
%\appendix




\backmatter
\bookmarksetup{startatroot}%  per eliminar les parts
\addtocontents{toc}{\bigskip}% perhaps as well

%------- Bibliografia ------
\cleardoublepage
\phantomsection\addcontentsline{toc}{chapter}{\bibname}
%\pdfbookmark{\bibname}{bookmark:bibliografia}
\printbibliography
%----------------------------------------------


%------- Glossari ------
\cleardoublepage
%\phantomsection\addcontentsline{toc}{chapter}{\glossaryname}
%\pdfbookmark{\glossaryname}{bookmark:glossari}
\chapter{Abreviacions i nomenclatura}
\glsaddall[counter=subsection,types={abreviatura,\acronymtype}]
%\printglossary

\printglossary[type=abreviatura,nonumberlist]

\printglossary[type=\acronymtype,title=Sigles,nonumberlist]

\renewcommand{\glossarypreamble}{Índex de notació segons nom, símbol i
  referència --pàgina o en negreta lloc on es defineix el concepte:
  definició, secció (\S) o exemple (ex.). Organitzada en símbols
  matemàtics que requereixen aclariment i notació dels
  components dels \gls{SGST} i dels \gls{SGSTM}.}

\printglossary[type=notation,style=estil-notation]


%------------- Índexs ------------
%ATENCIÓ, hi ha problemes quan s'activen molts índexs
% \cleardoublepage\phantomsection\addcontentsline{toc}{chapter}{Índexs}\chapter*{Índexs}
% \begingroup
% \let\clearpage\relax
% \phantomsection\addcontentsline{toc}{section}{\listfigurename}\listoffigures
% %%%\cleardoublepage\phantomsection\addcontentsline{toc}{section}{\listtablename}\listoftables
% \phantomsection\addcontentsline{toc}{section}{\lstlistlistingname}\lstlistoflistings
% \renewcommand\listtheoremname{Índex de definicions}
% \phantomsection\addcontentsline{toc}{section}{\listtheoremname}\listoftheorems[ignoreall,show={definition}]
% \renewcommand\listtheoremname{Índex d'exemples}
% \phantomsection\addcontentsline{toc}{section}{\listtheoremname}\listoftheorems[ignoreall,show={example}]
% \endgroup
\listoftodos %%%%mode esborrany
%----------------------------------------------



\end{document}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
% Memòria Tesi Doctoral. 
%
% Copyright (C) 2011-2014 Aleix Llusà Serra.
% 
% This LaTeX document is free software: you can redistribute it and/or
% modify it under the terms of the GNU General Public License as
% published by the Free Software Foundation, either version 3 of the
% License, or (at your option) any later version.
%
% This document is distributed in the hope that it will be useful, but
% WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
% General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this document. If not, see <http://www.gnu.org/licenses/>.
%
%
% Aleix Llusà Serra
% Departament de Disseny i Programació de Sistemes Electrònics de la Universitat Politècnica de Catalunya (DiPSE-UPC)
% Escola Politècnica Superior d'Enginyeria de Manresa (EPSEM)
% Av. de les Bases de Manresa, 61-73
% 08242 Manresa (Barcelona)
% PAÏSOS CATALANS 
%
% aleix (a) dipse.upc.edu
% 
% El codi font LaTeX del document es troba a 
% <http://escriny.epsem.upc.edu/projects/rrb/>
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 