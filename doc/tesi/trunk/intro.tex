

\chapter{Introducció}

En els darrers anys, el cost dels sensors de monitoratge s'ha reduït
considerablement i com a conseqüència cada cop n'hi ha més al nostre
voltant.  Per exemple, recentment ha aparegut el concepte de ciutat
inte\l.ligent (\emph{smart city}) --una ciutat plena de sensors i per
tant amb una gran potència de monitoratge-- o bé el concepte de
comptador inte\l.ligent (\emph{smart meter}) --un sensor amb capacitat
d'enregistrar dades, d'analitzar-les i amb sistemes de comunicació
integrats. Així doncs, és possible de recollir grans quantitats de
dades per a monitorar i controlar sistemes complexos. 

Però, cal emmagatzemar totes les dades que aquests sistemes de
monitoratge són capaços de recollir?, cal emmagatzemar-les
indefinidament en el temps? O bé es pot emmagatzemar només la
informació que es desitgi monitorar o controlar i rebutjar la resta?,
de manera que no calgui gestionar un volum de dades massiu que
realment no s'utilitzarà? En aquesta tesi dissertem sobre un mètode
capaç de seleccionar i emmagatzemar una determinada informació de les
dades, com gestionar aquesta informació i fins a quin límit això es pot
aplicar. L'anomenem multiresolució.


Contextualitzem la multiresolució en dos àmbits: les sèries temporals
i els \glspl{SGBD}. En aquesta tesi unim conceptes d'aquest dos àmbits
i proposem solucions per alguns dels problemes que en resulten.



\paragraph{Les sèries temporals}
Les sèries temporals es defineixen com a co\l.lecions d'observacions
d'un mateix fenomen al llarg del temps.  Les sèries temporals són
útils per a formalitzar dades com les que adquireixen els sensors, és
a dir conjunts de valors mesurats en un instant de temps
determinat. Aquestes sèries temporals contenen informació de l'entorn
monitorat i han de ser analitzades per a predir l'evolució dels
sistemes, per a detectar patrons de comportament, per a detectar
anomalies, per a reconstruir els històrics, etc.


La recerca en anàlisi de sèries temporals ha augmentat en la darrera
dècada, tal com explica \textcite{fu11}. Actualment, és un camp de
gran interès, sobretot pel que fa a processar grans volums de dades.
Com es mostra en \textref{cap:estat} d'aquesta memòria, hi ha multitud
de metodologies i algoritmes que proposen solucions a aquests
problemes. Un dels problemes de la gestió de sèries temporals és
conseqüència del fet que són dades voluminoses i per tant són
complicades d'emmagatzemar i de tractar \cite{fu11,keogh08:isax}.
Aquest problema és especialment crític en el disseny de sistemes
integrats petits \cite{yaogehrke02}, els recursos dels quals són
limitats: capacitat d'emmagatzematge, consum d'energia, temps de
processament i capacitat de les comunicacions.  Una altre problema
ocorre quan les dades no han estat adquirides equi-espaiades en el
temps, ja que alguns algoritmes d'anàlisi de sèries temporals ho
requereixen.


\todo{revisar}
Nosaltres ens ocuparem de les sèries temporals des de la visió més
genèrica possible; és a dir una sèrie temporal com a conjunt de dades
que s'han adquirit en uns certs instants de temps.  En aquest sentit,
les sèries temporals poden representar dades molt variades i que
pertanyen a àmbits molt diferents. Alguns d'aquests àmbits tenen
estudis més particulars, focalitzant i simplificant l'estudi en les
propietats específiques de les dades. Per exemple la teoria del senyal
es focalitza en dades adquirides regularment i amb components de
periodicitat o bé a vegades les sèries temporals es redueixen a
seqüències temporals en què només importa l'ordre en què s'han
adquirit i el període d'adquisició es constant.  Així doncs, l'estudi
genèric de les sèries temporals no pretén substituir aquests estudis
propis de cada àmbit sinó que pretén oferir una visió més àmplia i
comuna a totes aquestes dades i oferir un estudi per a aquelles dades
que no tenen un comportament clarament definit. Aquest és el cas, per
exemple, de les dades adquirides en un monitoratge en entorns no
controlats d'una variable física: aquestes variables són aleatòries,
el temps d'adquisició pot ser irregular, etc. Per tant cal
estudiar-les genèricament com a sèries temporals des del punt de vista
en què cal saber la posició de temps absoluta que ocupen i la
distància de temps entre els valors.





\paragraph{Els SGBD}
Els \gls{SGBD} són els sistemes informàtics encarregats d'emmagatzemar
i gestionar dades de forma genèrica. Els conceptes dels \gls{SGBD} es
basen en models matemàtics formals que defineixen l'estructura dels
objectes i les operacions que els usuaris perceben de forma
abstracta. El model formal de referència dels \gls{SGBD} és el model
relacional \parencite{date04:introduction8}.


Els \gls{SGBD} habituals fins a l'actualitat han estat els que
disposen d'un llenguatge de consultes anomenat \gls{SQL}, tot i que en
els darrers anys han aparegut altres sistemes, anomenats \emph{NoSQL}
i \emph{NewSQL}, per tal de millorar el rendiment i la flexibilitat
dels
\gls{SQL} \parencite{atzeni13:relational_model_dead,stonebraker10,stonebraker09:scidb,zhang11}. Alguns
autors \parencite{dreyer94,schmidt95,stonebraker09:scidb,zhang11}
noten els aspectes en què cal millorar els \gls{SGBD} per tal de
tractar les sèries temporals i fan èmfasi en el fet que és necessari
un model que enllaci el coneixement dels \gls{SGBD} amb el de
l'anàlisi de sèries temporals. Sobretot, l'adquisició contínua de nous
valors és el un repte a l'hora d'emmagatzemar i analitzar les sèries
temporals \parencite{keogh97}. 

% Dels
% treballs publicats en els que es mostra la necessitar d'estudiar
% conceptes de model es destaquen el treball de \textcite{dreyer94}, en
% el qual presenten l'estructura bàsica que han de tenir els SGST; els
% estudis de \textcite{bonnet01} per a xarxes de sensors; i els exemples
% de consultes de \textcite{zhang11} per algunes de les propietats de
% les sèries temporals.


També cal que els \gls{SGBD} gestionin adequadament i amb coherència
l'atribut temporal de les sèries temporals.  En els \gls{SGBD} també
es gestionen històrics temporals, és a dir l'evolució de les dades al
llarg del temps. Aquest és un problema similar a les sèries temporals
pel que fa a que tots dos treballen amb atributs temporals, tot i així
pertanyen a dues categories diferents de dades i no poden ser tractats
de la mateixa manera \parencite{assfalg08:thesis,schmidt95}.  Ara bé,
els històrics temporals han estat llargament estudiats en els
\gls{SGBD} i finalment s'han formalitzat com a intervals temporals
dins del model relacional \parencite{date02:_tempor_data_relat_model}.
Les sèries temporals necessiten consolidar un model similar en què se
n'estudiïn les propietats i els requisits
específics \parencite{dreyer94,segev87:sigmod}.




\todo{revisar} En aquest treball estudiem els \gls{SGBD} que treballen
específicament amb sèries temporals, aleshores els anomenem
\glspl{SGST}. De la mateixa manera, dissenyem \gls{SGST} amb
capacitats de multiresolució, els quals anomenem
\glspl{SGSTM}. Formulem el model dels \glspl{SGSTM} per la qual cosa
necessitem també formular el model dels \gls{SGST}.




%Les metadades de les sèries temporals s'han d'emmagatzemar en un SGBD genèric. Fer un dibuix on és vegi un SGBD i a dins metadades de sèries temporals i un SGST que gestiona les sèries temporals.




\paragraph{La multiresolució}
La multiresolució resumeix la informació d'una sèrie temporal
mitjançant un conjunt de resolucions. Cada resolució correspon a un
atribut i a un període de temps de la sèrie temporal. El concepte de
multiresolució prové d'un estudi profund d'un sistema anomenat
RRDtool \parencite{rrdtool}. El nostre objectiu és descriure els
conceptes principals de la multiresolució de manera abstracta per a
obtenir un model formal dels \gls{SGSTM}.

La multiresolució implica una selecció d'informació i, per tant,
alhora implica una pèrdua d'informació. Com a conseqüència, l'usuari
ha de determinar un esquema de multiresolució per a cada sèrie
temporal que vulgui gestionar amb un \gls{SGSTM}. A partir del model
dels \gls{SGSTM} reflexionarem sobre com gestionen la informació i
sobre quins efectes tenen diferents esquemes de multiresolució.
%l'usuari n'ha d'estar al cas, és a dir que no pot ser que un sistema autònomament decideixi emmagatzemar una sèrie temporal amb multiresolució sense avisar a l'usuari. 


El model de \gls{SGSTM} es dissenya de forma genèrica per a permetre'n
implementacions vàries. Així, hi ha vàries aproximacions possibles per
a computar la multiresolució: limitar l'emmagatzematge pensant en
sistemes petits, precomputar el resultat per a disposar-ne
visualitzacions immediates, acumular totes les dades i processar-les
en temps diferit aprofitant computació para\l.lela, repartir el temps
de computació durant el mateix procés d'adquisició, etc. En aquest
document explorarem aquestes possibilitats dels \gls{SGSTM}.



\todo{refer}
La multiresolució és una tècnica de compressió amb pèrdua de les
sèries temporals. Hi altres tècniques de compressió que s'apliquen a
les sèries temporals. D'una banda hi ha tècniques d'aproximació al
senyal original per a analitzar similituds entre sèries temporals o
cercar-hi patrons \parencite{fu11,keogh01,last01}. 
D'altra banda hi ha
tècniques per a comprimir i aproximar amb agregacions per a fluxos de
dades massius \parencite{cormode08:pods,bonnet01}. 

Això no obstant, aquestes tècniques o bé són massa genèriques i no
consideren adequadament la dimensió temporal, o bé no analitzen
l'evolució dels paràmetres al llarg del temps , o bé no atenen la
relació entre els \gls{SGBD} i els sistemes de monitoratge, la qual
pot causar alguns problemes --irregularitats en el temps de mostreig,
dades falses, forats sense dades, etc.-- que cal gestionar
adequadament.





On the other hand, compression techniques for time series are
considered in the form of approximation to the original signal in
order to compute analysis such as similarity or pattern search
\cite{fu11,keogh01,last01} or in the form of compression and
aggregation approaches for massive data streams
\cite{cormode08:pods,bonnet01}. However, treating time series as data
streams does not consider adequately the time dimension nor computes
the evolution of aggregated parameters along time, which is
interesting for monitoring purposes.  

On a similar approach,
\emph{RRDtool} \cite{rrdtool} is a system that stores time series
aggregated in different resolutions in order to compact data and to do
faster visualisations. However, \emph{RRDtool} is very specific and
has limited aggregation operations to applications of network
counters.
També citar \cite{dou14:historic_queries_flash_storage}


RRDtool n'és una excepció ja que, per ser un sistema productiu, el processament de dades i emmagatzematge és més proper als sistemes de monitoratge. No obstant axiò, està centrat en un tipus de dades particulars, les magnituds i els comptadors, i no té tantes operacions generals per les sèries temporals com els altres SGST.

RRDtool és molt específic pel camp de comptadors de xarxa i volem oferir un model genèric per a altres àmbits.  



L'estudi d'un model de SGBD per a sèries temporals té dues vessants.
Per una banda, després d'una mirada general a algunes aplicacions de
les sèries temporals, s'observa que hi ha molts algoritmes específics
i dissenyats a mida per al seu tractament. A més, s'observa que en el
tractament de les sèries temporals es duen a terme un conjunt de
tasques comunes: canvis de resolució, reconstrucció de forats,
reducció del volum de dades, etc.  Tot i que hi ha sistemes dissenyats
específicament per a tractar-hi, com per exemple
\emph{RRDtool} \parencite{rrdtool} o \emph{Cougar} \parencite{fung02},
no s'ha identificat un model general per tractar aquests problemes.


En l'àmbit dels SGBD també s'hi inclou l'estudi d'implementacions que
permetin obtenir un bon rendiment. Un cop s'ha formalitzat el model es
poden avaluar les implementacions més adequades per a cada
aplicació. Per exemple en el cas de les sèries temporals es pot
aplicar la gestió mitjançant \emph{data
  streams} \parencite{babcock02}.


% També Cougar i TinyDB que exploren l'encaix dels SGBD en entorns distribuïts de xarxes de sensors. Proposen noves estratègies de comunicació amb l'objectiu d'ajustar el consum d'energia. 


% SciQL, un model recent per SGBD  basat en matrius, és el que més es pot considerar com a SGST, ja que s'està desenvolupant per complir-ne algunes propietats.

% \todo{comentar també}
% \cite{dou14:historic_queries_flash_storage}









\section{Contribució d'aquesta tesi}



Highlights del nostre treball


Potser la gran diferència que marca el model de multiresoució respecte altres treballs és:

\begin{itemize}

\item 
* Si bé els streams agreguen estadístics de les dades, la multiresolució té en compte l'evolució d'aquests estadístics al llarg del temps, cosa que lliga més amb l'àmbit del monitoratge. És a dir, tenim en compte el temps, altres projectes només avaluen el moment present.  However, as a lossy storage solution, the
  multiresolution schema has to be decided for each application
  planning what approximate queries will be needed to resolve.

* Si bé l'orientació a agregadors amb stream és molt interessant, el model es manté genèric per a poder calcular amb qualsevol funció d'agregació.

* Es tenen en compte les irregularitats de mostreig de les series temporals

* Es modelitza fortament el concepte de funció de representació de les sèries temporals i així es pot tenir en compte la semàntica de cada sèrie temporal, ja que en cada agregació té molta afectació, per exemple quan les dades monitorades tenen naturalesa de comptadors als quals RRDtool s'hi ha especialitzat.
 We formalise the representation function concept of time series
  in order the user can define different operators considering the
  semantics of time series in different contexts; especially they
  behave differently in aggregation operations, i.e. RRDtool specific counter
  time series aggregations. Furthermore, we formalise representation
  as an independent object of the main model.

* Els altres treballs se centren en el problema de recuperar el senyal original, ho demostra el fet que avaluin el resultat amb SSE (per mínims quadrats). Nosaltres enfoquem el problema en un domini més genèric de les consultes aproximades on volem avaluar el resultat per si respon correctament a les consultes, encara que el senyal recuperat no s'assembli gens a l'original.


\item Our model considers the time irregularities sampling of time
  series. Moreover, it operates coherently with the time dimension of
  time series.

\item We describe the model firmly rooted on relational algebra as a formal
  theory for information systems.

\end{itemize}








Publicacions realitzades:

\begin{itemize}

\item Report de recerca \parencite{llusa12:report} conjuntament amb
  la Teresa Escobet-Canal i el Sebastià Vila-Marta, publicat el 17 de
  desembre de 2012 al departament de Disseny i Programació de
  Sistemes Electrònics de la Universitat Politècnica de Catalunya.
 informe de
  recerca a on constés les mancances que observem que tenen els SGBD
  per a les sèries temporals, les propietats i requisits que han de
  complir i la idea bàsica de la nostra proposta d'un nou model
  multiresolució per a sèries temporals. 

\item Ponència a congrés \parencite{llusa13:aiked} conjuntament amb la
  Teresa Escobet-Canal i el Sebastià Vila-Marta, realitzada al
  ``International Conference on Artificial Intelligence, Knowledge
  Engineering and Data Bases'' (AIKED '13) a Cambridge (UK) els dies
  20--22 de febrer de 2013.
 donar a conèixer de
  forma resumida el model multiresolució que volem dissenyar.


\item Redacció d'articles i informes. Un cop s'ha completat
  el disseny del model de SGBD per a sèries temporals, s'ha escrit
  compactament en format article per a l'àmbit de les bases de dades.
  En aquest article també s'ha inclòs el disseny de la implementació
  de referència dels model.  Aquesta tasca s'ha allargat més del
  previst: ha calgut fer una tasca intensa de recerca de revistes i
  congressos que siguin afins a l'àmbit on treballem, cosa que també
  ha causat una gran feina de motivació i de recerca de treballs
  relacionats en l'actualitat de la temàtica seleccionada.  L'article
  s'ha escrit conjuntament amb la Teresa Escobet Canal i el Sebastià
  Vila Marta i està pendent per presentar-lo a la revista
  \emph{Information Systems}.


\end{itemize}


També cal dir que en aquesta tesi es desenvolupen implementacions dels models que, tot i que són a nivell acadèmic, es poden utilitzar. Són programari lliure  \todo{}




% * beca FPU-UPC
% * participació projecte NAPSAprovada la concessió del projecte d'investigació
%   TEC2012-35571 ''Nuevas aplicaciones del principio superregenerativo
%   a comunicaciones por radiofrecuencia (NASP)'' per als pròxims 3 anys
%   en finalitzar l'anterior projecte AVIC. Investigador principal Pere
%   Palà Schönwälder.

% * Dades iSENSE




% S'ha estat subscrit a les llistes de debat de:

% * RRDtool
% * thirdmanifesto

% que és on aquesta gent discuteix els seus problemes



% S'ha desenvolupat amb control de versions a

% S'ha desenvolupat programari lliure, disponible a , amb manuals de documentació disponibles a


\section{Estructura del document}

% El model de dades per a sèries temporals es dissenya en el
% capítol~\ref{cap:model:sgst}. El disseny d'aquest model és necessari
% per a comprendre i construir el model multiresolució.  El model de
% dades multiresolució es dissenya en el capítol~\ref{cap:model:sgstm}.


\todo{revisar}

Aquesta recerca té per objectiu l'estudi de les necessitats
específiques que comporta l'emmagatzematge i gestió de dades amb
naturalesa de sèrie temporal i la proposta d'un model de SGBD que
satisfaci aquestes necessitats. Aquest objectiu es divideix en els
següents subobjectius més concrets:

\begin{itemize}

\item Estudi de les aplicacions en que les dades són sèries temporals
  amb la finalitat de determinar quines són les propietats i problemes
  comuns que planteja la seva gestió i emmagatzematge.

\item Estudi dels models de SGBD existents. Segons es desprèn de la
  formalització de Date%\textcite{date:introduction}
  el model principal és el model relacional, el qual es fonamenta en
  dos conceptes: relacions i tipus de dades.

\item Una àrea de treball important en els SGBD és la incorporació de
  nous tipus de dades complexos. És important estudiar com es modifica
  el model de dades d'un SGBD quan s'afegeix un nou tipus de dades
  complex.  Les sèries temporals es poden d'entendre com a tipus
  complex ja que presenten diferents propietats característiques i
  necessiten operadors addicionals.  

\item Disseny d'un model de SGBD per a les sèries temporals. D'aquesta
  manera els SGBD podran tractar dades amb instants de temps que
  mostrin l'evolució de variables en funció del temps. El model
  consisteix en la definició de l'estructura de les sèries temporals i
  les operacions bàsiques que necessiten.

  L'assoliment d'aquest objectiu té dues parts:

  \begin{enumerate}
  \item Disseny d'un model per a la gestió bàsica de les sèries
    temporals, el qual anomenem model de SGBD per a sèries temporals
    (SGST).  L'estructura d'aquest model és similar a l'utilitzat en
    els intervals
    temporals. %\parencite{date02:_tempor_data_relat_model}.
    Prenent com a base el model de SGST, el qual és un model general
    per a les sèries temporals, s'hi poden incloure altres models per
    a propietats més específiques de les sèries temporals.

  \item Disseny d'un model específic en base del model de
    SGST. Concretament es dissenya un model pels SGST multiresolució
    (SGSTM).  En el model de SGSTM s'hi poden incloure propietats de
    les sèries temporals relacionades amb la resolució que s'han
    observat en les aplicacions pràctiques de les sèries temporals:
    regularització, canvis de resolució mitjançant agregacions,
    reconstrucció de forats, etc.

  \end{enumerate}


\item Variacions del model. Petites variacions que condueixen a altres aplicacions. El model de SGSTM
    proposat està preparat per a rebre contínuament dades en flux
    (\emph{data stream}). Això no obstant, la multiresolució també es
    pot aplicar en temps diferit (\emph{offline}) per a dades
    emmagatzemades. Cal una funció que permeti determinar com d'una
    sèrie temporal s'obté una nova sèrie temporal resultant d'haver
    aplicat un esquema de multiresolució. En aquest
  càlcul en temps diferit apareix la possibilitat de computar
  para\l.lelament.

\item Reflexió sobre la informació en la multiresolució.  A partir
  de la multiresolució expressada com una funció simplificada, que
  calcula en temps diferit, convé explorar noves recerques. En primer
  lloc, cal avaluar formalment aquesta funció de multiresolució
  respecte a tot el model proposat de SGSTM.  A partir d'aquesta funció pot ésser
  més senzill estudiar la selecció o pèrdua d'informació que implica
  usar un model de multiresolució.

\item Implementació de referència dels models de SGST i SGSTM. Per una
  banda, aquesta implementació, a nivell acadèmic, ha de servir com a
  exemple per a futurs desenvolupaments de sistemes de gestió,
  acadèmics o productius. Per altra banda, ha de servir per a
  exemplificar-ne els seu funcionament amb unes dades de prova.

\item Implementació específica del model per a una determinada
  aplicació de sèries temporals. Exemplificació de com una estructura
  de SGSTM pot ser implementada per a aconseguir una aplicació
  concreta. Aquesta implementació treballa amb conceptes de
  para\l.lelisme. S'ha començat a dissenya una nova implementació de la
  multiresolució en Hadoop basada en conceptes de computació
  para\l.lela en els SGBD. Un cop ben establert el model d'aquest
  esquema de multiresolució cal acabar d'implementar-lo i provar-lo
  amb les mateixes dades experimentals que s'usen per a la
  implementació de referència.



\item Experimentació amb dades. Es disposa d'unes dades
  noves amb irregularitats interessants per a aplicar-hi el model de
  multiresolució. Són unes dades de sensors reals en un sistema de
  dipòsits d'aigües. Aquestes dades pertanyen a sensors
  interrelacionats, cosa que les fa més interessants per analitzar-hi
  l'efecte que hi un SGSTM i com pot ajudar a emmagatzemar-les de
  forma compacta.


\end{itemize} 






%\subsection{Formats i qüestions lingüístiques}

%Algun format en especial? els codis python, els fitxers?

%Algunes qüestions lingüístiques remarcables?



%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "main"
%%% End: 

%  LocalWords:  multiresolució
