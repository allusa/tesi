\section{Example}
\label{sec:example}

Next we show an example database for a real time series data.  Data
comes from a temperature distributed sensor monitoring system,
\cite{alippi10}. We focus on one sensor data.

The Figure~\ref{fig:exemple:original} shows the original data for one
year and a half.  The time series is plotted interpolating linearly
its measures. In this plot we can see that there is missing data and
some outlying observations. There are $146\,709$ stored values.

\begin{figure}[tp]
  \centering
  \tikzset{every picture/.style={scale=0.8}}
  \input{imatges/isense_original.tex}
  \caption{Example of a temperature time series data}
  \label{fig:exemple:original}
\end{figure}

\emph{Schema}. We design a multiresolution time series database that
stores a time series with high resolution at recent times and with low
resolution at older times. The schema is illustrated in the
Figure~\ref{fig:exemple:window}. At the top there are four discs with
different number of measures and at the bottom there is a timeline
showing the time series chopped along time. Going from most to least
granularity disks are configures as follows: (i) a measure every 5 h
in the fourth disc which has a capacity of 24 measures ---it spans 5
days---; (ii) a measure every 2 days in the third disc, with a
capacity of 20 ---it spans 40 days---; (iii) a measure every 15 days
in the second disc, with a capacity of 12 ---it spans 180 days--- and;
(iv) a measure every 50 days in the first disc that, with a capacity
of 12 results in a span of 600 days.

\begin{figure}[tp]
  \centering
  \setlength{\unitlength}{1.3mm}
  \input{imatges/mtsdb-time_window.tex}
  \caption{Schema of resolutions in a MTSDB}
  \label{fig:exemple:window}
\end{figure}

\emph{Attribute aggregate functions}.  In order to illustrate this
example we consolidate all the resolution discs using the zohe
arithmetic mean aggregate function and the highest resolution disc
using the zohe maximum aggregate function. Next, we show the process
in designing both aggregate functions.

In accordance to the zohe equation~\ref{eq:zohe} defined using
left-continuous step functions, we define the zohe attribute aggregate
function family as the one interpreting the consolidation time
interval left-continuous $i=(T_0,T_f]$ and the one aggregating on the
subset $S'=S(T_0,T_f] \cup \{\min(S-S(-\infty,Tf))\}$:
\begin{itemize}
  \renewcommand{\labelitemi}{--}
\item maximum$^{zohe}$: $S \times i \mapsto m'$ where $V(m') =
  \max_{\forall m \in S'}(V(m))$ and $T(m')=T_f$.
\item arithmetic mean$^{zohe}$: $S \times i \mapsto m'$ where $V(m')
  = \frac{1}{|S'|} \sum\limits_{\forall m\in S'} V(m)$ and
  $T(m')=T_f$. 
\end{itemize}

%\subsection{Results}

The time series after consolidating the MTSDB are shown in the
Figure~\ref{fig:exemple:4mrd}, where each graphic corresponds to a
resolution disc time series. Each title shows the disc resolution and
its cardinal, and each attribute aggregate function has different
colour.  Each time series is plotted with zohe continuous
representation. Time axis has UTC units rounded to nearest time points
and temperature axis has Kelvin units. Outlayers are marked as
discontinuities, for instance see fourth plot's 2938 K maximum.

\begin{figure}[tp]
  \centering
  \tikzset{
    every picture/.style={scale=0.7},
  }
  \input{imatges/isense_4mrdb.tex}
  \caption{Resolution discs' time series in a MTSDB}
  \label{fig:exemple:4mrd}
\end{figure}

In all the four plots, we can see that arithmetic mean aggregate
function has filled missing data and filtered outlayers
observations. This is due to the aggregate function coming from a zohe
interpretation, that is known values are time left hold.

Data can be queried.  For example, one query would be the union of the
four time subseries choosing the one with the highest resolution as
shown in the Figure~\ref{fig:exemple:4mrdtot}.  Each time series is
plotted interpolating linearly its measures, note that this linearly
visualisation seems right time displaced as time series comes from a
zohe aggregation.  Comparing this figure with the original series
(Figure~\ref{fig:exemple:original}), we observe that it resembles an
incremental low-pass filter because we applied mean aggregation while
the maximum aggregation resembles an envelope function.

\begin{figure}[tp]
  \centering
  \tikzset{every picture/.style={scale=0.8}}
  \input{imatges/isense_mrdb-all.tex}
  %\includegraphics[width=12cm]{\experiment/isense3-tot.pdf}
  \caption{All time series united from the MTSDB}
  \label{fig:exemple:4mrdtot}
\end{figure}

Note that with this MTSDB example schema we achieve not an
approximation to the original function but an extraction of some
interesting information.



%%% Local Variables:
%%% TeX-master: "main-wseas"
%%% ispell-local-dictionary: "british"
%%% End:

% LocalWords:  multiresolution MTSDB
